"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[19464],{35227:(be,M,d)=>{d.d(M,{O4K:()=>p.O4K,k$y:()=>p.k$y,qFd:()=>p.qFd,yS$:()=>p.yS$});var p=d(64751)},19464:(be,M,d)=>{d.r(M),d.d(M,{PlatformUploadColletionDocsComponent:()=>dn});var p=d(84142),W=d(54742),h=d(48180),u=d(77342),I=d(62303),b=d(96814),f=d(64751),v=d(93793),G=d(43535),V=d(33764),w=d(31380),K=d(44321),Y=d(17884),U=d(60095),y=d(66162),X=d(90291),e=d(65879);function ye(n,l){1&n&&(e._UZ(0,"span",8),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.ALo(3,"fdTranslate")),2&n&&(e.Q6J("label",e.lcZ(1,3,"platformUploadCollection.newFolderInputErrorLabel")),e.uIk("title",e.lcZ(2,5,"platformUploadCollection.newFolderInputErrorLabel"))("aria-label",e.lcZ(3,7,"platformUploadCollection.newFolderInputErrorLabel")))}const Ue=function(n){return{folderName:n}};let q=(()=>{class n{constructor(t){this.dialogRef=t,this._currentFolder=this.dialogRef.data.currentFolder,this._maxFilenameLength=this.dialogRef.data.maxFilenameLength,this._newFolderName="New Folder"}ngAfterViewInit(){const t=this.formControl.elementRef.nativeElement;t&&(t.focus(),this._setSelectionRange(t,0,this._newFolderName.length))}_setSelectionRange(t,o,i){t.setSelectionRange(o,i,t.selectionDirection||void 0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.zj))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,o){if(1&t&&e.Gf(y.Ac,5),2&t){let i;e.iGM(i=e.CRH())&&(o.formControl=i.first)}},standalone:!0,features:[e.jDz],decls:19,vars:21,consts:[["fd-dialog-title","","id","fdp-upload-collection-new-folder-title","fd-title","",1,"fd-title--bold"],["fd-form-item",""],["fd-form-label","","for","fdp-upload-collection-new-folder-input"],["fd-form-control","","fdkInitialFocus","","id","fdp-upload-collection-new-folder-input","type","text",3,"ngModel","placeholder","ngModelChange"],["formControl",""],["fd-object-status","","status","negative",3,"label",4,"ngIf"],["fdType","emphasized",3,"label","disabled","click"],[3,"label","click"],["fd-object-status","","status","negative",3,"label"]],template:function(t,o){1&t&&(e.TgZ(0,"fd-dialog")(1,"fd-dialog-header")(2,"h1",0),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA()(),e.TgZ(5,"fd-dialog-body")(6,"div",1)(7,"label",2),e._uU(8),e.ALo(9,"fdTranslate"),e.qZA(),e.TgZ(10,"input",3,4),e.NdJ("ngModelChange",function(a){return o._newFolderName=a}),e.ALo(12,"fdTranslate"),e.qZA(),e.YNc(13,ye,4,9,"span",5),e.qZA()(),e.TgZ(14,"fd-dialog-footer")(15,"fd-button-bar",6),e.NdJ("click",function(){return o.dialogRef.close(o._newFolderName)}),e.ALo(16,"fdTranslate"),e.qZA(),e.TgZ(17,"fd-button-bar",7),e.NdJ("click",function(){return o.dialogRef.dismiss()}),e.ALo(18,"fdTranslate"),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,8,"platformUploadCollection.newFolderTitle")," "),e.xp6(5),e.hij(" ",e.xi3(9,10,o._currentFolder?"platformUploadCollection.newFolderAtFolderInputLabel":"platformUploadCollection.newFolderAtRootInputLabel",e.VKq(19,Ue,(null==o._currentFolder?null:o._currentFolder.name)||"")),": "),e.xp6(2),e.Q6J("ngModel",o._newFolderName)("placeholder",e.lcZ(12,13,"platformUploadCollection.newFolderInputPlaceholder")),e.xp6(3),e.Q6J("ngIf",o._newFolderName.length>o._maxFilenameLength),e.xp6(2),e.Q6J("label",e.lcZ(16,15,"platformUploadCollection.newFolderDialogCreateBtnLabel"))("disabled",o._newFolderName.length>o._maxFilenameLength),e.xp6(2),e.Q6J("label",e.lcZ(18,17,"platformUploadCollection.newFolderDialogCancelBtnLabel")))},dependencies:[u.au,u.A6,K.r,u.q6,u.Hy,y.Jp,y.hr,U.u5,U.Fj,U.JJ,U.On,y.Ac,b.O5,X.kM,u.gx,v.N3,Y.ni],styles:[".fd-title--bold[_ngcontent-%COMP%]{font-weight:700}"]}),n})();function Fe(n,l){1&n&&(e.TgZ(0,"h1",12),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"platformUploadCollection.moveToTitle")," "))}function Se(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i._goToParentFolder())}),e.qZA(),e.TgZ(2,"h1",14)(3,"span"),e._uU(4),e.ALo(5,"fdTranslate"),e.qZA(),e._uU(6),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,2,"platformUploadCollection.moveToTitleFolder")),e.xp6(2),e.hij(" ",t._currentFolder.name," ")}}function Ae(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"fd-bar-element"),e.YNc(2,Fe,3,3,"h1",8),e.YNc(3,Se,7,4,"ng-container",9),e.qZA()(),e.TgZ(4,"div",10)(5,"fd-bar-element")(6,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._newFolder())}),e.ALo(7,"fdTranslate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t._currentFolder),e.xp6(1),e.Q6J("ngIf",t._currentFolder),e.xp6(3),e.Q6J("label",e.lcZ(7,3,"platformUploadCollection.moveToNewFolderBtnLabel"))}}function Ie(n,l){1&n&&(e.TgZ(0,"li",15)(1,"span",16),e._uU(2),e.ALo(3,"fdTranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"platformUploadCollection.moveToAllFilesSubHeaderLabel")))}function ve(n,l){1&n&&e._UZ(0,"i",21)}function we(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"li",17)(1,"a",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c._hasFolders(a.files)?c._openFolder(a):c._selectFolder(a))}),e._UZ(2,"fd-icon",19),e.TgZ(3,"span",16),e._uU(4),e.qZA(),e.YNc(5,ve,1,0,"i",20),e.qZA()()}if(2&n){const t=l.$implicit,o=e.oxw();e.Q6J("selected",(null==o.selectedFolder?null:o.selectedFolder.documentId)===t.documentId),e.xp6(4),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",o._hasFolders(t.files))}}let ee=(()=>{class n{constructor(t,o,i){this.dialogRef=t,this._dialogService=o,this._cd=i,this.items=this.dialogRef.data.items,this.originalFolder=this.dialogRef.data.currentFolder,this.movableFolders=this.dialogRef.data.movableFolders,this._maxFilenameLength=this.dialogRef.data.maxFilenameLength,this._currentFolder=this.originalFolder&&{...this.originalFolder},this._foldersList=[]}ngOnInit(){this._init(this._currentFolder?this._currentFolder.files:this.items)}_goToParentFolder(){this.selectedFolder=null,this._currentFolder=this._getParentFolderByCurrentFolderId(this._currentFolder?.documentId),this._init(this._currentFolder?this._currentFolder.files:this.items),this._cd.detectChanges()}_close(){this.dialogRef.dismiss()}_confirm(){this.dialogRef.close({selectedFolder:this.selectedFolder||this._currentFolder})}_openFolder(t){this.selectedFolder=null,this._currentFolder=t,this._init(t.files),this._cd.detectChanges()}_selectFolder(t){this.selectedFolder=t}_hasFolders(t){return t.some(o=>"folder"===o.type)}_newFolder(){this._dialogService.open(q,{responsivePadding:!0,backdropClickCloseable:!1,height:"350px",backdropClass:"fdp-upload-collection-dialig-no-bg",data:{currentFolder:this._currentFolder,maxFilenameLength:this._maxFilenameLength}}).afterClosed.pipe((0,h.q)(1)).subscribe(o=>{this.dialogRef.close({parentFolderId:this._currentFolder?.documentId,selectedFolder:null,folderName:o})})}_init(t){this._foldersList=t.filter(o=>"folder"===o.type&&!this.movableFolders?.some(i=>i.documentId===o.documentId))}_getParentFolderByCurrentFolderId(t){let o;return t&&JSON.stringify(this.items,(i,a)=>(!(0,I.Kn)(a)||"file"===a.type||!a.files||a.files.some(c=>c.documentId===t)&&(o=a),a)),o}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.zj),e.Y36(u.xA),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:14,vars:9,consts:[["fdkTemplate","header"],[1,"fd-dialog__body--no-horizontal-padding"],["fd-list",""],["fd-list-item","","class","fd-list__item--title-background",4,"ngIf"],["fd-list-item","",3,"selected",4,"ngFor","ngForOf"],["fdType","emphasized","type","submit",3,"disabled","click"],[3,"click"],["fd-bar-left",""],["class","fd-title--bold","fd-title","",4,"ngIf"],[4,"ngIf"],["fd-bar-right",""],["fd-button","",3,"label","click"],["fd-title","",1,"fd-title--bold"],["fd-button","","fdType","transparent","glyph","navigation-left-arrow",3,"click"],["fd-title",""],["fd-list-item","",1,"fd-list__item--title-background"],["fd-list-title",""],["fd-list-item","",3,"selected"],["fd-list-link","",3,"click"],["glyph","folder-blank",1,"fdp-upload-collection__fd-icon"],["fd-list-icon","","glyph","slim-arrow-right",4,"ngIf"],["fd-list-icon","","glyph","slim-arrow-right"]],template:function(t,o){1&t&&(e.TgZ(0,"fd-dialog")(1,"fd-dialog-header"),e.YNc(2,Ae,8,5,"ng-template",0),e.qZA(),e.TgZ(3,"fd-dialog-body",1)(4,"ul",2),e.YNc(5,Ie,4,3,"li",3),e.YNc(6,we,6,3,"li",4),e.qZA()(),e.TgZ(7,"fd-dialog-footer")(8,"fd-button-bar",5),e.NdJ("click",function(){return o._confirm()}),e._uU(9),e.ALo(10,"fdTranslate"),e.qZA(),e.TgZ(11,"fd-button-bar",6),e.NdJ("click",function(){return o._close()}),e._uU(12),e.ALo(13,"fdTranslate"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",!o._currentFolder),e.xp6(1),e.Q6J("ngForOf",o._foldersList),e.xp6(2),e.Q6J("disabled",!(o.selectedFolder&&(null==o.originalFolder?null:o.originalFolder.documentId)!==o.selectedFolder.documentId||!o.selectedFolder&&(null==o.originalFolder?null:o.originalFolder.documentId)!==(null==o._currentFolder?null:o._currentFolder.documentId))),e.xp6(1),e.hij(" ",e.lcZ(10,5,"platformUploadCollection.moveToConfirmBtn")," "),e.xp6(3),e.hij(" ",e.lcZ(13,7,"platformUploadCollection.moveToCloseBtn")," "))},dependencies:[u.au,u.A6,f.S3k,v.br,v.JW,b.O5,K.r,G.r0,v.Mq,u.Hy,w.ns,w.GB,w.XZ,b.ax,w.D8,V.IconComponent,w.EO,u.gx,v.N3,Y.ni],styles:[".fd-list__item--title-background[_ngcontent-%COMP%]{background-color:var(--sapList_HeaderBackground)}.fd-dialog__body--no-horizontal-padding[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.fd-title--bold[_ngcontent-%COMP%]{font-weight:700}"]}),n})();var te=d(65619),N=d(78645),g=d(99397),oe=d(54390),Ne=d(47741),Le=d(93802),Ee=d(27017),Ze=d(58567),Pe=d(62444),Me=d(20289),j=d(94716),D=d(35227),H=d(77935),De=d(13030),O=d(70014),L=d(71657);let ne=(()=>{class n{validation(t,{maxFileNameLength:o,fileTypes:i,maxFileSize:a,mimeTypes:c}){return t.reduce((s,r)=>{if(i&&i.length>0&&this._checkByFileExtension(r,i)||c&&c.length>0&&this._checkByMimeType(r,c))return s.typeMismatch||(s.typeMismatch=[]),s.typeMismatch.push(r),s;if(a){const C=(0,f.LWC)(a);if(r.size>C)return s.fileSizeExceed||(s.fileSizeExceed=[]),s.fileSizeExceed.push(r),s}return"number"==typeof o&&this._checkByFileNameLength(r,o)?(s.filenameLengthExceed||(s.filenameLengthExceed=[]),s.filenameLengthExceed.push(r),s):(s.validFiles||(s.validFiles=[]),s.validFiles.push(r),s)},{})}_checkByFileExtension(t,o){const i=t.name.split("."),a=i[i.length-1].toLocaleLowerCase();return!o.some(c=>c.replace(".","").toLowerCase()===a)}_checkByMimeType(t,o){return!o.some(i=>i.toLowerCase()===t.type)}_checkByFileNameLength(t,o){const i=t.name.split(".");return i.pop(),i.join(".").length>o}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n{constructor(t,o){this._elementRef=t,this._filesValidatorService=o,this.multiple=!0,this.fileTypes=[],this.mimeTypes=[],this.disabled=!1,this.dragndrop=!0,this.fileChanged=new e.vpe,this.cancel=new e.vpe,this.onDropzone=new e.vpe,this.dropzonePreviousState=null;const i=this._elementRef.nativeElement;this.elementSelector=i.id?`#${i.id}`:"",this.elementSelector+=i.className?`.${i.className.split(" ").join(".")}`:"",this.elementSelector||(this.elementSelector=`${i.localName}[fdpUploadCollectionDragnDrop]`)}onWindowDragover(t){if(!this.dragndrop||this.disabled)return;this._muteEvent(t);const o=!!(t.target instanceof HTMLElement&&t.target.closest(this.elementSelector));this.dropzonePreviousState!==o&&(this.dropzonePreviousState=o,this.onDropzone.emit(o))}onDragLeave(t){this.dragndrop&&!this.disabled&&([t.screenX,t.screenY,t.clientX,t.clientY,t.pageX,t.pageY].some(i=>i>0)||(this._muteEvent(t),this.dropzonePreviousState=null,this.cancel.emit()))}onDrop(t){if(!this.dragndrop||this.disabled||(this.dropzonePreviousState=null,this.cancel.emit(),!(t.target instanceof HTMLElement&&t.target.closest(this.elementSelector))))return;this._muteEvent(t);const a=Array.from(t.dataTransfer?.files??[]),c=this._filesValidatorService.validation(a,{maxFileSize:this.maxFileSize,maxFileNameLength:this.maxFilenameLength,fileTypes:this.fileTypes,mimeTypes:this.mimeTypes});this.fileChanged.emit(c)}_muteEvent(t){t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(ne))},n.\u0275dir=e.lG2({type:n,selectors:[["","fdpUploadCollectionDragnDrop",""]],hostBindings:function(t,o){1&t&&e.NdJ("dragover",function(a){return o.onWindowDragover(a)},!1,e.Jf7)("dragleave",function(a){return o.onDragLeave(a)},!1,e.Jf7)("drop",function(a){return o.onDrop(a)},!1,e.Jf7)},inputs:{multiple:"multiple",fileTypes:"fileTypes",maxFileSize:"maxFileSize",maxFilenameLength:"maxFilenameLength",mimeTypes:"mimeTypes",disabled:"disabled",dragndrop:"dragndrop"},outputs:{fileChanged:"fileChanged",cancel:"cancel",onDropzone:"onDropzone"},standalone:!0}),n})();var x=function(n){return n.LOADING="loading",n.SUCCESSFUL="successful",n.UNSUCCESSFUL="unsuccessful",n}(x||{}),_=function(n){return n.WARNING="warning",n.SUCCESS="success",n.INFORMATION="information",n.ERROR="error",n}(_||{}),m=function(n){return n[n.CREATE=0]="CREATE",n[n.REMOVE=1]="REMOVE",n[n.MOVE=2]="MOVE",n[n.UPDATE_VERSION=3]="UPDATE_VERSION",n[n.FILE_RENAME=4]="FILE_RENAME",n[n.TYPE_MISMATCH=5]="TYPE_MISMATCH",n[n.FILE_NAME_LENGTH=6]="FILE_NAME_LENGTH",n[n.FILE_SIZE=7]="FILE_SIZE",n}(m||{});class le{constructor(l,t){this.source=l,this.payload=t}}class ke{constructor(l,t){this.source=l,this.payload=t}}class Be{constructor(l,t){this.source=l,this.payload=t}}const Qe=["fileInput"],ze=["updateVersionInput"],Ye=function(n,l,t,o){return{messageType:n,payload:l,messageStripType:t,count:o}};function qe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"fd-message-strip",35),e.NdJ("onDismiss",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._messageStripDismiss())}),e.GkF(1,36),e.qZA()}if(2&n){const t=e.oxw(),o=e.MAs(44);e.Q6J("type",t._message.messageStripType),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.l5B(3,Ye,t._message.messageType,t._message.payload,t._message.messageStripType,t._message.count))}}function je(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"a",37),e.NdJ("click",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a._breadcrumbGoTo(i))}),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"platformUploadCollection.breadcrumbLabelAllFiles")," "))}const He=function(n){return{total:n}};function $e(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.breadcrumbLabelAllFilesWithTotal",e.VKq(4,He,t._totalItems))," ")}}function We(n,l){1&n&&e.GkF(0)}function Ge(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"a",37),e.NdJ("click",function(i){e.CHM(t);const a=e.oxw().index,c=e.oxw();return e.KtG(c._breadcrumbGoTo(i,a))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.folderName)}}function Ve(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.AsE("",t.folderName," (",o._totalItems,")")}}function Ke(n,l){1&n&&e.GkF(0)}function Xe(n,l){if(1&n&&(e.TgZ(0,"fd-breadcrumb-item"),e.YNc(1,Ge,2,1,"ng-template",null,38,e.W1O),e.YNc(3,Ve,2,2,"ng-template",null,39,e.W1O),e.YNc(5,Ke,1,0,"ng-container",6),e.qZA()),2&n){const t=l.$implicit,o=e.MAs(2),i=e.MAs(4);e.xp6(5),e.Q6J("ngTemplateOutlet",t.clikable?o:i)}}function et(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"fd-input-group",41),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a._searchText=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i._searchInputChanged())}),e.ALo(1,"fdTranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t._searchText)("ariaLabelledBy",t.id+"-breadcrumb")("placeholder",e.lcZ(1,3,"platformUploadCollection.searchPlaceholder"))}}function tt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i._openNewFolderDialog())}),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("disabled",t.disabled)("label",e.lcZ(1,3,"platformUploadCollection.newFolderBtnLabel"))("title",e.lcZ(2,5,"platformUploadCollection.newFolderBtnLabel"))}}function ot(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i._openUploadFiles())}),e.ALo(2,"fdTranslate"),e.ALo(3,"fdTranslate"),e.qZA(),e.YNc(4,tt,3,7,"button",43),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.disabled)("label",e.lcZ(2,4,"platformUploadCollection.addBtnLabel"))("title",e.lcZ(3,6,"platformUploadCollection.addBtnLabel")),e.xp6(3),e.Q6J("ngIf",t.hierarchy)}}function nt(n,l){if(1&n&&(e.ynx(0),e.YNc(1,et,2,5,"fd-input-group",40),e.YNc(2,ot,5,8,"ng-container",8),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showSearch),e.xp6(1),e.Q6J("ngIf",!t.readonly)}}function lt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i._downloadClicked(!0))}),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.disabled)("label",e.lcZ(1,3,"platformUploadCollection.downloadBtnLabel"))("title",e.lcZ(2,5,"platformUploadCollection.downloadBtnLabel"))}}function it(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._moveToClicked(!0))}),e.ALo(2,"fdTranslate"),e.ALo(3,"fdTranslate"),e.qZA(),e.YNc(4,lt,3,7,"button",45),e.TgZ(5,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._remove(!0))}),e.ALo(6,"fdTranslate"),e.ALo(7,"fdTranslate"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.disabled)("label",e.lcZ(2,7,"platformUploadCollection.moveToBtnLabel"))("title",e.lcZ(3,9,"platformUploadCollection.moveToBtnLabel")),e.xp6(3),e.Q6J("ngIf",t._showIfSelectedOnlyFiles()),e.xp6(1),e.Q6J("disabled",t.disabled)("label",e.lcZ(6,11,"platformUploadCollection.removeBtnLabel"))("title",e.lcZ(7,13,"platformUploadCollection.removeBtnLabel"))}}function at(n,l){1&n&&(e._UZ(0,"fd-icon",20),e.ALo(1,"fdTranslate")),2&n&&e.Q6J("title",e.lcZ(1,1,"platformUploadCollection.folderIconTitle"))}function ct(n,l){if(1&n&&(e._UZ(0,"fd-icon",60),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.Q6J("glyph",o._getIconByType(t))("title",e.lcZ(1,2,"platformUploadCollection.fileIconTitle"))}}function st(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a._openFolder(i))}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.ekj("fdp-upload-collection__cursor","folder"===t.type),e.xp6(1),e.Oqu(t.name)}}const dt=function(){return[]};function rt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",62)(1,"fd-form-input-message-group",63)(2,"div",55)(3,"input",64),e.NdJ("blur",function(i){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c._fileNameChange(i,a))})("input",function(i){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c._checkName(i,a))}),e.ALo(4,"fdTranslate"),e.qZA(),e.TgZ(5,"span",65),e._uU(6),e.qZA()(),e.TgZ(7,"fd-form-message",66),e._uU(8),e.ALo(9,"fdTranslate"),e.qZA()()()}if(2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("triggers",e.DdM(12,dt))("isOpen",!!t.sameFilenameState),e.xp6(2),e.Q6J("value",o._getItemName(t))("placeholder",e.lcZ(4,8,"platformUploadCollection.editFileNameInputPlaceholder"))("state",t.sameFilenameState),e.xp6(3),e.Oqu(o._getItemExtension(t)),e.xp6(1),e.Q6J("type",t.sameFilenameState),e.xp6(1),e.hij(" ",e.lcZ(9,10,"file"===t.type?"platformUploadCollection.editFileNameFileAlreadyExistsError":"platformUploadCollection.editFileNameFolderAlreadyExistsError")," ")}}function pt(n,l){if(1&n&&(e.TgZ(0,"fdp-table-cell")(1,"div",55),e.YNc(2,at,2,3,"fd-icon",56),e.YNc(3,ct,2,4,"fd-icon",57),e.YNc(4,st,3,3,"ng-container",58),e.qZA(),e.YNc(5,rt,10,13,"ng-template",null,59,e.W1O),e.qZA()),2&n){const t=l.$implicit,o=e.MAs(6),i=e.oxw(2);e.xp6(2),e.Q6J("ngIf","folder"===t.type),e.xp6(1),e.Q6J("ngIf","file"===t.type),e.xp6(1),e.Q6J("ngIf",i.disabled||i.readonly||!i._isSelectedItem(t))("ngIfElse",o)}}function _t(n,l){if(1&n&&(e.TgZ(0,"fdp-table-cell"),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Oqu(t.uploadedBy.name)}}function mt(n,l){if(1&n&&(e.TgZ(0,"fdp-table-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.uploadedOn,"shortDate"))}}function ft(n,l){if(1&n&&(e.TgZ(0,"fdp-table-cell"),e._uU(1),e.ALo(2,"convertBytes"),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.fileSize))}}function ut(n,l){if(1&n&&(e.TgZ(0,"fdp-table-cell"),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Oqu(t.version||"")}}function gt(n,l){1&n&&e._UZ(0,"fd-busy-indicator",70),2&n&&e.Q6J("loading",!0)}function ht(n,l){1&n&&(e.TgZ(0,"span",71),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"platformUploadCollection.itemStatusSuccessful")," "))}function Ct(n,l){1&n&&(e.TgZ(0,"span",72),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"platformUploadCollection.itemStatusUnsuccessful")," "))}function xt(n,l){if(1&n&&(e.TgZ(0,"fdp-table-cell"),e.YNc(1,gt,1,1,"fd-busy-indicator",67),e.YNc(2,ht,3,3,"span",68),e.YNc(3,Ct,3,3,"span",69),e.qZA()),2&n){const t=l.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.status===o._uploadCollectionItemStatus.LOADING),e.xp6(1),e.Q6J("ngIf",t.status===o._uploadCollectionItemStatus.SUCCESSFUL),e.xp6(1),e.Q6J("ngIf",t.status===o._uploadCollectionItemStatus.UNSUCCESSFUL)}}function Tt(n,l){1&n&&(e.TgZ(0,"fdp-table-header"),e._uU(1,"Action"),e.qZA())}function bt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a._runUploadNewFileAfterFail(i))}),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("label",e.lcZ(1,3,"platformUploadCollection.uploadNewFileAfterFailAction"))("title",e.lcZ(2,5,"platformUploadCollection.uploadNewFileAfterFailAction"))("disabled",t.disabled)}}function yt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a._cancelUploadNewFile(i))}),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("label",e.lcZ(1,3,"platformUploadCollection.cancelUploadNewFileAction"))("title",e.lcZ(2,5,"platformUploadCollection.cancelUploadNewFileAction"))("disabled",t.disabled)}}function Ut(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"fdp-table-cell")(1,"div",75)(2,"div",76),e.YNc(3,bt,3,7,"button",77),e.YNc(4,yt,3,7,"button",77),e.qZA(),e.TgZ(5,"fdp-menu-button",78),e.NdJ("buttonClicked",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c._actionButton(a))}),e.ALo(6,"fdTranslate"),e.qZA()()()}if(2&n){const t=l.$implicit,o=e.oxw(3),i=e.MAs(25);e.xp6(3),e.Q6J("ngIf",t.status===o._uploadCollectionItemStatus.UNSUCCESSFUL),e.xp6(1),e.Q6J("ngIf",o.terminationEnabled&&t.status===o._uploadCollectionItemStatus.LOADING),e.xp6(1),e.Q6J("disabled",o.disabled)("title",e.lcZ(6,5,"platformUploadCollection.itemMenuBtnTitle"))("fdpMenuTriggerFor",i)}}function Ft(n,l){1&n&&(e.TgZ(0,"fdp-column",73),e.YNc(1,Tt,2,0,"fdp-table-header",74),e.YNc(2,Ut,7,7,"fdp-table-cell",48),e.qZA())}function St(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"fdp-table",46),e.NdJ("rowSelectionChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a._onRowSelectionChange(i))}),e.TgZ(1,"fdp-column",47),e.YNc(2,pt,7,4,"fdp-table-cell",48),e.qZA(),e.TgZ(3,"fdp-column",49),e.YNc(4,_t,2,1,"fdp-table-cell",48),e.qZA(),e.TgZ(5,"fdp-column",50),e.YNc(6,mt,3,4,"fdp-table-cell",48),e.qZA(),e.TgZ(7,"fdp-column",51),e.YNc(8,ft,3,3,"fdp-table-cell",48),e.qZA(),e.TgZ(9,"fdp-column",52),e.YNc(10,ut,2,1,"fdp-table-cell",48),e.qZA(),e.TgZ(11,"fdp-column",53),e.YNc(12,xt,4,3,"fdp-table-cell",48),e.qZA(),e.YNc(13,Ft,3,0,"fdp-column",54),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("dataSource",t._visibleList$)("loading",t.dataSource.isDataLoading)("noHorizontalBorders",!0)("trackBy",t._trackByDocumentId),e.xp6(13),e.Q6J("ngIf",!t.readonly)}}function At(n,l){if(1&n&&(e.TgZ(0,"div",80),e._UZ(1,"fd-icon",81),e.TgZ(2,"p",82),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA()()),2&n){const t=e.oxw();e.ekj("active",t._onDragDropArea),e.xp6(3),e.hij(" ",e.lcZ(4,3,"platformUploadCollection.dragDropAreaText")," ")}}function It(n,l){if(1&n&&(e.TgZ(0,"div",83),e._UZ(1,"fd-icon",84),e.TgZ(2,"h3"),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"fdTranslate"),e.qZA()()),2&n){const t=e.oxw();e.ekj("invisible",t._showDragDropArea),e.xp6(3),e.Oqu(e.lcZ(4,4,"platformUploadCollection.noDataText")),e.xp6(3),e.Oqu(e.lcZ(7,6,"platformUploadCollection.noDataDescription"))}}function vt(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t._itemsPerPage)}}function wt(n,l){if(1&n&&e._UZ(0,"fdp-menu-button",92),2&n){const t=e.oxw(2),o=e.MAs(22);e.Q6J("ariaLabelledBy",t.id+"-results")("fdpMenuTriggerFor",o)("label",t._itemsPerPage+"")}}const Nt=function(n,l,t){return{from:n,to:l,total:t}};function Lt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",85)(1,"div",86)(2,"span",87),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA(),e.TgZ(5,"fd-pagination",88),e.NdJ("pageChangeStart",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a._pageChanged(i))}),e.qZA()(),e.TgZ(6,"div",89)(7,"span",90)(8,"span",3),e._uU(9),e.ALo(10,"fdTranslate"),e.qZA(),e.YNc(11,vt,2,1,"span",8),e.qZA(),e.YNc(12,wt,1,3,"fdp-menu-button",91),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("id",t.id+"-pagination"),e.xp6(1),e.hij(" ",e.xi3(4,11,"platformUploadCollection.paginationTotal",e.kEZ(16,Nt,t._countShowedItems,t._countNotShowedItems,t._totalItems))," "),e.xp6(2),e.Q6J("totalItems",t._totalItems)("displayTotalItems",!1)("itemsPerPage",t._itemsPerPage)("currentPage",t._currentPage),e.uIk("aria-labelledby",t.id+"-pagination"),e.xp6(3),e.Q6J("id",t.id+"-results"),e.xp6(1),e.hij(" ",e.lcZ(10,14,"platformUploadCollection.resultsPerPage")," "),e.xp6(2),e.Q6J("ngIf",0===t._itemsPerPageOptions.length),e.xp6(1),e.Q6J("ngIf",t._itemsPerPageOptions.length>0)}}function Et(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"fdp-menu-item",19),e.NdJ("itemSelect",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c._itemsPerPageChange(a.label))}),e.TgZ(1,"span"),e._uU(2),e.qZA()()}if(2&n){const t=l.$implicit;e.uIk("title","Results per page: "+t.label),e.xp6(2),e.Oqu(t.label)}}function Zt(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"fdp-menu-item",19),e.NdJ("itemSelect",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._downloadClicked())}),e._UZ(2,"fd-icon",93),e.ALo(3,"fdTranslate"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"fdTranslate"),e.qZA()(),e.TgZ(7,"fdp-menu-item",19),e.NdJ("itemSelect",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._openUpdateFileVersion())}),e._UZ(8,"fd-icon",94),e.ALo(9,"fdTranslate"),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"fdTranslate"),e.qZA()(),e.BQk()}2&n&&(e.xp6(2),e.Q6J("title",e.lcZ(3,4,"platformUploadCollection.downloadBtnLabel")),e.xp6(3),e.hij(" ",e.lcZ(6,6,"platformUploadCollection.downloadBtnLabel")," "),e.xp6(3),e.Q6J("title",e.lcZ(9,8,"platformUploadCollection.updateVersionBtnLabel")),e.xp6(3),e.hij(" ",e.lcZ(12,10,"platformUploadCollection.updateVersionBtnLabel")," "))}const $=function(n,l){return{messageStripType:n,payload:l}};function Pt(n,l){if(1&n&&e.GkF(0,36),2&n){const t=e.oxw(3),o=e.MAs(46);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(2,$,t._message.messageStripType,t._message.payload))}}function Mt(n,l){if(1&n&&e.GkF(0,36),2&n){const t=e.oxw(3),o=e.MAs(48);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(2,$,t._message.messageStripType,t._message.payload))}}function Dt(n,l){if(1&n&&e.GkF(0,36),2&n){const t=e.oxw(3),o=e.MAs(50);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(2,$,t._message.messageStripType,t._message.payload))}}const E=function(n,l,t){return{payload:n,messageStripType:l,count:t}};function Ot(n,l){if(1&n&&e.GkF(0,36),2&n){const t=e.oxw(3),o=e.MAs(52);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.kEZ(2,E,t._message.payload,t._message.messageStripType,t._message.count))}}function Rt(n,l){if(1&n&&e.GkF(0,36),2&n){const t=e.oxw(3),o=e.MAs(54);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.kEZ(2,E,t._message.payload,t._message.messageStripType,t._message.count))}}function Jt(n,l){if(1&n&&e.GkF(0,36),2&n){const t=e.oxw(3),o=e.MAs(56);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.kEZ(2,E,t._message.payload,t._message.messageStripType,t._message.count))}}function kt(n,l){if(1&n&&e.GkF(0,36),2&n){const t=e.oxw(3),o=e.MAs(58);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.kEZ(2,E,t._message.payload,t._message.messageStripType,t._message.count))}}function Bt(n,l){if(1&n&&e.GkF(0,36),2&n){const t=e.oxw(3),o=e.MAs(60);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.kEZ(2,E,t._message.payload,t._message.messageStripType,t._message.count))}}function Qt(n,l){if(1&n&&(e.ynx(0,96),e.YNc(1,Pt,1,5,"ng-container",97),e.YNc(2,Mt,1,5,"ng-container",97),e.YNc(3,Dt,1,5,"ng-container",97),e.YNc(4,Ot,1,6,"ng-container",97),e.YNc(5,Rt,1,6,"ng-container",97),e.YNc(6,Jt,1,6,"ng-container",97),e.YNc(7,kt,1,6,"ng-container",97),e.YNc(8,Bt,1,6,"ng-container",97),e.BQk()),2&n){const t=e.oxw().messageType,o=e.oxw();e.Q6J("ngSwitch",t),e.xp6(1),e.Q6J("ngSwitchCase",o._messageType.CREATE),e.xp6(1),e.Q6J("ngSwitchCase",o._messageType.UPDATE_VERSION),e.xp6(1),e.Q6J("ngSwitchCase",o._messageType.FILE_RENAME),e.xp6(1),e.Q6J("ngSwitchCase",o._messageType.REMOVE),e.xp6(1),e.Q6J("ngSwitchCase",o._messageType.MOVE),e.xp6(1),e.Q6J("ngSwitchCase",o._messageType.TYPE_MISMATCH),e.xp6(1),e.Q6J("ngSwitchCase",o._messageType.FILE_SIZE),e.xp6(1),e.Q6J("ngSwitchCase",o._messageType.FILE_NAME_LENGTH)}}function zt(n,l){if(1&n&&e.YNc(0,Qt,9,9,"ng-container",95),2&n){const t=e.oxw();e.Q6J("ngIf",t._message)}}const R=function(n){return{folderName:n}};function Yt(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageCreateFailed",e.VKq(4,R,t.folder.name))," ")}}function qt(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw().payload;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageCreateSuccess",e.VKq(4,R,t.folder.name))," ")}}function jt(n,l){if(1&n&&(e.YNc(0,Yt,3,6,"ng-container",58),e.YNc(1,qt,2,6,"ng-template",null,98,e.W1O)),2&n){const t=l.messageStripType,o=e.MAs(2);e.Q6J("ngIf","error"===t)("ngIfElse",o)}}function Ht(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageUpdateVersionFailed",e.VKq(4,R,t.item.name))," ")}}function $t(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw().payload;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageUpdateVersionSuccess",e.VKq(4,R,t.item.name))," ")}}function Wt(n,l){if(1&n&&(e.YNc(0,Ht,3,6,"ng-container",58),e.YNc(1,$t,2,6,"ng-template",null,99,e.W1O)),2&n){const t=l.messageStripType,o=e.MAs(2);e.Q6J("ngIf","error"===t)("ngIfElse",o)}}const ie=function(n,l){return{from:n,to:l}};function Gt(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileRenameFailed",e.WLB(4,ie,t.item.name,t.fileName))," ")}}function Vt(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw().payload;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageFileRenameSuccess",e.WLB(4,ie,t.item.name,t.fileName))," ")}}function Kt(n,l){if(1&n&&(e.YNc(0,Gt,3,7,"ng-container",58),e.YNc(1,Vt,2,7,"ng-template",null,100,e.W1O)),2&n){const t=l.messageStripType,o=e.MAs(2);e.Q6J("ngIf","error"===t)("ngIfElse",o)}}const ae=function(n,l){return{foldersCount:n,filesCount:l}};function Xt(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw(2).count;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageRemoveFoldersAndFilesFailed",e.WLB(4,ae,t.folder,t.file))," ")}}function eo(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw(2).count;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageRemoveFoldersAndFilesSuccess",e.WLB(4,ae,t.folder,t.file))," ")}}function to(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Xt,3,7,"ng-container",58),e.YNc(2,eo,2,7,"ng-template",null,101,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===o)("ngIfElse",t)}}const ce=function(n){return{foldersCount:n}};function oo(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw(2).count;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageRemoveFoldersFailed",e.VKq(4,ce,t.folder))," ")}}function no(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw(2).count;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageRemoveFoldersSuccess",e.VKq(4,ce,t.folder))," ")}}function lo(n,l){if(1&n&&(e.ynx(0),e.YNc(1,oo,3,6,"ng-container",58),e.YNc(2,no,2,6,"ng-template",null,102,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===o)("ngIfElse",t)}}const se=function(n){return{filesCount:n}};function io(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw(2).count;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageRemoveFilesFailed",e.VKq(4,se,t.file))," ")}}function ao(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw(2).count;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageRemoveFilesSuccess",e.VKq(4,se,t.file))," ")}}function co(n,l){if(1&n&&(e.ynx(0),e.YNc(1,io,3,6,"ng-container",58),e.YNc(2,ao,2,6,"ng-template",null,103,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===o)("ngIfElse",t)}}const de=function(n){return{name:n}};function so(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw(2).payload;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageRemoveFileOrFolderFailed",e.VKq(4,de,t.items[0].name))," ")}}function ro(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw(2).payload;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageRemoveFileOrFolderSuccess",e.VKq(4,de,t.items[0].name))," ")}}function po(n,l){if(1&n&&(e.ynx(0),e.YNc(1,so,3,6,"ng-container",58),e.YNc(2,ro,2,6,"ng-template",null,104,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===o)("ngIfElse",t)}}function _o(n,l){if(1&n&&(e.YNc(0,to,4,2,"ng-container",8),e.YNc(1,lo,4,2,"ng-container",8),e.YNc(2,co,4,2,"ng-container",8),e.YNc(3,po,4,2,"ng-container",8)),2&n){const t=l.payload,o=l.count;e.Q6J("ngIf",t.items.length>1&&o.folder&&o.file),e.xp6(1),e.Q6J("ngIf",t.items.length>1&&o.folder&&!o.file),e.xp6(1),e.Q6J("ngIf",t.items.length>1&&o.file&&!o.folder),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}const re=function(n,l,t){return{foldersCount:n,filesCount:l,to:t}};function mo(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw(2),o=t.payload,i=t.count;e.xp6(1),e.hij(" ",e.xi3(2,1,o.to?"platformUploadCollection.messageMoveFoldersAndFilesFailed":"platformUploadCollection.messageMoveRootFoldersAndFilesFailed",e.kEZ(4,re,i.folder,i.file,null==o.to?null:o.to.name))," ")}}function fo(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw(2),o=t.payload,i=t.count;e.hij(" ",e.xi3(1,1,o.to?"platformUploadCollection.messageMoveFoldersAndFilesSuccess":"platformUploadCollection.messageMoveRootFoldersAndFilesSuccess",e.kEZ(4,re,i.folder,i.file,null==o.to?null:o.to.name))," ")}}function uo(n,l){if(1&n&&(e.ynx(0),e.YNc(1,mo,3,8,"ng-container",58),e.YNc(2,fo,2,8,"ng-template",null,105,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===o)("ngIfElse",t)}}const pe=function(n,l){return{foldersCount:n,to:l}};function go(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw(2),o=t.payload,i=t.count;e.xp6(1),e.hij(" ",e.xi3(2,1,o.to?"platformUploadCollection.messageMoveFoldersFailed":"platformUploadCollection.messageMoveRootFoldersFailed",e.WLB(4,pe,i.folder,null==o.to?null:o.to.name))," ")}}function ho(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw(2),o=t.payload;e.hij(" ",e.xi3(1,1,o.to?"platformUploadCollection.messageMoveFoldersSuccess":"platformUploadCollection.messageMoveRootFoldersSuccess",e.WLB(4,pe,t.count.folder,null==o.to?null:o.to.name))," ")}}function Co(n,l){if(1&n&&(e.ynx(0),e.YNc(1,go,3,7,"ng-container",58),e.YNc(2,ho,2,7,"ng-template",null,106,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===o)("ngIfElse",t)}}const _e=function(n,l){return{filesCount:n,to:l}};function xo(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw(2),o=t.payload,i=t.count;e.xp6(1),e.hij(" ",e.xi3(2,1,o.to?"platformUploadCollection.messageMoveFilesFailed":"platformUploadCollection.messageMoveRootFilesFailed",e.WLB(4,_e,i.file,null==o.to?null:o.to.name))," ")}}function To(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw(2),o=t.payload;e.hij(" ",e.xi3(1,1,o.to?"platformUploadCollection.messageMoveFilesSuccess":"platformUploadCollection.messageMoveRootFilesSuccess",e.WLB(4,_e,t.count.file,null==o.to?null:o.to.name))," ")}}function bo(n,l){if(1&n&&(e.ynx(0),e.YNc(1,xo,3,7,"ng-container",58),e.YNc(2,To,2,7,"ng-template",null,107,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===o)("ngIfElse",t)}}const me=function(n,l){return{name:n,to:l}};function yo(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw(2).payload;e.xp6(1),e.hij(" ",e.xi3(2,1,t.to?"platformUploadCollection.messageMoveFileOrFolderFailed":"platformUploadCollection.messageMoveRootFileOrFolderFailed",e.WLB(4,me,t.items[0].name,null==t.to?null:t.to.name))," ")}}function Uo(n,l){if(1&n&&(e._uU(0),e.ALo(1,"fdTranslate")),2&n){const t=e.oxw(2).payload;e.hij(" ",e.xi3(1,1,t.to?"platformUploadCollection.messageMoveFileOrFolderSuccess":"platformUploadCollection.messageMoveRootFileOrFolderSuccess",e.WLB(4,me,t.items[0].name,null==t.to?null:t.to.name))," ")}}function Fo(n,l){if(1&n&&(e.ynx(0),e.YNc(1,yo,3,7,"ng-container",58),e.YNc(2,Uo,2,7,"ng-template",null,108,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===o)("ngIfElse",t)}}function So(n,l){if(1&n&&(e.YNc(0,uo,4,2,"ng-container",8),e.YNc(1,Co,4,2,"ng-container",8),e.YNc(2,bo,4,2,"ng-container",8),e.YNc(3,Fo,4,2,"ng-container",8)),2&n){const t=l.payload,o=l.count;e.Q6J("ngIf",t.items.length>1&&o.folder&&o.file),e.xp6(1),e.Q6J("ngIf",t.items.length>1&&o.folder&&!o.file),e.xp6(1),e.Q6J("ngIf",t.items.length>1&&o.file&&!o.folder),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}const Ao=function(n,l){return{filesCount:n,allowedTypes:l}};function Io(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload,o=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileTypeMismatchPlural",e.WLB(4,Ao,t.items.length,o._getAllowedTypes()))," ")}}const vo=function(n,l){return{fileName:n,allowedTypes:l}};function wo(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload,o=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileTypeMismatchSingular",e.WLB(4,vo,t.items[0].name,o._getAllowedTypes()))," ")}}function No(n,l){if(1&n&&(e.YNc(0,Io,3,7,"ng-container",8),e.YNc(1,wo,3,7,"ng-container",8)),2&n){const t=l.payload;e.Q6J("ngIf",t.items.length>1),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}const Lo=function(n,l){return{filesCount:n,maxFileSize:l}};function Eo(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload,o=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileSizeExceededPlural",e.WLB(4,Lo,t.items.length,o.maxFileSize||0))," ")}}const Zo=function(n,l){return{fileName:n,maxFileSize:l}};function Po(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload,o=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileSizeExceededSingular",e.WLB(4,Zo,t.items[0].name,o.maxFileSize||0))," ")}}function Mo(n,l){if(1&n&&(e.YNc(0,Eo,3,7,"ng-container",8),e.YNc(1,Po,3,7,"ng-container",8)),2&n){const t=l.payload;e.Q6J("ngIf",t.items.length>1),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}const Do=function(n,l){return{filesCount:n,maxFilenameLength:l}};function Oo(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload,o=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileNameLengthExceededPlural",e.WLB(4,Do,t.items.length,o.maxFilenameLength||0))," ")}}const Ro=function(n,l){return{fileName:n,maxFilenameLength:l}};function Jo(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&n){const t=e.oxw().payload,o=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileNameLengthExceededSingular",e.WLB(4,Ro,t.items[0].name,o.maxFilenameLength||0))," ")}}function ko(n,l){if(1&n&&(e.YNc(0,Oo,3,7,"ng-container",8),e.YNc(1,Jo,3,7,"ng-container",8)),2&n){const t=l.payload;e.Q6J("ngIf",t.items.length>1),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}let Bo=0,Z=(()=>{class n{set itemsPerPage(t){if("number"==typeof t)return this._itemsPerPage=t,void this._match();const o=t.find(i=>i.default);if(this._itemsPerPageOptions=t,o)return this._itemsPerPage=o.label,void this._match();this._itemsPerPage=t[Math.round(t.length/2)].label,this._match()}get itemsPerPage(){return this._itemsPerPage}set dataSource(t){t&&this._initializeDS(t)}get dataSource(){return this._dataSource}constructor(t,o,i,a){this._dialogService=t,this._filesValidatorService=o,this._cdr=i,this._injector=a,this.id="fdp-upload-collection-id-"+Bo++,this.fileTypes=[],this.mimeTypes=[],this.disabled=!1,this.readonly=!1,this.hierarchy=!0,this.enablePagination=!0,this.terminationEnabled=!0,this.multiple=!0,this.showSearch=!0,this.sameFileNameAllowed=!1,this.typeMismatch=new e.vpe,this.filenameLengthExceed=new e.vpe,this.fileSizeExceed=new e.vpe,this._uploadCollectionItemStatus=x,this._breadcrumbList=[],this._currentPage=1,this._itemsPerPage=10,this._itemsPerPageOptions=[],this._totalItems=0,this._countShowedItems=0,this._countNotShowedItems=0,this._visibleList$=new te.X([]),this.selectedItems=[],this._searchText="",this._showDragDropArea=!1,this._onDragDropArea=!1,this._messageType=m,this._messageStripType=_,this._columnAlign=O.Hg,this._selectionMode=O.oW,this._contentDensityManuallySet=!1,this._imageExtensions=[".apng",".bmp",".gif",".ico",".cur",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg",".tif",".tiff",".webp",".flif",".cr2",".jxr",".psd",".bpg",".jp2",".jpm",".jpx",".heic",".dcm"],this._onDestroy$=new N.x,(0,D.O4K)("The Upload Collection component is deprecated and will be removed in next release.")}ngOnChanges(t){t.contentDensity&&(this._contentDensityManuallySet=!0)}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete(),this._dsSubscription?.unsubscribe(),this.dataSource.close()}showMessage(t,o){this._message=function Je(n,l){const t={messageType:n,messageStripType:l.type,payload:l.payload},o=l.payload.items;return o&&o.length>0&&(t.count=function Re(n){return n.reduce((l,t)=>(l[t.type]+=1,l),{file:0,folder:0})}(o)),t}(t,o)}_fileNameChange(t,o){const a=t.target.value.trim(),c="file"===o.type?`${a}.${o.name.split(".").pop()}`:a;if(o.name===c)return;if(this.maxFilenameLength&&a.length>this.maxFilenameLength){const C={items:[{...o,name:c}]},A=new le(this,C);return this.showMessage(m.FILE_NAME_LENGTH,{payload:C,type:_.ERROR}),void this.filenameLengthExceed.emit(A)}if(o.sameFilenameState)return;const s={parentFolderId:this._getCurrentFolderId(),fileName:c,item:{...o}};this.dataSource.fileRenamed(s).pipe((0,g.b)(()=>{this.selectedItems=[],this._match()})).subscribe({next:()=>{this.showMessage(m.FILE_RENAME,{payload:s,type:_.SUCCESS})},error:()=>{this.showMessage(m.FILE_RENAME,{payload:s,type:_.ERROR})}})}_checkName(t,o){const a=t.target.value.trim(),c="file"===o.type?`${a}.${o.name.split(".").pop()}`:a,s=this._getList().some(r=>o.documentId!==r.documentId&&r.name===c);this.sameFileNameAllowed||!s?delete o.sameFilenameState:o.sameFilenameState="error"}_openUploadFiles(){const t=this._uploadFilesRef.nativeElement;t&&t.click()}_openUpdateFileVersion(){if(this.disabled)return;const t=this._updateVersionRef.nativeElement;t&&(this._currentUpdateFileVersion=this._activeItem,t.click())}_selectHandler(t){this._validateFiles(t),this._propagateFiles()}_handleDrop(t){this._validatedFiles=t,this._propagateFiles()}_openNewFolderDialog(){this._dialogService.open(q,{responsivePadding:!0,backdropClickCloseable:!1,height:"320px",data:{currentFolder:this._getCurrentFolder(),maxFilenameLength:this.maxFilenameLength}}).afterClosed.pipe((0,h.q)(1)).subscribe(o=>{const i=this._generateTemporaryNewFolder(o),a=this._getCurrentFolderId(),c={parentFolderId:a,folder:{...i}};this._findParentFolderAndAddTemporaryFiles(a,[i]),this.dataSource.newFolder(c).pipe((0,g.b)(()=>this._match())).subscribe({next:()=>{this.showMessage(m.CREATE,{payload:c,type:_.SUCCESS})},error:()=>{this.showMessage(m.CREATE,{payload:c,type:_.ERROR})}})})}_moveToClicked(t){if(this.disabled)return;const o=this._activeItem,i=this._getCurrentFolder(),a=t?this.selectedItems:o?[o]:[];this._dialogService.open(ee,{responsivePadding:!0,verticalPadding:!1,backdropClickCloseable:!1,height:"350px",data:{items:this.dataSource.dataProvider.items,currentFolder:i,movableFolders:a.filter(s=>"folder"===s?.type),maxFilenameLength:this.maxFilenameLength}},this._injector).afterClosed.pipe((0,h.q)(1)).subscribe(({selectedFolder:s,parentFolderId:r,folderName:C})=>{const A={from:i,to:s,items:a};C&&(A.newFolder={parentFolderId:r,folderName:C}),this.dataSource.moveTo(A).pipe((0,g.b)(()=>{this.selectedItems=[],this._match()})).subscribe({next:()=>{this.showMessage(m.MOVE,{payload:A,type:_.SUCCESS})},error:()=>{this.showMessage(m.MOVE,{payload:A,type:_.ERROR})}})},s=>{console.error(s)})}_downloadClicked(t){if(this.disabled)return;const o={...this._activeItem};this.dataSource.download({items:t?this.selectedItems:[o]}).subscribe()}_remove(t){if(this.disabled)return;const o={...this._activeItem},i=t?this.selectedItems:[o],a={parentFolderId:this._getCurrentFolderId(),items:i};this.dataSource.delete(a).pipe((0,g.b)(()=>{this.selectedItems=[],this._match()})).subscribe({next:()=>{this.showMessage(m.REMOVE,{payload:a,type:_.SUCCESS})},error:()=>{this.showMessage(m.REMOVE,{payload:a,type:_.ERROR})}})}_runUploadNewFileAfterFail(t){this.dataSource.runAfterFail({parentFolderId:this._getCurrentFolderId(),items:[t]}).pipe((0,g.b)(()=>this._match())).subscribe()}_cancelUploadNewFile(t){this.dataSource.cancelUploadNewFile({parentFolderId:this._getCurrentFolderId(),item:t}).pipe((0,g.b)(()=>this._match())).subscribe()}_messageStripDismiss(){this._message=void 0}_openFolder(t){"file"===t.type||!t.documentId||(this._breadcrumbList.length>0&&(this._breadcrumbList[this._breadcrumbList.length-1].clikable=!0),this._breadcrumbList.push({clikable:!1,folderId:t.documentId,folderName:t.name}),this._match())}_actionButton(t){this._activeItem=t}_onDropzone(t){this._showDragDropArea=!0,this._onDragDropArea=t}_dragDropCancel(){this._showDragDropArea=!1}_breadcrumbGoTo(t,o){if(t.preventDefault(),t.stopPropagation(),!Number.isInteger(o))return this._breadcrumbList=[],void this._match();this._breadcrumbList=this._breadcrumbList.slice(0,o+1),this._breadcrumbList[this._breadcrumbList.length-1].clikable=!1,this._match()}_pageChanged(t){!this.enablePagination||this._currentPage===t||(this.selectedItems=[],this._currentPage=t,this._match())}_itemsPerPageChange(t){t!==this._itemsPerPage&&(this._itemsPerPage=t,this._currentPage*this._itemsPerPage>this._totalItems&&(this._currentPage=Math.ceil(this._totalItems/this._itemsPerPage)),this._match())}_searchInputChanged(){this._match()}_onRowSelectionChange(t){this.sameFileNameAllowed||this._clearItemSameFilenameState(t.removed[0]),this.selectedItems=t.selection}_getItemName(t){return"folder"===t.type?t.name:t.name.split(".").slice(0,-1).join(".")}_getItemExtension(t){return"folder"===t.type?"":`.${t.name.split(".").pop()}`}_getIconByType(t){const o=`.${t.name.split(".").pop()}`;return this._imageExtensions.includes(o)?"background":"document"}_showIfSelectedOnlyFiles(){return!this.selectedItems.some(t=>"folder"===t.type)}_isSelectedItem(t){return this.selectedItems.some(o=>o.documentId===t.documentId)}_getList(){return this.dataSource.dataProvider.list}_trackByDocumentId(t,o){return o.documentId}_getAllowedTypes(){return`${this.fileTypes?.join(", ")}${this.fileTypes?.length&&this.mimeTypes?.length?", ":""}${this.mimeTypes?.join(", ")}`}_validateFiles(t){this._validatedFiles=this._filesValidatorService.validation(t,{maxFileSize:this.maxFileSize,maxFileNameLength:this.maxFilenameLength,fileTypes:this.fileTypes,mimeTypes:this.mimeTypes})}_propagateFiles(){const{validFiles:t,typeMismatch:o,filenameLengthExceed:i,fileSizeExceed:a}=this._validatedFiles;if(t&&(this._currentUpdateFileVersion?this._updateFileVersion(t[0]):this._uploadNewFiles(t)),o){const c={items:o},s=new ke(this,c);this.showMessage(m.TYPE_MISMATCH,{payload:c,type:_.ERROR}),this.typeMismatch.emit(s)}if(i){const c={items:i},s=new le(this,c);this.showMessage(m.FILE_NAME_LENGTH,{payload:c,type:_.ERROR}),this.filenameLengthExceed.emit(s)}if(a){const c={items:a},s=new Be(this,c);this.showMessage(m.FILE_SIZE,{payload:c,type:_.ERROR}),this.fileSizeExceed.emit(s)}}_updateFileVersion(t){const o=this._getCurrentFolderId(),i={...this._currentUpdateFileVersion,status:x.LOADING},a={parentFolderId:this._getCurrentFolderId(),item:this._currentUpdateFileVersion,newItem:t};this._findParentFolderAndUpdateItem(o,i),this.dataSource.updateVersion(a).pipe((0,g.b)(()=>this._match())).subscribe({next:()=>{this.showMessage(m.UPDATE_VERSION,{payload:a,type:_.SUCCESS}),this._currentUpdateFileVersion=void 0},error:()=>{this.showMessage(m.UPDATE_VERSION,{payload:a,type:_.ERROR})}})}_uploadNewFiles(t){const o=this._getCurrentFolderId(),i=this._generateTemporaryNewFiles(t);this._findParentFolderAndAddTemporaryFiles(o,i),this.dataSource.upload({parentFolderId:o,items:i.map(a=>({...a}))}).pipe((0,g.b)(()=>this._match())).subscribe()}_getCurrentFolder(){const t=this._getCurrentFolderId();return t?this._findFolderById(t):void 0}_getCurrentFolderId(){return 0===this._breadcrumbList.length?void 0:this._breadcrumbList[this._breadcrumbList.length-1].folderId}_findFolderById(t,o=this.dataSource.dataProvider.items){let i;return JSON.stringify(o,(a,c)=>(c&&c.documentId===t&&(i=c),c)),i}_findParentFolderAndUpdateItem(t,o,i=this.dataSource.dataProvider.items){if(!t){const a=i.findIndex(c=>c.documentId===o.documentId);return-1!==a&&(i[a]=o),void this._match()}for(let a=0;a<i.length;a++){const c=i[a];if("folder"===c.type)if(c.documentId===t){if(-1!==c.files.findIndex(r=>r.documentId===o.documentId)){c.files[a]=o,this._match();break}}else this._findParentFolderAndUpdateItem(t,o,c.files)}}_findParentFolderAndAddTemporaryFiles(t,o,i=this.dataSource.dataProvider.items){if(!t)return i.push(...o),void this._match();for(let a=0;a<i.length;a++){const c=i[a];if("folder"===c.type){if(c.documentId===t){c.files.push(...o),this._match();break}this._findParentFolderAndAddTemporaryFiles(t,o,c.files)}}}_generateTemporaryNewFiles(t){return t.map(o=>({documentId:(0,D.k$y)(),type:"file",name:o.name,uploadedBy:{id:(0,D.k$y)(),name:"You"},uploadedOn:new Date,fileSize:o.size,version:1,url:"",status:x.LOADING,file:o}))}_generateTemporaryNewFolder(t){return{documentId:(0,D.k$y)(),type:"folder",name:t,uploadedBy:{id:Date.now(),name:"You"},uploadedOn:new Date,files:[],status:x.LOADING}}_initializeDS(t){this._visibleList$.next([]),(0,I.Z9)(this.dataSource)&&(this.dataSource.close(),this._dsSubscription&&(this._dsSubscription.unsubscribe(),this._dsSubscription=void 0)),this._dataSource=this._openDataStream(t),this._match()}_openDataStream(t){const o=this._toDataStream(t);if(void 0===o)throw new Error("[dataSource] source did not match an array, Observable, or DataSource");return this._dsSubscription=o.open().subscribe(i=>{this._visibleList$.next(i),this._totalItems=o.dataProvider.totalItems,this._countUnvisibleItems(),this._cdr.detectChanges()}),o}_toDataStream(t){if((0,I.Z9)(t))return t}_match(){const t=new Map;t.set("folderId",this._getCurrentFolderId()),t.set("page",this._currentPage),t.set("searchText",this._searchText||"*"),this.enablePagination&&t.set("limit",this._itemsPerPage),this.dataSource.match(t)}_countUnvisibleItems(){const t=this._itemsPerPage;this._countShowedItems=this._currentPage*t-t+1,this._countNotShowedItems=this._countShowedItems+this._visibleList$.value.length-1}_clearItemSameFilenameState(t){if(t)for(const o of this._getList())if(o.documentId===t.documentId){delete o.sameFilenameState;break}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.xA),e.Y36(ne),e.Y36(e.sBO),e.Y36(e.zs3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fdp-upload-collection"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Qe,5),e.Gf(ze,5)),2&t){let i;e.iGM(i=e.CRH())&&(o._uploadFilesRef=i.first),e.iGM(i=e.CRH())&&(o._updateVersionRef=i.first)}},inputs:{id:"id",itemsPerPage:"itemsPerPage",dataSource:"dataSource",fileTypes:"fileTypes",maxFileSize:"maxFileSize",maxFilenameLength:"maxFilenameLength",mimeTypes:"mimeTypes",disabled:"disabled",readonly:"readonly",hierarchy:"hierarchy",enablePagination:"enablePagination",terminationEnabled:"terminationEnabled",multiple:"multiple",showSearch:"showSearch",sameFileNameAllowed:"sameFileNameAllowed"},outputs:{typeMismatch:"typeMismatch",filenameLengthExceed:"filenameLengthExceed",fileSizeExceed:"fileSizeExceed"},standalone:!0,features:[e.TTD,e.jDz],decls:61,vars:40,consts:[[1,"fdp-upload-collection",3,"id"],[3,"type","onDismiss",4,"ngIf"],[1,"fdp-upload-collection__toolbar"],[3,"id"],["multipleBreadcrumbs",""],["singleBreadcrumb",""],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"fdp-upload-collection__table--wrapper"],["fdpUploadCollectionDragnDrop","",1,"fdp-upload-collection__table",3,"fileTypes","maxFilenameLength","maxFileSize","mimeTypes","dragndrop","disabled","multiple","fileChanged","cancel","onDropzone"],["selectionMode","multiple","emptyTableMessage","",3,"dataSource","loading","noHorizontalBorders","trackBy","rowSelectionChange",4,"ngIf"],["class","fdp-upload-collection__dragdrop-area",3,"active",4,"ngIf"],["class","fdp-upload-collection__no-data",3,"invisible",4,"ngIf"],["class","fdp-upload-collection__table-footer",4,"ngIf"],["xPosition","before"],["itemsPerPageMenu",""],[3,"itemSelect",4,"ngFor","ngForOf"],["menuActions",""],[3,"itemSelect"],["glyph","folder-blank",1,"fdp-upload-collection__fd-icon",3,"title"],["glyph","delete",1,"fdp-upload-collection__fd-icon",3,"title"],["type","file","fdFileSelect","",1,"fdp-upload-collection__hidden",3,"multiple","disabled","fileSelected"],["fileInput",""],["type","file","fdFileSelect","",1,"fdp-upload-collection__hidden",3,"disabled","multiple","fileSelected"],["updateVersionInput",""],["message",""],["messageNewFolder",""],["messageUpdateVersion",""],["messageFileRename",""],["messageRemove",""],["messageMove",""],["messageTypeMismatch",""],["messageFileSize",""],["messageFilenameLength",""],[3,"type","onDismiss"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["href","#","fd-link","",3,"click"],["clickableBreadcrumb",""],["textBreadcrumb",""],["glyph","search",3,"ngModel","ariaLabelledBy","placeholder","ngModelChange",4,"ngIf"],["glyph","search",3,"ngModel","ariaLabelledBy","placeholder","ngModelChange"],["fd-toolbar-item","","fd-button","","fdType","ghost",3,"disabled","label","title","click"],["fd-toolbar-item","","fd-button","","fdType","transparent",3,"disabled","label","title","click",4,"ngIf"],["fd-toolbar-item","","fd-button","","fdType","transparent",3,"disabled","label","title","click"],["fd-toolbar-item","","fd-button","","fdType","ghost",3,"disabled","label","title","click",4,"ngIf"],["selectionMode","multiple","emptyTableMessage","",3,"dataSource","loading","noHorizontalBorders","trackBy","rowSelectionChange"],["name","name","label","Name","width","8rem"],[4,"fdpCellDef"],["name","uploadedBy","label","Uploaded by","width","5rem"],["name","uploadedOn","label","Uploaded on","width","5rem"],["name","size","label","File size","width","5rem"],["name","version","label","Version","width","5rem"],["name","status","label","Status","width","5rem"],["name","action","width","5rem","align","end",4,"ngIf"],[1,"fdp-upload-collection__vertical-align-center"],["class","fdp-upload-collection__fd-icon","glyph","folder-blank",3,"title",4,"ngIf"],["class","fdp-upload-collection__fd-icon",3,"glyph","title",4,"ngIf"],[4,"ngIf","ngIfElse"],["editMode",""],[1,"fdp-upload-collection__fd-icon",3,"glyph","title"],[3,"click"],["fd-form-item",""],[3,"triggers","isOpen"],["fd-form-control","","type","text",3,"value","placeholder","state","blur","input"],[1,"fdp-upload-collection__item_extension"],[3,"type"],["ariaLabel","Status: Loading","ariaLive","polite","size","s",3,"loading",4,"ngIf"],["fd-object-status","","status","positive",4,"ngIf"],["fd-object-status","","status","negative",4,"ngIf"],["ariaLabel","Status: Loading","ariaLive","polite","size","s",3,"loading"],["fd-object-status","","status","positive"],["fd-object-status","","status","negative"],["name","action","width","5rem","align","end"],[4,"fdpHeaderCellDef"],[1,"fdp-upload-collection__actions"],[1,"fdp-upload-collection__actions--status"],["fd-button","","fdType","ghost",3,"label","title","disabled","click",4,"ngIf"],["icon","overflow","type","transparent",3,"disabled","title","fdpMenuTriggerFor","buttonClicked"],["fd-button","","fdType","ghost",3,"label","title","disabled","click"],[1,"fdp-upload-collection__dragdrop-area"],["glyph","upload-to-cloud",1,"fdp-upload-collection__dragdrop-area--icon"],[1,"fdp-upload-collection__dragdrop-area--text"],[1,"fdp-upload-collection__no-data"],["glyph","document"],[1,"fdp-upload-collection__table-footer"],[1,"fdp-upload-collection__pagination"],[1,"fdp-upload-collection__pagination--total",3,"id"],[3,"totalItems","displayTotalItems","itemsPerPage","currentPage","pageChangeStart"],[1,"fdp-upload-collection__results"],[1,"fdp-upload-collection__results--title"],["type","ghost",3,"ariaLabelledBy","fdpMenuTriggerFor","label",4,"ngIf"],["type","ghost",3,"ariaLabelledBy","fdpMenuTriggerFor","label"],["glyph","download",1,"fdp-upload-collection__fd-icon",3,"title"],["glyph","drill-up",1,"fdp-upload-collection__fd-icon",3,"title"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],["foldersCreated",""],["versionUpdated",""],["fileRenamed",""],["foldersAndFilesRemoved",""],["foldersRemoved",""],["filesRemoved",""],["oneItemRemoved",""],["filesAndFoldersMovedTo",""],["foldersMovedTo",""],["filesMovedTo",""],["oneItemMovedTo",""]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,qe,2,8,"fd-message-strip",1),e.TgZ(2,"fd-toolbar",2)(3,"div")(4,"fd-breadcrumb",3)(5,"fd-breadcrumb-item"),e.YNc(6,je,3,3,"ng-template",null,4,e.W1O),e.YNc(8,$e,3,6,"ng-template",null,5,e.W1O),e.YNc(10,We,1,0,"ng-container",6),e.qZA(),e.YNc(11,Xe,6,1,"fd-breadcrumb-item",7),e.qZA()(),e._UZ(12,"fd-toolbar-spacer"),e.YNc(13,nt,3,2,"ng-container",8),e.YNc(14,it,8,15,"ng-container",8),e.qZA(),e.TgZ(15,"div",9)(16,"div",10),e.NdJ("fileChanged",function(a){return o._handleDrop(a)})("cancel",function(){return o._dragDropCancel()})("onDropzone",function(a){return o._onDropzone(a)}),e.YNc(17,St,14,5,"fdp-table",11),e.YNc(18,At,5,5,"div",12),e.YNc(19,It,8,8,"div",13),e.qZA(),e.YNc(20,Lt,13,20,"div",14),e.qZA()(),e.TgZ(21,"fdp-menu",15,16),e.YNc(23,Et,3,2,"fdp-menu-item",17),e.qZA(),e.TgZ(24,"fdp-menu",15,18)(26,"fdp-menu-item",19),e.NdJ("itemSelect",function(){return o._moveToClicked()}),e._UZ(27,"fd-icon",20),e.ALo(28,"fdTranslate"),e.TgZ(29,"span"),e._uU(30),e.ALo(31,"fdTranslate"),e.qZA()(),e.YNc(32,Zt,13,12,"ng-container",8),e.TgZ(33,"fdp-menu-item",19),e.NdJ("itemSelect",function(){return o._remove()}),e._UZ(34,"fd-icon",21),e.ALo(35,"fdTranslate"),e.TgZ(36,"span"),e._uU(37),e.ALo(38,"fdTranslate"),e.qZA()()(),e.TgZ(39,"input",22,23),e.NdJ("fileSelected",function(a){return o._selectHandler(a)}),e.qZA(),e.TgZ(41,"input",24,25),e.NdJ("fileSelected",function(a){return o._selectHandler(a)}),e.qZA(),e.YNc(43,zt,1,1,"ng-template",null,26,e.W1O),e.YNc(45,jt,3,2,"ng-template",null,27,e.W1O),e.YNc(47,Wt,3,2,"ng-template",null,28,e.W1O),e.YNc(49,Kt,3,2,"ng-template",null,29,e.W1O),e.YNc(51,_o,4,4,"ng-template",null,30,e.W1O),e.YNc(53,So,4,4,"ng-template",null,31,e.W1O),e.YNc(55,No,2,2,"ng-template",null,32,e.W1O),e.YNc(57,Mo,2,2,"ng-template",null,33,e.W1O),e.YNc(59,ko,2,2,"ng-template",null,34,e.W1O)),2&t){const i=e.MAs(7),a=e.MAs(9);e.Q6J("id",o.id),e.xp6(1),e.Q6J("ngIf",o._message),e.xp6(2),e.Udp("flex","1 auto"),e.xp6(1),e.Q6J("id",o.id+"-breadcrumb"),e.xp6(6),e.Q6J("ngTemplateOutlet",o._breadcrumbList.length>0?i:a),e.xp6(1),e.Q6J("ngForOf",o._breadcrumbList),e.xp6(1),e.Udp("max-width",3,"rem"),e.xp6(1),e.Q6J("ngIf",o.readonly||0===o.selectedItems.length),e.xp6(1),e.Q6J("ngIf",!o.readonly&&o.selectedItems.length>0),e.xp6(2),e.Q6J("fileTypes",o.fileTypes)("maxFilenameLength",o.maxFilenameLength)("maxFileSize",o.maxFileSize)("mimeTypes",o.mimeTypes)("dragndrop",!o.readonly)("disabled",o.disabled)("multiple",o.multiple),e.xp6(1),e.Q6J("ngIf",o._visibleList$.value.length>0),e.xp6(1),e.Q6J("ngIf",o._showDragDropArea),e.xp6(1),e.Q6J("ngIf",0===o._visibleList$.value.length),e.xp6(1),e.Q6J("ngIf",o.enablePagination&&o._totalItems),e.xp6(3),e.Q6J("ngForOf",o._itemsPerPageOptions),e.xp6(4),e.Q6J("title",e.lcZ(28,32,"platformUploadCollection.moveToBtnLabel")),e.xp6(3),e.hij(" ",e.lcZ(31,34,"platformUploadCollection.moveToBtnLabel")," "),e.xp6(2),e.Q6J("ngIf","file"===(null==o._activeItem?null:o._activeItem.type)),e.xp6(2),e.Q6J("title",e.lcZ(35,36,"platformUploadCollection.removeBtnLabel")),e.xp6(3),e.hij(" ",e.lcZ(38,38,"platformUploadCollection.removeBtnLabel")," "),e.xp6(2),e.Q6J("multiple",o.multiple)("disabled",o.disabled),e.xp6(2),e.Q6J("disabled",o.disabled)("multiple",!1)}},dependencies:[b.O5,Pe.hj,b.tP,j.nV,oe.LI,oe.UN,Ze.N0,b.ax,j.vv,Ee.g8,U.u5,U.JJ,U.On,G.r0,j.QE,Oe,O.ac,L.wy,O.Z8,L.y_,L.tY,V.IconComponent,y.Jp,y.KI,y.Ac,y.KH,Ne.Bw,X.kM,L.Cb,L.Cg,De.p,H.kj,Me.Qt,H.Mn,H.qv,Le.m9,b.RF,b.n9,b.uU,Y.ni,I.s5],styles:['.fdp-upload-collection__fd-icon{color:#0854a0!important;color:var(--sapHighlightColor)!important;margin-right:.625rem!important;font-size:1rem!important}.fdp-upload-collection fd-message-strip{margin-bottom:.625rem}.fdp-upload-collection__toolbar .fd-toolbar{margin-bottom:.625rem;border:0}.fdp-upload-collection__toolbar .fd-toolbar fd-input-group .sap-icon--search{color:#0854a0;color:var(--sapHighlightColor)}.fdp-upload-collection__no-data{text-align:center;min-height:230px;display:flex;align-items:center;flex-direction:column;justify-content:center}.fdp-upload-collection__no-data fd-icon{font-size:3rem;line-height:3rem;margin:0;color:#6a6d70;color:var(--sapContent_LabelColor)}.fdp-upload-collection__no-data h3{font-size:1.125rem;font-size:var(--sapFontHeader4Size);line-height:1rem;margin:8px 0}.fdp-upload-collection__no-data p{font-size:.875rem;font-size:var(--sapFontSize);line-height:1rem;color:#6a6d70;color:var(--sapContent_LabelColor);margin:0}.fdp-upload-collection__no-data.invisible{opacity:0}.fdp-upload-collection__table{position:relative}.fdp-upload-collection__table-footer{display:flex;justify-content:space-between;align-items:center;margin-top:.625rem}.fdp-upload-collection__table-footer .fdp-upload-collection__results--title,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total{line-height:1.4;line-height:var(--sapContent_LineHeight);color:#32363a;color:var(--sapTextColor);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;font-size:.875rem;font-size:var(--sapFontSize);color:#6a6d70;color:var(--sapContent_LabelColor);margin-right:.5rem}.fdp-upload-collection__table-footer .fdp-upload-collection__results--title:before,.fdp-upload-collection__table-footer .fdp-upload-collection__results--title:after,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total:before,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total:after{box-sizing:inherit;font-size:inherit}[dir=rtl] .fdp-upload-collection__table-footer .fdp-upload-collection__results--title,.fdp-upload-collection__table-footer .fdp-upload-collection__results--title[dir=rtl],[dir=rtl] .fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total[dir=rtl]{margin-right:0;margin-left:.5rem}.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total{width:100%;align-self:center}.fdp-upload-collection__table-footer .fdp-upload-collection__pagination{font-size:.875rem;font-size:var(--sapFontSize);line-height:1.4;line-height:var(--sapContent_LineHeight);color:#32363a;color:var(--sapTextColor);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;display:flex}.fdp-upload-collection__table-footer .fdp-upload-collection__pagination:before,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination:after{box-sizing:inherit;font-size:inherit}.fdp-upload-collection__hidden{display:none}.fdp-upload-collection__vertical-align-center{display:flex;align-items:center}.fdp-upload-collection__cursor{cursor:pointer}.fdp-upload-collection__item_extension{white-space:nowrap}.fdp-upload-collection__actions{display:flex;justify-content:space-between;align-items:center}.fdp-upload-collection__actions .sap-icon--slim-arrow-down{display:none}.fdp-upload-collection__dragdrop-area{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(255,255,255,.5);outline:2px dashed transparent;outline-color:#89919a;outline-color:var(--sapField_BorderColor);outline-offset:-4px;box-sizing:border-box}.fdp-upload-collection__dragdrop-area fd-icon{font-size:3rem;line-height:3rem;margin-bottom:1rem;color:#6a6d70;color:var(--sapContent_LabelColor)}.fdp-upload-collection__dragdrop-area p{font-size:1rem;line-height:1.125rem;color:#6a6d70;color:var(--sapContent_LabelColor)}.fdp-upload-collection__dragdrop-area.active{outline-color:#0854a0;outline-color:var(--sapContent_DragAndDropActiveColor);background:rgba(8,84,160,.08)}.fdp-upload-collection__dragdrop-area.active fd-icon,.fdp-upload-collection__dragdrop-area.active p{color:#0854a0;color:var(--sapContent_DragAndDropActiveColor)}.fdp-upload-collection .fd-form-item{align-items:center;flex-direction:row}.fdp-upload-collection-dialig-no-bg{background-color:transparent!important}[dir=rtl] .fdp-upload-collection fd-icon{margin-right:0;margin-left:.625rem}.fd-menu__list .disabled{background-color:#fff!important;background-color:var(--sapList_Background)!important;cursor:not-allowed}.fd-menu__list .disabled .fd-menu__title{color:#32363a!important;color:var(--sapList_TextColor)!important}\n'],encapsulation:2}),n})(),J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[W.jO,Z,q,ee,W.jO]}),n})();var T=d(22096);class Qo extends I.FW{constructor(){super(...arguments),this.totalItems=0,this.list=[]}fetch(l){let t=this.items;const o=l.get("folderId");if(o){const C=this._findFolderById(o);t=C?C.files:[]}let i=this._defaultSorting(t);const a=l.get("searchText")??"",c=+(l.get("limit")??100),s=+(l.get("page")??1);if(!a||"*"===a)return this.list=i,this.totalItems=i.length,(0,T.of)(this._getItemsByPage(i,s,c));const r=a.toLowerCase();return i=i.filter(C=>C.name.toLowerCase().indexOf(r)>-1),this.list=i,this.totalItems=i.length,i=this._getItemsByPage(i,s,c),(0,T.of)(i)}_getItemsByPage(l,t,o){const i=(t-1)*o,a=l.slice(i,i+o);return 0===a.length&&l.length>0&&this._getItemsByPage(l,t>1?t-1:1,o),a}_defaultSorting(l){let t=[];const o=l.reduce((i,a)=>{const c=`${a.type}s`;return i[c]||(i[c]=[]),"folder"===a.type&&(a.fileSize=+this._getFileSize(a).toFixed(2)),i[c].push(a),i},{});return o.folders=this._sortBy(o.folders,"name"),o.files=this._sortBy(o.files,"name"),t=o.folders?o.folders:[],o.files&&t.push(...o.files),t}_getFileSize(l){return"file"===l.type?l.fileSize:"folder"===l.type?l.files.reduce((t,o)=>t+this._getFileSize(o),0):0}_sortBy(l=[],t){return l.sort((o,i)=>o[t]>i[t]?1:-1)}_findFolderById(l){let t;return JSON.stringify(this.items,(o,i)=>(i&&i.documentId===l&&(t=i),i)),t}}class F{get isDataLoading(){return this._dataLoading}constructor(l){this.dataProvider=l,this._dataChanges=new te.X([]),this._onDataRequested$=new N.x,this._onDataReceived$=new N.x,this._dataLoading=!1}match(l){if(this._onDataRequested$.next(),this._dataLoading=!0,!(l instanceof Map))throw new Error("DataSource.match() predicate can only accepts string and Map");l.has("limit")||l.set("limit",F.MaxLimit),this.dataProvider.fetch(l).pipe((0,h.q)(1)).subscribe(t=>{this._onDataReceived$.next(),this._dataLoading=!1,this._dataChanges.next(t)},()=>{this._onDataReceived$.next(),this._dataLoading=!1})}upload(l){return this.dataProvider.upload(l).pipe((0,h.q)(1))}download(l){return this.dataProvider.download(l)}moveTo(l){return this.dataProvider.moveTo(l).pipe((0,h.q)(1))}delete(l){return this.dataProvider.delete(l).pipe((0,h.q)(1))}fileRenamed(l){return this.dataProvider.fileRenamed(l).pipe((0,h.q)(1))}newFolder(l){return this.dataProvider.newFolder(l).pipe((0,h.q)(1))}updateVersion(l){return this.dataProvider.updateVersion(l).pipe((0,h.q)(1))}runAfterFail(l){return this.dataProvider.runAfterFail(l).pipe((0,h.q)(1))}cancelUploadNewFile(l){return this.dataProvider.cancelUploadNewFile(l).pipe((0,h.q)(1))}open(){return this._dataChanges.asObservable()}close(){}onDataRequested(){return this._onDataRequested$.asObservable()}onDataReceived(){return this._onDataReceived$.asObservable()}}F.MaxLimit=Number.MAX_SAFE_INTEGER,(0,f.k$y)(),(0,f.k$y)(),new Date(2018,4,1),(0,f.k$y)(),(0,f.k$y)(),new Date(2018,0,1),(0,f.k$y)(),(0,f.k$y)(),new Date(2010,9,4);var Yo=d(63019),P=d(37547),fe=d(37398),ue=d(59773);const k=["Liam","Noah","Oliver","William","Elijah","James","Benjamin","Lucas","Mason","Ethan","Alexander","Henry","Jacob","Michael","Daniel","Logan","Jackson","Sebastian","Jack","Aiden"],qo=5242880,ge=[".jpg",".png",".pdf",".xls"];function he(){return"abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())].toUpperCase()}function Ce(n,l){return new Date(+n+Math.random()*(l.getTime()-n.getTime()))}function jo(n,l){return n=Math.ceil(n),l=Math.floor(l),Math.floor(Math.random()*(l-n+1))+n}function xe(n){const l=[];for(let t=0;t<n;t++){const o=k[Math.floor(Math.random()*k.length)],i=jo(1,qo),a=ge[Math.floor(Math.random()*ge.length)];let c;switch(a){case".jpg":case".png":c="https://picsum.photos/200";break;case".pdf":c="https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf";break;case".xls":c="https://file-examples-com.github.io/uploads/2017/02/file_example_XLS_10.xls"}c&&l.push({documentId:(0,f.k$y)(),type:"file",name:`File-${t+1}${a}`,uploadedBy:{id:(0,f.k$y)(),name:`${o} ${he()}.`},url:c,uploadedOn:Ce(new Date(2018,0,1),new Date),fileSize:i,version:Math.floor(10*Math.random())||1})}return l}function Te(n,l=3,t=0){const o=[];for(let i=0;i<n;i++){const a=k[Math.floor(Math.random()*k.length)],c=xe(Math.floor(10*Math.random()));l!==t&&c.push(...Te(Math.floor(10*Math.random()),l,t+1)),o.push({documentId:(0,f.k$y)(),type:"folder",name:`Folder-${i+1}`,uploadedBy:{id:(0,f.k$y)(),name:`${a} ${he()}.`},uploadedOn:Ce(new Date(2018,0,1),new Date),files:c})}return o}var S=function(n){return n[n.UPDATE=0]="UPDATE",n[n.NEW_FOLDER=1]="NEW_FOLDER",n[n.UPDATE_VERSION=2]="UPDATE_VERSION",n}(S||{});class B extends Qo{constructor(l){super(),this._http=l,this.items=function Ho(n,l,t){return[...xe(n),...Te(l,t-1)]}(50,4,2),this._cancelUploadNewFileIds=[],this._activeRequest=null}upload({parentFolderId:l,items:t}){return console.log("upload",l,t),this._activeRequest=S.UPDATE,(0,T.of)(this.items).pipe((0,P.g)(5e3),(0,g.b)(()=>{const o=t.map(i=>(delete i.file,i.status=x.SUCCESSFUL,{temporaryDocumentId:i.documentId,item:i}));this._findParentFolderAndAddNewFiles(l,o),this._activeRequest=null}))}download(l){console.log("download",l);const t=l.items.map(o=>this._http.get(o.url,{responseType:"blob"}).pipe((0,fe.U)(i=>({blob:i,file:o}))));return(0,Yo.T)(...t).pipe((0,fe.U)(({file:o,blob:i})=>{const a=document.createElement("a"),c=URL.createObjectURL(i);a.href=c,a.download=o.name,a.click(),URL.revokeObjectURL(c)}))}moveTo({from:l,to:t,items:o,newFolder:i}){console.log("moveTo",l,t,o,i);const a=o.map(c=>c.documentId);if(this._findParentFolderAndRemoveItemsByIds(l?l.documentId:null,a),i){const c=this._generateNewFolder(i.folderName);this._findParentFolderAndAddFiles(i.parentFolderId,[c]),this._findParentFolderAndAddFiles(c.documentId,o)}else this._findParentFolderAndAddFiles(t?t.documentId:null,o);return(0,T.of)(this.items)}delete({parentFolderId:l,items:t}){console.log("delete",l,t);const o=t.map(i=>i.documentId);return this._findParentFolderAndRemoveItemsByIds(l,o),(0,T.of)(this.items)}fileRenamed({parentFolderId:l,item:t,fileName:o}){console.log("fileRenamed",l,t,o);const i={...t,name:o};return this._findParentFolderAndUpdateItem(l,i),(0,T.of)(this.items).pipe((0,P.g)(5e3))}newFolder({parentFolderId:l,folder:t}){console.log("newFolder",t,l),this._activeRequest=S.NEW_FOLDER;const o=new N.x;return(0,T.of)(this.items).pipe((0,P.g)(5e3),(0,g.b)(()=>{const i=t.documentId;this._cancelUploadNewFileIds.includes(i)&&(this._cancelUploadNewFileIds=this._cancelUploadNewFileIds.filter(c=>c!==i),this._activeRequest=null,o.next())}),(0,ue.R)(o),(0,g.b)(()=>{const i={temporaryDocumentId:t.documentId,item:{...t,status:x.SUCCESSFUL}};this._findParentFolderAndAddNewFiles(l,[i]),this._activeRequest=null}))}updateVersion({parentFolderId:l,item:t,newItem:o}){console.log("updateVersion",l,t),this._activeRequest=S.UPDATE_VERSION;const i=new N.x;return(0,T.of)(this.items).pipe((0,P.g)(5e3),(0,g.b)(()=>{const a=t.documentId;this._cancelUploadNewFileIds.includes(a)&&(this._cancelUploadNewFileIds=this._cancelUploadNewFileIds.filter(s=>s!==a),this._activeRequest=null,i.next(!0))}),(0,g.b)(()=>{const a={...t,status:x.SUCCESSFUL,uploadedOn:new Date,uploadedBy:{id:Date.now(),name:"You"},version:+t.version,name:o.name,fileSize:o.size};this._findParentFolderAndUpdateItem(l,a),this._activeRequest=null}),(0,ue.R)(i))}runAfterFail({parentFolderId:l,items:t}){console.log("runAfterFail",l,t);const o=t[0];return this._findParentFolderAndAddNewFiles(l,[{temporaryDocumentId:o.documentId,item:{...o,status:x.SUCCESSFUL}}]),(0,T.of)(this.items)}cancelUploadNewFile({parentFolderId:l,item:t}){console.log("cancelUploadNewFile",l,t);const o=t.documentId;return this._cancelUploadNewFileIds.push(o),this._activeRequest===S.NEW_FOLDER&&this._findParentFolderAndRemoveItemsByIds(l,[o]),this._activeRequest===S.UPDATE&&this._findParentFolderAndRemoveItemsByIds(l,[o]),this._activeRequest===S.UPDATE_VERSION&&(delete t.status,this._findParentFolderAndUpdateItem(l,t)),(0,T.of)([])}_findParentFolderAndUpdateItem(l,t,o=this.items){if(l)for(let i=0;i<o.length;i++){const a=o[i];if("folder"===a.type)if(a.documentId===l){if(-1!==a.files.findIndex(s=>s.documentId===t.documentId)){a.files[i]=t;break}}else this._findParentFolderAndUpdateItem(l,t,a.files)}else{const i=o.findIndex(a=>a.documentId===t.documentId);-1!==i&&(o[i]=t)}}_findParentFolderAndAddNewFiles(l,t,o=this.items){if(0!==t.length){if(!l){const i=t.pop(),a=o.findIndex(c=>c.documentId===i.temporaryDocumentId);return-1!==a&&(o[a]=i.item),void(t.length>0&&this._findParentFolderAndAddNewFiles(l,t))}for(let i=0;i<o.length;i++){const a=o[i];if("folder"===a.type){if(a.documentId===l){const c=t.reduce((s,r)=>(s[r.temporaryDocumentId]=r.item,s),{});a.files=a.files.map(s=>s.documentId&&c[s.documentId]?c[s.documentId]:s);break}this._findParentFolderAndAddNewFiles(l,t,a.files)}}}}_findParentFolderAndAddFiles(l,t,o=this.items){if(0!==t.length){if(!l)return void o.push(...t);for(let i=0;i<o.length;i++){const a=o[i];if("folder"===a.type){if(a.documentId===l){a.files.push(...t);break}this._findParentFolderAndAddFiles(l,t,a.files)}}}}_findParentFolderAndRemoveItemsByIds(l,t,o=this.items){if(0!==t.length){if(!l){const i=t.pop(),a=o.findIndex(c=>c.documentId===i);return void(-1!==a&&(o.splice(a,1),this._findParentFolderAndRemoveItemsByIds(l,t)))}for(let i=0;i<o.length;i++){const a=o[i];if("folder"===a.type){if(a.documentId===l){a.files=a.files.filter(c=>!t.some(s=>s===c.documentId));break}this._findParentFolderAndRemoveItemsByIds(l,t,a.files)}}}}_generateNewFolder(l){return{documentId:(0,f.k$y)(),type:"folder",name:l,uploadedBy:{id:(0,f.k$y)(),name:"You"},uploadedOn:new Date,files:[],status:x.SUCCESSFUL}}}var Q=d(69862);let $o=(()=>{class n{constructor(t){this._http=t,this.itemsPerPage=[{label:5,default:!1},{label:10,default:!0},{label:15,default:!1},{label:20,default:!1}],this.mimeTypes=["image/png","image/jpeg"],this.fileTypes=["jpg","png","bmp"],this.dataSource=new F(new B(t))}typeMismatch({source:t,payload:o}){console.log("typeMismatch",t,o)}filenameLengthExceed({source:t,payload:o}){console.log("filenameLengthExceed",t,o)}fileSizeExceed({source:t,payload:o}){console.log("fileSizeExceed",t,o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fdp-upload-collection-disabled-example"]],standalone:!0,features:[e.jDz],decls:1,vars:6,consts:[["maxFileSize","1mb",3,"dataSource","maxFilenameLength","disabled","mimeTypes","fileTypes","itemsPerPage","typeMismatch","filenameLengthExceed","fileSizeExceed"]],template:function(t,o){1&t&&(e.TgZ(0,"fdp-upload-collection",0),e.NdJ("typeMismatch",function(a){return o.typeMismatch(a)})("filenameLengthExceed",function(a){return o.filenameLengthExceed(a)})("fileSizeExceed",function(a){return o.fileSizeExceed(a)}),e.qZA()),2&t&&e.Q6J("dataSource",o.dataSource)("maxFilenameLength",20)("disabled",!0)("mimeTypes",o.mimeTypes)("fileTypes",o.fileTypes)("itemsPerPage",o.itemsPerPage)},dependencies:[J,Z],encapsulation:2}),n})();var Wo=d(49670);let Go=(()=>{class n{constructor(t){this._http=t,this.itemsPerPage=[{label:5,default:!1},{label:10,default:!0},{label:15,default:!1},{label:20,default:!1}],this.mimeTypes=["image/png","image/jpeg"],this.fileTypes=["jpg","png","bmp"],this.dataSource=new F(new Vo(t))}typeMismatch({source:t,payload:o}){console.log("typeMismatch",t,o)}filenameLengthExceed({source:t,payload:o}){console.log("filenameLengthExceed",t,o)}fileSizeExceed({source:t,payload:o}){console.log("fileSizeExceed",t,o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fdp-upload-collection-example"]],standalone:!0,features:[e.jDz],decls:1,vars:5,consts:[["fdCompact","","maxFileSize","1mb",3,"dataSource","maxFilenameLength","mimeTypes","fileTypes","itemsPerPage","typeMismatch","filenameLengthExceed","fileSizeExceed"]],template:function(t,o){1&t&&(e.TgZ(0,"fdp-upload-collection",0),e.NdJ("typeMismatch",function(a){return o.typeMismatch(a)})("filenameLengthExceed",function(a){return o.filenameLengthExceed(a)})("fileSizeExceed",function(a){return o.fileSizeExceed(a)}),e.qZA()),2&t&&e.Q6J("dataSource",o.dataSource)("maxFilenameLength",20)("mimeTypes",o.mimeTypes)("fileTypes",o.fileTypes)("itemsPerPage",o.itemsPerPage)},dependencies:[J,Z,Wo.$],encapsulation:2}),n})();class Vo extends B{fetch(l){return super.fetch(l).pipe((0,P.g)(300))}}let Ko=(()=>{class n{constructor(t){this._http=t,this.itemsPerPage=[{label:5,default:!1},{label:10,default:!0},{label:15,default:!1},{label:20,default:!1}],this.mimeTypes=["image/png","image/jpeg"],this.fileTypes=["jpg","png","bmp"],this.dataSource=new F(new B(t))}typeMismatch({source:t,payload:o}){console.log("typeMismatch",t,o)}filenameLengthExceed({source:t,payload:o}){console.log("filenameLengthExceed",t,o)}fileSizeExceed({source:t,payload:o}){console.log("fileSizeExceed",t,o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fdp-upload-collection-readonly-example"]],standalone:!0,features:[e.jDz],decls:1,vars:6,consts:[["maxFileSize","1mb",3,"dataSource","maxFilenameLength","readonly","mimeTypes","fileTypes","itemsPerPage","typeMismatch","filenameLengthExceed","fileSizeExceed"]],template:function(t,o){1&t&&(e.TgZ(0,"fdp-upload-collection",0),e.NdJ("typeMismatch",function(a){return o.typeMismatch(a)})("filenameLengthExceed",function(a){return o.filenameLengthExceed(a)})("fileSizeExceed",function(a){return o.fileSizeExceed(a)}),e.qZA()),2&t&&e.Q6J("dataSource",o.dataSource)("maxFilenameLength",20)("readonly",!0)("mimeTypes",o.mimeTypes)("fileTypes",o.fileTypes)("itemsPerPage",o.itemsPerPage)},dependencies:[J,Z],encapsulation:2}),n})(),Xo=(()=>{class n{constructor(t){this._http=t,this.itemsPerPage=[{label:5,default:!1},{label:10,default:!0},{label:15,default:!1},{label:20,default:!1}],this.mimeTypes=["image/png","image/jpeg"],this.fileTypes=["jpg","png","bmp"],this.dataSource=new F(new B(t))}typeMismatch({source:t,payload:o}){console.log("typeMismatch",t,o)}filenameLengthExceed({source:t,payload:o}){console.log("filenameLengthExceed",t,o)}fileSizeExceed({source:t,payload:o}){console.log("fileSizeExceed",t,o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fdp-upload-collection-turn-off-example"]],standalone:!0,features:[e.jDz],decls:1,vars:7,consts:[["maxFileSize","1mb",3,"dataSource","maxFilenameLength","showSearch","enablePagination","mimeTypes","fileTypes","itemsPerPage","typeMismatch","filenameLengthExceed","fileSizeExceed"]],template:function(t,o){1&t&&(e.TgZ(0,"fdp-upload-collection",0),e.NdJ("typeMismatch",function(a){return o.typeMismatch(a)})("filenameLengthExceed",function(a){return o.filenameLengthExceed(a)})("fileSizeExceed",function(a){return o.fileSizeExceed(a)}),e.qZA()),2&t&&e.Q6J("dataSource",o.dataSource)("maxFilenameLength",20)("showSearch",!1)("enablePagination",!1)("mimeTypes",o.mimeTypes)("fileTypes",o.fileTypes)("itemsPerPage",o.itemsPerPage)},dependencies:[J,Z],encapsulation:2}),n})();const z="platform-upload-collection-base-data-provider.ts";let dn=(()=>{class n{constructor(){this.uploadCollection=[{language:"html",code:(0,p.H8)("platform-upload-collection-example.component.html"),fileName:"upload-collection-example",name:"Html"},{language:"typescript",code:(0,p.H8)("platform-upload-collection-example.component.ts"),fileName:"upload-collection-example",component:"UploadCollectionExampleComponent",name:"Component"},{language:"typescript",code:(0,p.H8)(z),fileName:"upload-collection-base",component:"UploadCollectionBaseService",name:"DataProvider"}],this.uploadCollectionReadOnly=[{language:"html",code:(0,p.H8)("platform-upload-collection-readonly-example.component.html"),fileName:"upload-collection-example",name:"Html"},{language:"typescript",code:(0,p.H8)("platform-upload-collection-readonly-example.component.ts"),fileName:"upload-collection-example",component:"UploadCollectionExampleComponent",name:"Component"},{language:"typescript",code:(0,p.H8)(z),fileName:"upload-collection-base",component:"UploadCollectionBaseService",name:"DataProvider"}],this.uploadCollectionDisabled=[{language:"html",code:(0,p.H8)("platform-upload-collection-disabled-example.component.html"),fileName:"upload-collection-disabled-example",name:"Html"},{language:"typescript",code:(0,p.H8)("platform-upload-collection-disabled-example.component.ts"),fileName:"upload-collection-disabled-example",component:"UploadCollectionExampleComponent",name:"Component"},{language:"typescript",code:(0,p.H8)(z),fileName:"upload-collection-base",component:"UploadCollectionBaseService",name:"DataProvider"}],this.uploadCollectionTurnOff=[{language:"html",code:(0,p.H8)("platform-upload-collection-turn-off-example.component.html"),fileName:"upload-collection-disabled-example",name:"Html"},{language:"typescript",code:(0,p.H8)("platform-upload-collection-turn-off-example.component.ts"),fileName:"upload-collection-disabled-example",component:"UploadCollectionExampleComponent",name:"Component"},{language:"typescript",code:(0,p.H8)(z),fileName:"upload-collection-base",component:"UploadCollectionBaseService",name:"DataProvider"}]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-platform-upload-collection"]],standalone:!0,features:[e.jDz],decls:47,vars:4,consts:[["id","default","componentName","upload-collection"],[3,"exampleFiles"],["id","disabled","componentName","upload-collection"],[1,"code-snippet"],["id","readonly","componentName","upload-collection"],["id","without-pagination-and-search","componentName","upload-collection"]],template:function(t,o){1&t&&(e.TgZ(0,"fd-docs-section-title",0),e._uU(1," Default "),e.qZA(),e._UZ(2,"description"),e.TgZ(3,"component-example"),e._UZ(4,"fdp-upload-collection-example"),e.qZA(),e._UZ(5,"code-example",1),e.TgZ(6,"fd-docs-section-title",2),e._uU(7," Disabled State "),e.qZA(),e.TgZ(8,"description"),e._uU(9,"Use "),e.TgZ(10,"code",3),e._uU(11,'[disable]="true"'),e.qZA(),e._uU(12," to disable all CRUD buttons."),e.qZA(),e.TgZ(13,"component-example"),e._UZ(14,"fdp-upload-collection-disabled-example"),e.qZA(),e._UZ(15,"code-example",1),e.TgZ(16,"fd-docs-section-title",4),e._uU(17," Readonly State "),e.qZA(),e.TgZ(18,"description"),e._uU(19,"Use "),e.TgZ(20,"code",3),e._uU(21,'[readonly]="true"'),e.qZA(),e._uU(22," to hide all CRUD buttons."),e.qZA(),e.TgZ(23,"component-example"),e._UZ(24,"fdp-upload-collection-readonly-example"),e.qZA(),e._UZ(25,"code-example",1),e.TgZ(26,"fd-docs-section-title",5),e._uU(27," Without Pagination and Search\n"),e.qZA(),e.TgZ(28,"description"),e._uU(29," Use "),e.TgZ(30,"code",3),e._uU(31,'[showSearch]="false"'),e.qZA(),e._uU(32," to hide search input, by default "),e.TgZ(33,"code",3),e._uU(34,'[showSearch]="true"'),e.qZA(),e._uU(35,". "),e._UZ(36,"br"),e._uU(37," Use "),e.TgZ(38,"code",3),e._uU(39,'[enablePagination]="false"'),e.qZA(),e._uU(40," to hide pagination, by default "),e.TgZ(41,"code",3),e._uU(42,'[enablePagination]="true"'),e.qZA(),e._uU(43,".\n"),e.qZA(),e.TgZ(44,"component-example"),e._UZ(45,"fdp-upload-collection-turn-off-example"),e.qZA(),e._UZ(46,"code-example",1)),2&t&&(e.xp6(5),e.Q6J("exampleFiles",o.uploadCollection),e.xp6(10),e.Q6J("exampleFiles",o.uploadCollectionDisabled),e.xp6(10),e.Q6J("exampleFiles",o.uploadCollectionReadOnly),e.xp6(21),e.Q6J("exampleFiles",o.uploadCollectionTurnOff))},dependencies:[p.kZ,p.we,p.OZ,Go,p.ED,$o,Ko,Xo],encapsulation:2}),n})()}}]);