"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[42351],{20198:(W,O,t)=>{t.d(O,{g:()=>f});var d=t(49671),r=t(77342),p=t(2459),v=t(48180),C=t(38438),S=t(9456),l=t(65879);let f=(()=>{class y extends p.Ze{constructor(o,c,_){var g;super(),g=this,this._dialogService=o,this._smartFilterBarService=c,this._injector=_,this.openConditionsDialog=()=>{const e=this.getField().value;var j;this._dialogService.open(S.e,{data:{header:this.formItem.message,dataType:this.formItem.guiOptions?.additionalData.dataType,filterType:this.formItem.guiOptions?.additionalData.type,conditions:e||[],choices:this.formItem.guiOptions?.additionalData.choices,controlType:this.formItem.guiOptions?.additionalData.controlType},width:"67.5rem",minHeight:"30%"},this._injector).afterClosed.pipe((0,v.q)(1)).subscribe({next:(j=(0,d.Z)(function*(V){const i=g.getField(),E=yield g._smartFilterBarService.getConditionFieldSelectedVariants(g.formItem,V);i.setValue(E)}),function(i){return j.apply(this,arguments)}),error:j=>{}})}}getField(){return this.form.get(`${this.formGroupName}.${this.name}`)}}return y.\u0275fac=function(o){return new(o||y)(l.Y36(r.xA),l.Y36(C.Q),l.Y36(l.zs3))},y.\u0275dir=l.lG2({type:y,features:[l.qOj]}),y})()},72798:(W,O,t)=>{t.d(O,{v:()=>y});var d=t(60095),r=t(77342),p=t(17884),v=t(2459),C=t(38438),S=t(20198),l=t(65879);const f=function(){return[]};let y=(()=>{class T extends S.g{constructor(c,_,g){super(c,_,g)}}return T.\u0275fac=function(c){return new(c||T)(l.Y36(r.xA),l.Y36(C.Q),l.Y36(l.zs3))},T.\u0275cmp=l.Xpm({type:T,selectors:[["fdp-smart-filter-bar-condition-field"]],standalone:!0,features:[l.qOj,l.jDz],decls:4,vars:13,consts:[[3,"formGroup"],[3,"formGroupName"],["displayKey","displayValue",3,"id","addOnButtonClickFn","autofocus","dataSource","formControlName","name","placeholder","glyphAriaLabel"]],template:function(c,_){1&c&&(l.ynx(0,0)(1,1),l._UZ(2,"fdp-multi-input",2),l.ALo(3,"fdTranslate"),l.BQk()()),2&c&&(l.Q6J("formGroup",_.form),l.xp6(1),l.Q6J("formGroupName",_.formGroupName),l.xp6(1),l.Q6J("id",_.id)("addOnButtonClickFn",_.openConditionsDialog)("autofocus",!0)("dataSource",_.formItem.choices||l.DdM(12,f))("formControlName",_.name)("name",_.name)("placeholder",_.formItem.placeholder||_.formItem.message)("glyphAriaLabel",l.lcZ(3,10,"platformSmartFilterBar.manageFieldConditions")))},dependencies:[d.u5,d.JJ,d.JL,d.UX,d.sg,d.u,d.x0,v.OZ,p.ni],encapsulation:2}),T})()},9456:(W,O,t)=>{t.d(O,{e:()=>i});var d=t(96814),r=t(60095),p=t(64751),v=t(93793),C=t(47741),S=t(77342),l=t(70479),f=t(44321),y=t(17884),T=t(42788),o=t(2459),c=t(70014),_=t(37387),g=t(38438),e=t(65879);function P(E,G){if(1&E&&(e.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),e._uU(3),e.qZA()()()),2&E){const m=e.oxw();e.xp6(2),e.Q6J("headerSize",4),e.xp6(1),e.Oqu(m.config.header)}}function Z(E,G){if(1&E){const m=e.EpF();e.TgZ(0,"fd-layout-grid")(1,"div",9)(2,"div",10)(3,"fdp-form-generator",13),e.NdJ("formSubmitted",function(b){e.CHM(m);const U=e.oxw(2);return e.KtG(U._onFormSubmitted(b))}),e.qZA()(),e.TgZ(4,"div",14)(5,"fdp-button",15),e.NdJ("click",function(){const U=e.CHM(m).index,N=e.oxw(2);return e.KtG(N.removeCondition(U))}),e.ALo(6,"fdTranslate"),e.qZA()()()()}if(2&E){const m=G.$implicit;e.xp6(3),e.Q6J("formItems",m)("unifiedLayout",!1)("noAdditionalContent",!0),e.xp6(2),e.Q6J("title",e.lcZ(6,4,"platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle"))}}function j(E,G){if(1&E){const m=e.EpF();e.TgZ(0,"form"),e.YNc(1,Z,7,6,"fd-layout-grid",8),e.TgZ(2,"fd-layout-grid")(3,"div",9)(4,"div",10),e._uU(5,"\xa0"),e.qZA(),e.TgZ(6,"div",11)(7,"fdp-button",12),e.NdJ("click",function(){e.CHM(m);const b=e.oxw();return e.KtG(b.addCondition())}),e.ALo(8,"fdTranslate"),e.qZA()()()()()}if(2&E){const m=e.oxw();e.xp6(1),e.Q6J("ngForOf",m._formItems),e.xp6(6),e.Q6J("label",e.lcZ(8,2,"platformSmartFilterBar.defineConditionsAddConditionButtonLabel"))}}function V(E,G){1&E&&(e.TgZ(0,"div"),e._UZ(1,"fd-busy-indicator",16),e.qZA()),2&E&&(e.Udp("text-align","center")("margin",1,"rem"),e.xp6(1),e.Q6J("loading",!0))}let i=(()=>{class E{constructor(m,h,b){this._dialogRef=m,this._cdr=h,this._smartFilterBarService=b,this.conditionOperatorOptions=[],this._formItems=[],this.loaded=!1,this._conditionLabelKeys={contains:"filterConditionContains",equalTo:"filterConditionEqualTo",between:"filterConditionBetween",beginsWith:"filterConditionBeginsWith",endsWith:"filterConditionEndsWith",lessThan:"filterConditionLessThan",lessThanOrEqualTo:"filterConditionLessThanOrEqualTo",greaterThan:"filterConditionGreaterThan",greaterThanOrEqualTo:"filterConditionGreaterThanOrEqualTo",after:"filterConditionAfter",onOrAfter:"filterConditionOnOrAfter",before:"filterConditionBefore",beforeOrOn:"filterConditionBeforeOrOn"},this._submittedForms=[],this.resolveTranslation=(0,y.rg)(),this._init()}_init(){this.config=this._dialogRef.data,this.conditionOperatorOptions=this._getApplicableConditionOperators(),this._addExistingConditions((0,_.T)(this.config.conditions)),0===this.config.conditions.length&&this.addCondition(),this.loaded=!0,this._cdr.markForCheck()}addCondition(){this._formItems.push(this._generateFormGeneratorItems())}removeCondition(m){this._formItems.splice(m,1),0===this._formItems.length&&this.addCondition()}applyConditions(){this._cdr.detectChanges(),this._submittedForms=[],this.formGenerators.toArray().forEach(m=>m.submit())}_onFormSubmitted(m){if(this._submittedForms.push(m),this._submittedForms.length!==this.formGenerators.length)return;const h=this._submittedForms.map(b=>(b.value=void 0!==b.value1?b.value1:b.value,b));this._dialogRef.close(h.filter(b=>null!=b.value))}_cancel(){this._dialogRef.dismiss()}_getApplicableConditionOperators(){const m=this._smartFilterBarService.getApplicableFilterConditions(this.config.filterType,this.config.dataType),h={...this._conditionLabelKeys};for(const b of Object.keys(this._conditionLabelKeys))h[b]=this.resolveTranslation("platformSmartFilterBar."+h[b]);return m.map(b=>({label:h[b],value:b}))}_addExistingConditions(m){m.forEach(h=>{const b=this._generateFormGeneratorItems(h);this._formItems.push(b)})}_generateFormGeneratorItems(m){return[{name:"operator",message:"operator",default:m?this.conditionOperatorOptions.find(h=>h.value===m.operator)?.value:this.conditionOperatorOptions[0].value,type:"select",choices:this.conditionOperatorOptions,required:!0,guiOptions:{inline:!1,column:1,noLabelLayout:!0}},{name:"value",message:"value",default:m?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this.resolveTranslation("platformSmartFilterBar.filterConditionValuePlaceholder"),controlType:this.config.controlType,when:h=>h.operator!==c.dh.BETWEEN,onchange:(h,b,U)=>{U.parent?.get("value1")?.setValue(h,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value1",message:"value1",default:m?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this.resolveTranslation("platformSmartFilterBar.filterConditionValueFromPlaceholder"),controlType:this.config.controlType,when:h=>h.operator===c.dh.BETWEEN,onchange:(h,b,U)=>{U.parent?.get("value")?.setValue(h,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value2",message:"value2",default:m?.value2,type:this.config.filterType,choices:this.config.choices,placeholder:this.resolveTranslation("platformSmartFilterBar.filterConditionValueToPlaceholder"),required:!0,controlType:this.config.controlType,when:h=>h?.operator===c.dh.BETWEEN,guiOptions:{inline:!1,column:3,noLabelLayout:!0}}]}}return E.\u0275fac=function(m){return new(m||E)(e.Y36(S.zj),e.Y36(e.sBO),e.Y36(g.Q))},E.\u0275cmp=e.Xpm({type:E,selectors:[["fdp-smart-filter-bar-conditions-dialog"]],viewQuery:function(m,h){if(1&m&&e.Gf(o.CI,5),2&m){let b;e.iGM(b=e.CRH())&&(h.formGenerators=b)}},standalone:!0,features:[e.jDz],decls:12,vars:8,consts:[[1,"fdp-smart-filter-bar__conditions-dialog"],["fdkTemplate","header"],[4,"ngIf","ngIfElse"],["fdType","emphasized",3,"label","click"],["fdType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],[4,"ngFor","ngForOf"],["fdLayoutGridRow",""],["colGrow","","fdLayoutGridCol",""],["fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],[3,"label","click"],["columnLayout","XL3-L3-M3-S3",3,"formItems","unifiedLayout","noAdditionalContent","formSubmitted"],["colGrow","","fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],["buttonType","transparent","glyph","decline","type","button",3,"title","click"],[3,"loading"]],template:function(m,h){if(1&m&&(e.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),e.YNc(2,P,4,2,"ng-template",1),e.qZA(),e.TgZ(3,"fd-dialog-body"),e.YNc(4,j,9,4,"form",2),e.qZA(),e.TgZ(5,"fd-dialog-footer")(6,"fd-button-bar",3),e.NdJ("click",function(){return h.applyConditions()}),e.ALo(7,"fdTranslate"),e.qZA(),e.TgZ(8,"fd-button-bar",4),e.NdJ("click",function(){return h._cancel()}),e.ALo(9,"fdTranslate"),e.qZA()()(),e.YNc(10,V,2,5,"ng-template",null,5,e.W1O)),2&m){const b=e.MAs(11);e.xp6(4),e.Q6J("ngIf",h.loaded)("ngIfElse",b),e.xp6(2),e.Q6J("label",e.lcZ(7,4,"platformSmartFilterBar.defineConditionsSubmitButtonLabel")),e.xp6(2),e.Q6J("label",e.lcZ(9,6,"platformSmartFilterBar.defineConditionsCancelButton"))}},dependencies:[S.au,S.A6,p.S3k,v.br,v.JW,f.r,S.Hy,d.O5,r.u5,r._Y,r.JL,r.F,d.ax,l.qU,l.IG,l.qD,o.CI,T.r0,S.gx,v.N3,C.Bw,y.ni],encapsulation:2,changeDetection:0}),E})()},83108:(W,O,t)=>{t.d(O,{l:()=>N});var d=t(49671),r=t(78645),p=t(65619),v=t(16321),C=t(24036),S=t(43093),l=t(59773),f=t(77342),y=t(2459),T=t(70014),o=t(96814),c=t(64751),_=t(93793),g=t(47741),e=t(33764),P=t(44321),Z=t(17884),j=t(71657);class V extends T.aF{constructor(B){super(B)}filter(B){let s;switch(B){case"visible":s=this._getVisibleItems();break;case"active":s=this._getActiveItems();break;case"visibleAndActive":s=this._getVisibleAndActiveItems();break;case"mandatory":s=this._getMandatoryItems();break;default:s=this._getAllItems()}this.items$.next(s)}_getAllItems(){return this.items}_getVisibleItems(){return this.items.filter(B=>B.visible)}_getActiveItems(){return this.items.filter(B=>B.active)}_getVisibleAndActiveItems(){return this.items.filter(B=>B.visible||B.active)}_getMandatoryItems(){return this.items.filter(B=>B.mandatory)}}var i=t(65879);const E=["table"];function G(D,B){1&D&&(i.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),i._uU(3),i.ALo(4,"fdTranslate"),i.qZA()()(),i.TgZ(5,"div",8)(6,"fd-bar-element"),i._UZ(7,"fdp-table-reset-button"),i.qZA()()),2&D&&(i.xp6(2),i.Q6J("headerSize",4),i.xp6(1),i.hij(" ",i.lcZ(4,2,"platformSmartFilterBar.selectFiltersHeader")," "))}function m(D,B){1&D&&i._UZ(0,"fd-icon",17)}function h(D,B){if(1&D&&(i.TgZ(0,"fdp-table-cell"),i.YNc(1,m,1,0,"fd-icon",16),i.qZA()),2&D){const s=B.$implicit;i.xp6(1),i.Q6J("ngIf",s.active)}}function b(D,B){if(1&D){const s=i.EpF();i.TgZ(0,"fdp-table",9,10),i.NdJ("rowSelectionChange",function(A){i.CHM(s);const Q=i.oxw();return i.KtG(Q._onRowSelectionChange(A))}),i.TgZ(2,"fdp-table-toolbar",11),i.ALo(3,"fdTranslate"),i.TgZ(4,"fdp-table-toolbar-actions")(5,"fdp-select",12),i.NdJ("selectionChange",function(A){i.CHM(s);const Q=i.oxw();return i.KtG(Q._onFilterVisibilityChange(A))}),i.qZA()()(),i._UZ(6,"fdp-column",13),i.ALo(7,"fdTranslate"),i.TgZ(8,"fdp-column",14),i.ALo(9,"fdTranslate"),i.YNc(10,h,2,1,"fdp-table-cell",15),i.qZA()()}if(2&D){const s=i.oxw();i.Q6J("dataSource",s.source),i.xp6(2),i.Q6J("hideItemCount",!1)("title",i.lcZ(3,7,"platformSmartFilterBar.selectFiltersAvailableFiltersText")),i.xp6(3),i.Q6J("list",s._filterVisibilityOptions)("value",s._filterVisibilityOptions[0].value),i.xp6(1),i.Q6J("label",i.lcZ(7,9,"platformSmartFilterBar.selectFiltersFilterColumnLabel")),i.xp6(2),i.Q6J("label",i.lcZ(9,11,"platformSmartFilterBar.selectFiltersActiveColumnLabel"))}}function U(D,B){1&D&&(i.TgZ(0,"div"),i._UZ(1,"fd-busy-indicator",18),i.qZA()),2&D&&(i.Udp("text-align","center")("margin",1,"rem"),i.xp6(1),i.Q6J("loading",!0))}let N=(()=>{class D{constructor(s,M,A){this._dialogRef=s,this._language$=M,this._cdr=A,this._filterVisibilityOptions=[],this.loaded=!1,this._categoryLabelKeys={all:"settingsCategoryAll",visible:"settingsCategoryVisible",active:"settingsCategoryActive",visibleAndActive:"settingsCategoryVisibleAndActive",mandatory:"settingsCategoryMandatory"},this._selectedFilters=[],this._onDestroy$=new r.x,this._isResetAvailableSubject$=new p.X(!1),this._translationResolver=new Z.en,this.isResetAvailable$=this._isResetAvailableSubject$.asObservable(),this.setInitialTableState(),this._init()}ngAfterViewInit(){this.setSelectedFilters()}setSelectedFilters(){this._sourceSubscription?.unsubscribe(),this._sourceSubscription=this.source.open().pipe((0,S.Q)(v.z),(0,l.R)(this._onDestroy$)).subscribe(s=>{s.forEach((M,A)=>{M.visible&&this.table.toggleSelectableRow(A)})})}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete()}reset(){this.setInitialTableState(),this.setSelectedFilters()}setInitialTableState(){this._availableFields=this._dialogRef.data.fields.filter(s=>s.filterable).map(s=>({label:s.label,active:!!this._dialogRef.data.filterBy.find(M=>M.field===s.name),mandatory:s.required,visible:this._dialogRef.data.selectedFilters.includes(s.name),key:s.key,name:s.name})),this.source=new T.Gl(new V(this._availableFields))}_cancel(){this._dialogRef.dismiss()}_confirm(){this._dialogRef.close(this._selectedFilters)}_onRowSelectionChange(s){this._selectedFilters=s.selection.map(M=>M.name),this._isResetAvailableSubject$.next(!0)}_onFilterVisibilityChange(s){this.table&&(this.source.dataProvider.filter(s.payload),this.source.fetch(this.table.getTableState()))}_init(){var s=this;return(0,d.Z)(function*(){yield s._transformVisibilityLabels(),s.loaded=!0,s._cdr.markForCheck()})()}_transformVisibilityLabels(){var s=this;return(0,d.Z)(function*(){const M=yield(0,C.z)(s._language$),A={...s._categoryLabelKeys};for(const Q in A)Object.prototype.hasOwnProperty.call(A,Q)&&(A[Q]=s._translationResolver.resolve(M,"platformSmartFilterBar."+A[Q]));for(const[Q,Y]of Object.entries(A))s._filterVisibilityOptions.push({label:Y,value:Q})})()}}return D.\u0275fac=function(s){return new(s||D)(i.Y36(f.zj),i.Y36(Z.iC),i.Y36(i.sBO))},D.\u0275cmp=i.Xpm({type:D,selectors:[["fdp-smart-filter-bar-settings-dialog"]],viewQuery:function(s,M){if(1&s&&i.Gf(E,5),2&s){let A;i.iGM(A=i.CRH())&&(M.table=A.first)}},standalone:!0,features:[i._Bn([{provide:T.uI,useExisting:D}]),i.jDz],decls:12,vars:8,consts:[[1,"fdp-table-p13-filtering-dialog"],["fdkTemplate","header"],["selectionMode","multiple",3,"dataSource","rowSelectionChange",4,"ngIf","ngIfElse"],["fdType","emphasized",3,"label","click"],["fdType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],["fd-bar-right",""],["selectionMode","multiple",3,"dataSource","rowSelectionChange"],["table",""],[3,"hideItemCount","title"],[3,"list","value","selectionChange"],["align","start","key","label","name","label",3,"label"],["align","center","key","active","name","active","width","150px",3,"label"],[4,"fdpCellDef"],["glyph","accept",4,"ngIf"],["glyph","accept"],[3,"loading"]],template:function(s,M){if(1&s&&(i.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),i.YNc(2,G,8,4,"ng-template",1),i.qZA(),i.TgZ(3,"fd-dialog-body"),i.YNc(4,b,11,13,"fdp-table",2),i.qZA(),i.TgZ(5,"fd-dialog-footer")(6,"fd-button-bar",3),i.NdJ("click",function(){return M._confirm()}),i.ALo(7,"fdTranslate"),i.qZA(),i.TgZ(8,"fd-button-bar",4),i.NdJ("click",function(){return M._cancel()}),i.ALo(9,"fdTranslate"),i.qZA()()(),i.YNc(10,U,2,5,"ng-template",null,5,i.W1O)),2&s){const A=i.MAs(11);i.xp6(4),i.Q6J("ngIf",M.loaded)("ngIfElse",A),i.xp6(2),i.Q6J("label",i.lcZ(7,4,"platformSmartFilterBar.selectFiltersSubmitButtonLabel")),i.xp6(2),i.Q6J("label",i.lcZ(9,6,"platformSmartFilterBar.selectFiltersCancelButton"))}},dependencies:[f.au,f.A6,c.S3k,_.br,_.JW,P.r,_.Mq,T.xz,f.Hy,o.O5,T.ac,j.wy,T.UR,T.IW,y.Hr,T.Z8,j.y_,j.tY,e.IconComponent,f.gx,_.N3,g.Bw,Z.ni],encapsulation:2,changeDetection:0}),D})()},68073:(W,O,t)=>{t.d(O,{m:()=>v});var d=t(42495),p=(t(70014),t(65879));let v=(()=>{class C{constructor(){this.conditionStrategy="or",this._smartFilterBarFilterable=!0,this._required=!1,this._defaultSelected=!1,this._hasOptions=!1}set smartFilterBarFilterable(l){this._smartFilterBarFilterable=(0,d.Ig)(l)}get smartFilterBarFilterable(){return this._smartFilterBarFilterable}set required(l){this._required=(0,d.Ig)(l)}get required(){return this._required}set defaultSelected(l){this._defaultSelected=(0,d.Ig)(l)}get defaultSelected(){return this._defaultSelected}set hasOptions(l){this._hasOptions=(0,d.Ig)(l)}get hasOptions(){return this._hasOptions}}return C.\u0275fac=function(l){return new(l||C)},C.\u0275dir=p.lG2({type:C,selectors:[["","fdpSmartFilterBarFieldDefinition",""],["","fdp-smart-filter-bar-field-definition",""]],inputs:{key:"key",name:"name",label:"label",filterType:"filterType",dataType:"dataType",customFilterType:"customFilterType",conditionStrategy:"conditionStrategy",smartFilterBarFilterable:"smartFilterBarFilterable",required:"required",defaultSelected:"defaultSelected",hasOptions:"hasOptions"},standalone:!0}),C})()},63621:(W,O,t)=>{t.d(O,{O:()=>C});var d=t(70014),r=t(65619),p=t(68073),v=t(65879);let C=(()=>{class S{constructor(f){this._subject=f,this._fieldDefinitionsSubject=new r.X([]),this.fieldsStream=this._fieldDefinitionsSubject.asObservable()}ngAfterViewInit(){this._fieldDefinitionsSubject.next(this._fieldDefinitions.toArray().map(f=>this._transformSubjectField(f))),this._fieldDefinitions.changes.subscribe(f=>{this._fieldDefinitionsSubject.next(f.map(y=>this._transformSubjectField(y)))})}getDataSource(){return this._subject.getDataSource()}getSubjectFields(){return this._fieldDefinitions.toArray().map(f=>this._transformSubjectField(f))}getFieldVariants(f){return this.getDataSource().dataProvider.getFieldOptions(f)}getDefaultFields(){return this.getSubjectFields()?.filter(f=>f.defaultSelected).map(f=>f.name)}getState(){return this._subject.getTableState()}getSubject(){return this._subject}_transformSubjectField(f){return{key:f.key,name:f.name,label:f.label,filterType:f.filterType,filterable:f.smartFilterBarFilterable,dataType:f.dataType,required:f.required,customFilterType:f.customFilterType,defaultSelected:f.defaultSelected,hasOptions:f.hasOptions,conditionStrategy:f.conditionStrategy}}}return S.\u0275fac=function(f){return new(f||S)(v.Y36(d.iA))},S.\u0275dir=v.lG2({type:S,selectors:[["","fdpSmartFilterBarSubject",""],["","fdp-smart-filter-bar-subject",""]],contentQueries:function(f,y,T){if(1&f&&v.Suo(T,p.m,4),2&f){let o;v.iGM(o=v.CRH())&&(y._fieldDefinitions=o)}},exportAs:["fdp-smart-filter-bar-subject"],standalone:!0}),S})()},48448:(W,O,t)=>{t.d(O,{G:()=>r});var d=t(65879);let r=(()=>{class p{constructor(C){this.templateRef=C}}return p.\u0275fac=function(C){return new(C||p)(d.Y36(d.Rgc))},p.\u0275dir=d.lG2({type:p,selectors:[["","fdpSmartFilterBarToolbarItem",""]],standalone:!0}),p})()},37387:(W,O,t)=>{t.d(O,{T:()=>r});var d=t(62303);function r(p){return Array.isArray(p)&&(p=p.map(v=>r(v))),(0,d.UL)(p)?p.value:p}},42351:(W,O,t)=>{t.d(O,{gR:()=>c.g,TR:()=>T,Bi:()=>d.B,mm:()=>C.m,QX:()=>o.Q,O8:()=>S.O,ij:()=>g});var d=t(93768),r=t(72798),p=t(9456),v=t(83108),C=t(68073),S=t(63621),f=(t(48448),t(65879));let T=(()=>{class e{}return e.\u0275fac=function(Z){return new(Z||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[d.B,v.l,p.e,r.v]}),e})();var o=t(38438),c=t(20198);const g={provide:t(42008).j,useExisting:(0,f.Gpc)(()=>d.B)}},42008:(W,O,t)=>{t.d(O,{j:()=>r});var d=t(65879);let r=(()=>{class p{constructor(){this.name="platformSmartFilterBar",this.presetChanged=new d.vpe}}return p.\u0275fac=function(C){return new(C||p)},p.\u0275dir=d.lG2({type:p,inputs:{name:"name"},outputs:{presetChanged:"presetChanged"}}),p})()},93768:(W,O,t)=>{t.d(O,{B:()=>$});var d=t(49671),r=t(65879),p=t(60095),v=t(47394),C=t(65619),S=t(32181),l=t(83620),f=t(24036),y=t(48180),T=t(37398),o=t(77342),c=t(2459),_=t(62303),g=t(70014),e=t(42495),P=t(96814),Z=t(71993),j=t(94716),V=t(17884),i=t(42788),E=t(27208),G=t(72798),m=t(83108);const h="smart-filter-condition-renderer";t(63621);var U=t(48448),N=t(37387),D=t(42008),B=t(38438);function s(I,K){}function M(I,K){if(1&I&&(r.ynx(0),r.YNc(1,s,0,0,"ng-template",10),r._UZ(2,"fd-toolbar-separator"),r.BQk()),2&I){const a=K.$implicit;r.xp6(1),r.Q6J("ngTemplateOutlet",a)}}function A(I,K){if(1&I&&(r.ynx(0),r.YNc(1,M,3,1,"ng-container",9),r.BQk()),2&I){const a=r.oxw();r.xp6(1),r.Q6J("ngForOf",a._toolbarItems)}}function Q(I,K){if(1&I){const a=r.EpF();r.TgZ(0,"fdp-button",11),r.NdJ("click",function(){r.CHM(a);const u=r.oxw();return r.KtG(u.submitForm())}),r.ALo(1,"fdTranslate"),r.qZA()}if(2&I){const a=r.oxw();r.Q6J("disabled",a._loading)("label",r.lcZ(1,2,"platformSmartFilterBar.submitButtonLabel"))}}const Y=function(I){return{filtersCount:I}},X={responsivePadding:!0,verticalPadding:!0,minWidth:"30rem",bodyMinHeight:"calc(50vh - 88px)"},k={provide:D.j,useExisting:(0,r.Gpc)(()=>$)};let $=(()=>{class I extends D.j{set subject(a){this._setSubject(a)}get subject(){return this._subject}set transparent(a){this._transparent=(0,e.Ig)(a)}get transparent(){return this._transparent}get _loading(){return!this._subject?.getDataSource()||this._subject.getDataSource().isDataLoading}constructor(a,n,u,F,x,R){super(),this._dialogService=a,this._cdr=n,this._smartFilterBarService=u,this._fgService=F,this._injector=x,this._destroyRef=R,this.filtersColumnLayout="XL4-L3-M2-S1",this.liveUpdate=!1,this.smartFiltersChanged=new r.vpe,this.smartFiltersApplied=new r.vpe,this.searchInputChanged=new r.vpe,this.filterBy=[],this._toolbarItems=[],this._selectedFilters=[],this._showFilterBar=!0,this._subscriptions=new v.w0,this._subjectSubscriptions=new v.w0,this._transparent=!1,this._formGeneratorReady=new C.X(!1),this._ignorePresetChange=!1,this._fgService.addComponent(G.v,[h])}ngAfterViewInit(){this._toolbarItems=this._toolbarItemRefs.toArray().map(a=>a.templateRef),this._toolbarItemRefs.changes.subscribe(()=>{this._toolbarItems=this._toolbarItemRefs.toArray().map(a=>a.templateRef)})}ngOnDestroy(){this._subscriptions.unsubscribe(),this._unsubscribeFromSubject()}getDisplayValue(a,n){var u=this;return(0,d.Z)(function*(){return u._smartFilterBarService.getDisplayValue(a,n)})()}showFilteringSettings(){const n={fields:this._getSubjectDefinitions(),filterBy:this.filterBy,selectedFilters:this._selectedFilters};this._dialogService.open(m.l,{...X,disablePaddings:!0,width:"50rem",data:n},this._injector).afterClosed.pipe((0,y.q)(1)).subscribe(F=>{this._setSelectedFilters(F)})}_onSearchInputChange(a){this.search=a,this.searchInputChanged.emit(a)}_cancelSearch(){this.search=void 0,this.liveUpdate&&this.submitForm()}submitForm(){this._formGenerator.submit()}setPreset(a){var n=this;return(0,d.Z)(function*(){n._ignorePresetChange=!0,a.filterBy=a.filterBy||[],n.filterBy=a.filterBy,n.search=a.search,n._formGeneratorReady.pipe((0,S.h)(u=>u)).subscribe((0,d.Z)(function*(){n._fgService.resetForm(n._formGenerator.form);for(const F of n.filterBy){const x=n._fgService.getFormControl(n._formGenerator.form,F.field);if(!x)continue;const R=x.formItem,L=n._smartFilterBarService.transformCollectionFilter(F),J=yield n._smartFilterBarService.getConditionFieldSelectedVariants(R,L);x?.setValue(J)}n._setSelectedFilters(n.filterBy.map(F=>F.field)),n.subject.getDataSource().dataProvider.setFilters(n.filterBy,n.search),n.subject.getSubject().fetch()}))})()}getCurrentPreset(){return{search:this.search,filterBy:this.filterBy}}_onFormSubmitted(a){const n=this._generateCollectionFilterGroups(a);this._applyFiltering(n)}_onFormCreated(){var a=this;this.subject&&this._setSelectedFilters([...this.subject.getDefaultFields(),...this._selectedFilters]),this._formGenerator.form.valueChanges.pipe((0,l.b)(50),(0,Z.sL)(this._destroyRef)).subscribe((0,d.Z)(function*(){const n=yield a.getFormattedConditions();a.smartFiltersChanged.emit({filterBy:n,search:a.search,subject:a.subject}),a.liveUpdate&&a._applyFiltering(n)})),this._formGeneratorReady.next(!0)}_toggleFilterBar(){this._showFilterBar=!this._showFilterBar,this._cdr.markForCheck()}getFormattedConditions(){var a=this;return(0,d.Z)(function*(){const n=yield a._fgService.getFormValue(a._formGenerator.form);return a._generateCollectionFilterGroups(n)})()}_generateCollectionFilterGroups(a){const n=[],u=this._getSubjectDefinitions();return Object.entries(a).filter(([,F])=>!!F).forEach(([F,x])=>{const R=u.find(J=>J.name===F),L={filters:[],strategy:R.conditionStrategy,field:R.key};x.forEach(J=>{L.filters.push({strategy:J.operator,field:R.key,value:J.value,value2:J.value2,type:R.dataType})}),n.push(L)}),n.filter(F=>F.filters?.length>0)}_setSubject(a){a&&(this._subject=a,this.unsubscribeFromSubject(),this._listenToSubjectColumns())}unsubscribeFromSubject(){}_listenToSubjectColumns(){var a=this;this._subjectSubscriptions.add(this._subject.fieldsStream.subscribe(function(){var n=(0,d.Z)(function*(u){setTimeout((0,d.Z)(function*(){yield a._generateForm(u.filter(F=>F.filterable))}))});return function(u){return n.apply(this,arguments)}}()))}_generateForm(a){var n=this;return(0,d.Z)(function*(){const u=[],F=function H(I){return Math.max(...I.split("-").map(K=>{const a=K.match(/\d+/);return a?parseInt(a[0],10):1}))}(n.filtersColumnLayout??"");let x=1;0!==a.length&&(a.forEach(R=>{let L=n._generateBaseFieldItem(R);switch(R.required&&n._selectedFilters.push(R.name),R.filterType){case g.vA.SINGLE:case g.vA.CATEGORY:L.guiOptions.additionalData.type="select",L.guiOptions.inline=!1;break;case g.vA.MULTI:L.guiOptions.additionalData.type="multi-input";break;case g.vA.CUSTOM:L=n._generateCustomFilterFieldItem(R,L);break;default:L=n._generateInputFieldItem(R,L)}L.guiOptions.column=x,x+=1,x>F&&(x=1),u.push(L)}),n._formItems=u,n._cdr.detectChanges())})()}_generateCustomFilterFieldItem(a,n){return a.customFilterType&&(n.guiOptions.additionalData.type=a.customFilterType,n.guiOptions.additionalData=Object.assign(n.guiOptions.additionalData,this._smartFilterBarService.getCustomFilterConfiguration(a.customFilterType)),n.type=n.guiOptions.additionalData.rendererComponent?`${n.guiOptions.additionalData.type}-renderer`:n.type,n.transformer=n.guiOptions.additionalData.valueTransformer),n}_generateInputFieldItem(a,n){switch(a.dataType){case g.g.DATE:n.guiOptions.additionalData.type="datepicker";break;case g.g.NUMBER:n.guiOptions.additionalData.controlType="number";break;default:n.guiOptions.additionalData.controlType="text"}return n}_generateBaseFieldItem(a){return{name:a.name,message:a.label,required:a.required,type:h,placeholder:" ",validators:a.required?[p.kI.required]:[],choices:a.hasOptions?this._getFilterDefaultOptions(a.key,a.filterType):void 0,transformer:n=>(0,N.T)(n),guiOptions:{additionalData:{type:"input",dataType:a.dataType,filterType:a.filterType,controlType:"text",choices:a.hasOptions?this._getFilterAvailableOptions(a.key):void 0}},when:()=>this._selectedFilters.includes(a.name)}}_getFilterAvailableOptions(a){return()=>this._getFieldVariants(a)}_getFilterDefaultOptions(a,n){var u=this;return(0,d.Z)(function*(){const F=yield(0,f.z)(u._getFieldVariants(a).pipe((0,y.q)(1))),x=[];for(const R of F){const L={value:R.value,operator:"equalTo"};L.displayValue=yield u.getDisplayValue(L,n),x.push(L)}return x})}_getFieldVariants(a){return this.subject.getFieldVariants(a).pipe((0,y.q)(1),(0,T.U)(n=>n.filter((u,F)=>n.findIndex(x=>x.value===u.value)===F)))}_getSubjectDefinitions(){return this.subject?.getSubjectFields()||[]}_applyFiltering(a){const n=this.subject.getDataSource();this.filterBy=a,n.dataProvider.setFilters(a,this.search),this.subject.getSubject().fetch();const u={search:this.search,filterBy:this.filterBy};this.smartFiltersApplied.emit({...u,subject:this._subject}),this._ignorePresetChange||this.presetChanged.emit(u),this._ignorePresetChange=!1}_unsubscribeFromSubject(){this._subjectSubscriptions.unsubscribe(),this._subjectSubscriptions=new v.w0}_setSelectedFilters(a){this._selectedFilters=a.filter((n,u)=>a.indexOf(n)===u),this._formGenerator.refreshStepsVisibility()}}return I.\u0275fac=function(a){return new(a||I)(r.Y36(o.xA),r.Y36(r.sBO),r.Y36(B.Q),r.Y36(c.bN),r.Y36(r.zs3),r.Y36(r.ktI))},I.\u0275cmp=r.Xpm({type:I,selectors:[["fdp-smart-filter-bar"]],contentQueries:function(a,n,u){if(1&a&&r.Suo(u,U.G,4),2&a){let F;r.iGM(F=r.CRH())&&(n._toolbarItemRefs=F)}},viewQuery:function(a,n){if(1&a&&r.Gf(c.CI,5),2&a){let u;r.iGM(u=r.CRH())&&(n._formGenerator=u.first)}},hostAttrs:[1,"fdp-smart-filter-bar"],hostVars:2,hostBindings:function(a,n){2&a&&r.ekj("fdp-smart-filter-bar--transparent",n.transparent)},inputs:{subject:"subject",transparent:"transparent",filtersColumnLayout:"filtersColumnLayout",liveUpdate:"liveUpdate"},outputs:{smartFiltersChanged:"smartFiltersChanged",smartFiltersApplied:"smartFiltersApplied",searchInputChanged:"searchInputChanged"},standalone:!0,features:[r._Bn([k,B.Q,c.bN,{provide:_.ID,useExisting:I}]),r.qOj,r.jDz],decls:15,vars:26,consts:[["fdType","transparent"],[4,"ngIf"],[3,"disabled","disableRefresh","placeholder","inputChange","searchSubmit","cancelSearch"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click",4,"ngIf"],["fd-toolbar-item","","glyph","synchronize",3,"disabled","ariaLabel","click"],["fd-toolbar-item","",3,"label","disabled","click"],["buttonType","transparent","fd-toolbar-item","",3,"label","disabled","click"],[1,"fdp-smart-filter-bar__filters",3,"hidden"],[3,"noAdditionalContent","formItems","columnLayout","formCreated","formSubmitted"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click"]],template:function(a,n){1&a&&(r.TgZ(0,"div")(1,"fd-toolbar",0),r.YNc(2,A,2,1,"ng-container",1),r.TgZ(3,"fdp-search-field",2),r.NdJ("inputChange",function(F){return n._onSearchInputChange(F)})("searchSubmit",function(){return n.submitForm()})("cancelSearch",function(){return n._cancelSearch()}),r.ALo(4,"fdTranslate"),r.qZA(),r._UZ(5,"fd-toolbar-spacer"),r.YNc(6,Q,2,4,"fdp-button",3),r.TgZ(7,"fdp-button",4),r.NdJ("click",function(){return n.submitForm()}),r.ALo(8,"fdTranslate"),r.qZA(),r.TgZ(9,"fdp-button",5),r.NdJ("click",function(){return n.showFilteringSettings()}),r.ALo(10,"fdTranslate"),r.qZA(),r.TgZ(11,"fdp-button",6),r.NdJ("click",function(){return n._toggleFilterBar()}),r.ALo(12,"fdTranslate"),r.qZA()()(),r.TgZ(13,"div",7)(14,"fdp-form-generator",8),r.NdJ("formCreated",function(){return n._onFormCreated()})("formSubmitted",function(F){return n._onFormSubmitted(F)}),r.qZA()()),2&a&&(r.xp6(2),r.Q6J("ngIf",n._toolbarItems),r.xp6(1),r.Q6J("disabled",n._loading)("disableRefresh",!0)("placeholder",r.lcZ(4,15,"platformSmartFilterBar.searchPlaceholder")),r.xp6(3),r.Q6J("ngIf",!n.liveUpdate),r.xp6(1),r.Q6J("disabled",n._loading)("ariaLabel",r.lcZ(8,17,"platformSmartFilterBar.refreshButtonAriaLabel")),r.xp6(2),r.Q6J("label",r.xi3(10,19,"platformSmartFilterBar.filtersButtonLabel",r.VKq(24,Y,n._selectedFilters.length)))("disabled",n._loading),r.xp6(2),r.Q6J("label",r.lcZ(12,22,n._showFilterBar?"platformSmartFilterBar.hideFiltersButtonLabel":"platformSmartFilterBar.showFiltersButtonLabel"))("disabled",n._loading),r.xp6(2),r.Q6J("hidden",!n._showFilterBar),r.xp6(1),r.Q6J("noAdditionalContent",!0)("formItems",n._formItems)("columnLayout",n.filtersColumnLayout))},dependencies:[j.nV,P.O5,P.ax,P.tP,j.FR,E.ri,j.vv,i.r0,j.QE,c.CI,V.ni],styles:[".fdp-smart-filter-bar{display:block;box-shadow:var(--sapContent_HeaderShadow);background-color:var(--sapObjectHeader_Background)}.fdp-smart-filter-bar--transparent{background-color:var(--sapToolbar_Background);box-shadow:none}.fdp-smart-filter-bar .fd-toolbar--title{height:3rem;min-height:3rem;border-bottom:none;padding:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fd-toolbar--title{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-toolbar fdp-search-field{min-width:15.5rem}.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:.5rem;padding-right:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container{padding:0}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding-left:.25rem!important;padding-right:.25rem!important}.fdp-smart-filter-bar__conditions-dialog .fdp-smart-filter-bar__actions-column{min-width:auto;flex:0 0 auto}.fdp-smart-filter-bar__conditions-dialog .fd-popover-custom{display:block}.fdp-smart-filter-bar__conditions-dialog .fd-dialog__body{padding:0 .5rem;background-color:var(--sapBackgroundColor, #f7f7f7)}.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container,.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding:0!important}\n"],encapsulation:2,changeDetection:0}),I})()},38438:(W,O,t)=>{t.d(O,{Q:()=>f});var d=t(49671),r=t(46731),p=t(2459),v=t(70014),C=t(62303),S=t(64751),l=t(65879);let f=(()=>{class y{constructor(o){this._fgService=o,this._customFilterConditions=new Map}addCustomFilter(o){if(!o.conditionComponent&&o.rendererComponent&&(o.conditionComponent=o.rendererComponent),!o.conditionComponent)return!1;const c=this._fgService.addComponent(o.conditionComponent,o.types);return c&&this._customFilterConditions.set(o.conditionComponent,o),c&&o.rendererComponent&&this._fgService.addComponent(o.rendererComponent,o.types.map(_=>`${_}-renderer`)),c}getCustomFilterConfiguration(o){const c=this._fgService.getComponentDefinitionByType(o);if(c)return this._customFilterConditions.get(c.component)}getApplicableFilterConditions(o,c=v.g.STRING){const _=this._fgService.getComponentDefinitionByType(o),g=(0,v.b3)(c);return _&&this._customFilterConditions.get(_.component)?.filterStrategies||g}getDisplayValue(o,c){var _=this;return(0,d.Z)(function*(){const g=_.getCustomFilterConfiguration(c);if(g?.valueRenderer){const Z=g?.valueRenderer(o),j=(0,S.M7n)(Z);let V;return yield j.createSubscription(Z,i=>{V=i}),V}const e=_._normalizeValue(o.value),P=_._normalizeValue(o.value2);switch(o.operator){case"equalTo":return`=${e}`;case"contains":return`*${e}*`;case"between":return`${e}...${P}`;case"beginsWith":return`${e}*`;case"endsWith":return`*${e}`;case"greaterThan":case"after":return`>${e}`;case"greaterThanOrEqualTo":case"onOrAfter":return`>=${e}`;case"lessThan":case"before":return`<${e}`;case"lessThanOrEqualTo":case"beforeOrOn":return`<=${e}`;default:return`${e}`}})()}normalizeConditions(o,c){var _=this;return(0,d.Z)(function*(){const g=[];for(const e of c){const P=Object.assign({},e);P.displayValue=yield _.getDisplayValue(P,o.guiOptions?.additionalData.type),g.push(P)}return g})()}getConditionFieldSelectedVariants(o,c){var _=this;return(0,d.Z)(function*(){return(yield _.normalizeConditions(o,c)).map(g=>(0,C.UL)(g)?g:{label:g.displayValue,value:g})})()}transformCollectionFilter(o){return o.filters.map(c=>({operator:c.strategy,value:c.value,value2:c.value2}))}_normalizeValue(o){return Array.isArray(o)?o.map(c=>this._normalizeValue(c)).join(", "):(0,C.UL)(o)?o.label:o instanceof r._U?o.toDateString():o}}return y.\u0275fac=function(o){return new(o||y)(l.LFG(p.bN))},y.\u0275prov=l.Yz7({token:y,factory:y.\u0275fac}),y})()}}]);