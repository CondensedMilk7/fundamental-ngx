import{Ac as K,Bc as Ft,Cc as Et,Kb as Mt,Mb as Ot,Nb as St,lb as It,mb as wt,pb as $,qb as kt,zc as Vt}from"./chunk-J243O57H.js";import{x as bt}from"./chunk-MDCO26HI.js";import{C as yt,D as xt,K as Tt,U as vt,y as nt}from"./chunk-WVE7ILGJ.js";import{$a as oe,F as $e,G as Ke,Ka as dt,L as Qe,La as mt,M as Ue,N as We,P as qe,Qa as _t,R as Ge,Sa as ht,T as Xe,Ta as ft,Ua as gt,V as Je,Va as Ct,Y as Ye,ba as Ze,da as et,ea as tt,ga as it,ha as ot,ja as lt,oa as rt,pa as st,ra as at,sa as pt,t as je,u as ze,ua as ct,xa as ut}from"./chunk-PQI5IDMC.js";import{A as ue,Ab as r,Ac as Me,Bb as Ce,Bc as Oe,Cb as be,Gb as ye,Hb as xe,Ja as Z,Je as Ae,Kb as D,Lb as H,Mb as Te,Na as fe,Pc as Se,Qc as j,Sd as Ee,Tb as ve,Uf as Le,V as de,Vc as z,Wb as L,Wc as Ve,X as me,Xa as O,Xb as P,Xf as Pe,Yb as S,_a as A,a as pe,ab as w,bg as Ne,ca as J,ea as Y,eb as a,fb as f,fc as V,gc as N,h as G,ha as _e,hc as Ie,ib as ge,ic as we,ie as De,lb as E,lc as ne,le as Be,mc as ke,me as Re,nb as d,nc as x,nd as I,o as ce,ob as M,oc as T,od as Fe,p as B,pb as s,qa as R,qb as p,qc as v,rb as _,rc as F,sb as ee,tb as te,ub as ie,vb as y,wb as g,xa as he,xf as He,ya as c,yb as h,z as X,za as u}from"./chunk-52WO5KQ3.js";import{a as se,b as ae,g as q}from"./chunk-VIJJU4QR.js";var Q=new fe("MultiInputComponent");var Lt=["dialogTemplate"];function Pt(o,e){if(o&1&&(p(0,"h1",9),D(1),_()),o&2){let t=r(2);a(1),H(t.mobileConfig.title)}}function Nt(o,e){if(o&1){let t=g();p(0,"button",10),h("click",function(){c(t);let i=r(2);return u(i.handleDismiss())}),_()}o&2&&s("mobile",!0)}function jt(o,e){o&1&&y(0)}var zt=function(){return{displayAddonButton:!1}};function $t(o,e){if(o&1){let t=g();p(0,"div",11)(1,"fd-bar-element",12),d(2,jt,1,0,"ng-container",13),_(),p(3,"fd-bar-element",14)(4,"button",15),h("click",function(){c(t);let i=r(2);return u(i.selectAll(i.allItemsSelected))}),_()()()}if(o&2){let t=r(2);a(2),s("ngTemplateOutlet",(t.childContent==null?null:t.childContent.controlTemplate)||null)("ngTemplateOutletContext",P(3,zt)),a(2),s("fdType",t.allItemsSelected?"emphasized":"transparent")}}function Kt(o,e){o&1&&y(0)}function Qt(o,e){if(o&1){let t=g();p(0,"fd-button-bar",16),h("click",function(){c(t);let i=r(2);return u(i.handleApprove())}),_()}if(o&2){let t=r(2);s("label",t.mobileConfig.approveButtonText)}}function Ut(o,e){if(o&1){let t=g();p(0,"fd-button-bar",17),h("click",function(){c(t);let i=r(2);return u(i.handleDismiss())}),_()}if(o&2){let t=r(2);s("label",t.mobileConfig.cancelButtonText)}}function Wt(o,e){if(o&1&&(p(0,"fd-dialog",2)(1,"fd-dialog-header"),d(2,Pt,2,1,"h1",3),d(3,Nt,1,1,"button",4),d(4,$t,5,4,"ng-template",5),_(),p(5,"fd-dialog-body"),d(6,Kt,1,0,"ng-container",6),_(),p(7,"fd-dialog-footer"),d(8,Qt,1,1,"fd-button-bar",7),d(9,Ut,1,1,"fd-button-bar",8),_()()),o&2){let t=e.$implicit,n=e.dialogConfig,i=r();s("dialogConfig",n)("dialogRef",t),a(2),s("ngIf",i.mobileConfig==null?null:i.mobileConfig.title),a(1),s("ngIf",i.mobileConfig==null?null:i.mobileConfig.hasCloseButton),a(3),s("ngTemplateOutlet",(i.childContent==null?null:i.childContent.listTemplate)||null),a(2),s("ngIf",i.mobileConfig==null?null:i.mobileConfig.approveButtonText),a(1),s("ngIf",i.mobileConfig==null?null:i.mobileConfig.cancelButtonText)}}var le=(()=>{let e=class e extends Ct{constructor(n,i,l,m){super(n,i,l,gt.MULTI_INPUT,m),this.childContent=null}ngOnInit(){this._listenOnMultiInputOpenChange()}ngOnDestroy(){super.onDestroy()}selectAll(n){this._component.selectAllItems(!n)}handleDismiss(){this.dialogRef.dismiss(),this._component.dialogDismiss(this._selectedBackup)}handleApprove(){this.dialogRef.close(),this._component.dialogApprove()}_toggleDialog(n){n&&(this._selectedBackup=this._component.selected?.length?[...this._component.selected]:[],this._dialogService.hasOpenDialogs()||this._open())}_listenOnMultiInputOpenChange(){this._component.openChange.pipe(Y(this._onDestroy$)).subscribe(n=>this._toggleDialog(n)),this._component.allItemsSelectedChange.pipe(Y(this._onDestroy$)).subscribe(n=>this.allItemsSelected=n)}_open(){this.dialogRef=this._dialogService.open(this.dialogTemplate,ae(se({mobile:!0,disablePaddings:!0},this.dialogConfig),{backdropClickCloseable:!1,escKeyCloseable:!1,container:this._elementRef.nativeElement}))}};e.\u0275fac=function(i){return new(i||e)(f(O),f(et),f(Q),f(ft,8))},e.\u0275cmp=R({type:e,selectors:[["fd-multi-input-mobile"]],viewQuery:function(i,l){if(i&1&&T(Lt,5),i&2){let m;x(m=v())&&(l.dialogTemplate=m.first)}},standalone:!0,features:[ge,L],decls:2,vars:0,consts:[[3,"fdDialogTemplate"],["dialogTemplate",""],[3,"dialogConfig","dialogRef"],["fd-title","",4,"ngIf"],["fd-dialog-close-button","",3,"mobile","click",4,"ngIf"],["fdkTemplate","subheader"],[4,"ngTemplateOutlet"],["fdType","emphasized",3,"label","click",4,"ngIf"],[3,"label","click",4,"ngIf"],["fd-title",""],["fd-dialog-close-button","",3,"mobile","click"],["fd-bar-middle",""],[1,"custom-multi-input-mobile-control-element"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"custom-multi-input-select-all-bar-element"],["fd-button","","glyph","multiselect-all",3,"fdType","click"],["fdType","emphasized",3,"label","click"],[3,"label","click"]],template:function(i,l){i&1&&d(0,Wt,10,7,"ng-template",0,1,F)},dependencies:[it,Ze,$e,Xe,Ye,Ke,tt,He,qe,We,Ue,Je,j,Ge,z,Qe],styles:[`.custom-multi-input-select-all-bar-element{min-width:2.25rem}.custom-multi-input-mobile-control-element{width:calc(100% - 2.25rem)}.custom-multi-input-mobile-control-element .fd-multi-input-input-group-custom{width:100%}
`],encapsulation:2,changeDetection:0});let o=e;return o})();var U=class{constructor(){this._selected=new Map,this.selectionChanged=new w}get selected(){return[...this._selected.values()]}isSelected(e){return this._selected.has(e)}select(e,t){t?this._selected.set(e,t):e.forEach(([n,i])=>this._selected.set(n,i)),this.selectionChanged.emit([...this._selected])}deselect(e){this._selected.delete(e),this.selectionChanged.emit([...this._selected])}clear(){this._selected.clear(),this.selectionChanged.emit([...this._selected])}};var Xt=["control"],Jt=["list"],Yt=["searchInputElement"],Rt=function(o){return{displayAddonButton:o}};function Zt(o,e){if(o&1&&y(0,8),o&2){r();let t=M(6),n=r();s("ngTemplateOutlet",t)("ngTemplateOutletContext",S(2,Rt,n.displayAddonButton))}}function ei(o,e){o&1&&y(0)}function ti(o,e){o&1&&y(0)}var ii=function(){return[]};function ni(o,e){if(o&1){let t=g();p(0,"fd-popover",9),h("isOpenChange",function(i){c(t);let l=r(2);return u(l.openChangeHandle(i))})("input",function(){c(t);let i=r(2);return u(!i.open&&i.openChangeHandle(!0))}),p(1,"fd-popover-control")(2,"form",10),h("submit",function(){c(t);let i=r(2);return u(i._onSubmit())}),d(3,ei,1,0,"ng-container",11),_()(),p(4,"fd-popover-body"),d(5,ti,1,0,"ng-container",12),be(6),_()()}if(o&2){let t=r().ngIf,n=M(6),i=M(8),l=r();s("isOpen",l.open)("triggers",P(11,ii))("maxWidth",l._popoverMaxWidth)("disabled",l.disabled)("fillControlMode",l.fillControlMode),a(3),s("ngTemplateOutlet",n)("ngTemplateOutletContext",S(12,Rt,l.displayAddonButton)),a(1),xe("fd-popover__body--hidden",!t.displayedOptions.length),E("aria-hidden",!l.open),a(1),s("ngTemplateOutlet",i)}}function oi(o,e){if(o&1){let t=g();p(0,"fd-token",20),h("onCloseClick",function(i){let m=c(t).$implicit,C=r(3);return u(C._onTokenClick(m,!1,i))})("onRemove",function(){let l=c(t).$implicit,m=r(3);return u(m._onTokenClick(l,!1))}),ee(1,"span",21),_()}if(o&2){let t=e.$implicit,n=r(3);s("disabled",n.disabled),a(1),s("innerHtml",t.label,Z)}}var li=function(o){return{length:o}};function ri(o,e){if(o&1){let t=g();p(0,"fd-input-group",13),h("addOnButtonClicked",function(i){c(t);let l=r(2);return u(l._addOnButtonClicked(i))}),p(1,"span",14),D(2),V(3,"fdTranslate"),_(),p(4,"fd-tokenizer",15,16),h("moreClickedEvent",function(){c(t);let i=r(2);return u(i._moreClicked())}),d(6,oi,2,2,"fd-token",17),p(7,"input",18,19),h("onComplete",function(i){c(t);let l=r(2);return u(l._handleComplete(i))})("keydown",function(i){c(t);let l=r(2);return u(l._handleInputKeydown(i))})("focus",function(){c(t);let i=M(5);return u(i._showAllTokens())})("blur",function(){c(t);let i=M(5);return u(i._hideTokens())}),V(9,"fdTranslate"),_()()()}if(o&2){let t=e.displayAddonButton,n=r().ngIf,i=r();s("state",i.state)("buttonFocusable",i.buttonFocusable)("button",t)("disabled",i.disabled)("isExpanded",i.open&&!i.mobile&&n.displayedOptions.length>0)("isControl",!0)("glyph",t?i.glyph:"")("addonButtonAriaHidden",!!i.title),a(1),E("id",i.tokenHiddenId),a(1),H(Ie(3,28,"coreMultiInput.tokensCountText",S(33,li,i.selected.length))),a(2),s("compactCollapse",i.compactCollapse)("open",i.open)("tokenizerFocusable",!1)("multiAnnouncerOptions",i.filterFn(i.dropdownValues,i.searchTerm)),a(2),s("ngForOf",n.selectedOptions)("ngForTrackBy",i._trackBy),a(1),s("displayFn",i.displayFn)("matcher",i.typeAheadMatcher)("inputText",i._searchTermCtrl.value||"")("options",i.dropdownValues)("enable",!i.includes&&i.autoComplete&&!i.mobile)("placeholder",i.placeholder)("formControl",i._searchTermCtrl)("ariaLabel",i.ariaLabel||N(9,31,"coreMultiInput.multiInputAriaLabel"))("ariaLabelledBy",i.ariaLabelledBy),E("aria-required",i.required)("aria-describedby",i.tokenHiddenId)("id",i.inputId)}}var si=function(o){return{option:o}};function ai(o,e){if(o&1){let t=g();p(0,"li",26),h("click",function(i){let l=c(t),m=l.$implicit,C=l.index,b=r(4);return u(b._onCheckboxClick(m,i,C,!0))})("keyup",function(i){let l=c(t),m=l.$implicit,C=l.index,b=r(4);return u(b._onCheckboxKeyup(m,i,C,!0))}),p(1,"fd-checkbox",27),h("click",function(i){let l=c(t),m=l.$implicit,C=l.index,b=r(4);return u(b._onCheckboxClick(m,i,C))}),_(),y(2,8),_()}if(o&2){let t=e.$implicit;r(3);let n=M(10);s("selected",!!t.isSelected),E("aria-label",t.label),a(1),s("value",t.isSelected),a(1),s("ngTemplateOutlet",n)("ngTemplateOutletContext",S(5,si,t))}}function pi(o,e){if(o&1){let t=g();p(0,"li",28),h("keyDown",function(i){c(t);let l=r(4);return u(l._showAllKeyDown(i))})("click",function(i){c(t);let l=r(4);return u(l._showAllClicked(i))}),p(1,"a",29),D(2),_()()}if(o&2){let t=r(4);a(2),Te("Show All (",t.dropdownValues.length,")")}}function ci(o,e){if(o&1){let t=g();p(0,"ul",23),h("focusEscapeList",function(i){c(t);let l=r(3);return u(l.handleListFocusEscape(i))})("keydown.tab",function(){c(t);let i=r(3);return u(i._close())}),d(1,ai,3,7,"li",24),d(2,pi,3,1,"li",25),V(3,"async"),_()}if(o&2){let t=r(2).ngIf,n=r();ye("max-height",n.mobile?"auto":n.maxHeight)("min-width","100%"),s("selection",!0)("mobileMode",n.mobile)("byline",n.byline),a(1),s("ngForOf",t.displayedOptions)("ngForTrackBy",n._trackBy),a(1),s("ngIf",n.showAllButton&&N(3,10,n._onlySelected$)!==!0&&t.displayedOptions.length<n.dropdownValues.length)}}function ui(o,e){if(o&1&&d(0,ci,4,12,"ul",22),o&2){let t=r().ngIf;s("ngIf",t.displayedOptions.length)}}function di(o,e){if(o&1&&(ee(0,"span",31),V(1,"highlight")),o&2){let t=r().option,n=r(2);s("innerHtml",we(1,1,t.label,n._searchTermCtrl.value||"",n.highlight),Z)}}var mi=function(o){return{$implicit:o}};function _i(o,e){if(o&1&&(te(0),y(1,8),ie()),o&2){let t=r().option,n=r(2);a(1),s("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",S(2,mi,t.item))}}function hi(o,e){if(o&1&&(d(0,di,2,5,"span",30),d(1,_i,2,4,"ng-container",0)),o&2){let t=r(2);s("ngIf",!t.itemTemplate),a(1),s("ngIf",t.itemTemplate)}}function fi(o,e){if(o&1&&(te(0),p(1,"div",1)(2,"div",2),d(3,Zt,1,4,"ng-container",3),d(4,ni,7,14,"fd-popover",4),_()(),d(5,ri,10,35,"ng-template",null,5,F),d(7,ui,1,1,"ng-template",null,6,F),d(9,hi,2,2,"ng-template",null,7,F),ie()),o&2){let t=r();a(3),s("ngIf",t.mobile),a(1),s("ngIf",!t.mobile)}}var gi=["*"];function Bt(o){return re(o)&&"item"in o&&"id"in o}function re(o){return typeof o=="object"&&o!==null&&"value"in o&&"label"in o}var Ci=0,k=class k{set searchTerm(e){this._searchTermCtrl.setValue(e)}get searchTerm(){return this._searchTermCtrl.value??""}set selected(e){if(this._selectionModel.clear(),e){let t=[...e],n=[];t.forEach(i=>{let l=this._optionItems.find(m=>m.value===i);l||(l=this._getOptionItem(i)),n.push(l)}),this._selectionModel.select(n.map(i=>[i.id,i]))}}get selected(){return this._selectionModel.selected.map(e=>e.value)}get _popoverMaxWidth(){return this.bodyMaxWidth==="none"?null:typeof this.bodyMaxWidth=="number"?this.bodyMaxWidth:this.elementRef.nativeElement.getBoundingClientRect().width}get _optionItems(){return this.optionItems$.value}get typeAheadMatcher(){return this.includes?(e,t)=>e.includes(t):(e,t)=>e.startsWith(t)}constructor(e,t,n,i,l,m,C,b){this._contentDensityObserver=e,this.elementRef=t,this._changeDetRef=n,this._dynamicComponentService=i,this._injector=l,this._viewContainerRef=m,this._rtlService=C,this._focusTrapService=b,this.placeholder="",this.disabled=!1,this.required=!1,this.compactCollapse=!0,this.maxHeight="300px",this.glyph="value-help",this.dropdownValues=[],this.openDropdownOnAddOnClicked=!0,this.inputId="",this.highlight=!0,this.filterFn=this._defaultFilter,this.valueFn=this._defaultValueFn,this.displayFn=this._defaultDisplay,this.newTokenParseFn=this._defaultParse,this.newTokenValidateFn=this._defaultTokenValidate,this.fillControlMode="at-least",this.buttonFocusable=!0,this.allowNewTokens=!1,this.mobile=!1,this.showAllButton=!0,this.bodyMaxWidth="none",this.mobileConfig={hasCloseButton:!0,approveButtonText:"Select"},this.includes=!1,this.byline=!1,this.autoComplete=!0,this.searchTermChange=new w,this.selectedChange=new w,this.open=!1,this.displayAddonButton=!0,this._tokenCountHiddenLabel=`fd-multi-input-token-count-id-${Ci++}`,this.tokenHiddenId=this._tokenCountHiddenLabel,this.openChange=new w,this.addOnButtonClicked=new w,this.allItemsSelectedChange=new w,this.optionItems$=new G([]),this._onlySelected$=new G(!1),this._searchTermCtrl=new pt(""),this._selectionModel=new U,this._viewModel$=this._getViewModel(),this._subscriptions=new pe,this._rangeSelector=new De,this._trackBy=(bi,At)=>this.valueFn(At?.item),this.onChange=()=>{},this.onTouched=()=>{}}buildComponentCssClass(){if(this.glyph==="value-help"&&this._dir==="rtl"){let e=this.elementRef.nativeElement.querySelector(".sap-icon--value-help");e&&(e.style.transform="scaleX(-1)")}return["fd-multi-input","fd-multi-input-custom",this.class]}_focusOut(e){this.elementRef.nativeElement.contains(e.relatedTarget)||this.onTouched()}ngOnInit(){this.buildComponentCssClass(),this._subscriptions.add(this._rtlService?.rtl.subscribe(e=>{this._dir=e?"rtl":"ltr",this.buildComponentCssClass()})),this.inputId||(this.inputId=Be()),this._subscriptions.add(this._searchTermCtrl.valueChanges.pipe(de()).subscribe(e=>{this.searchTermChange.emit(e??""),this._rangeSelector.reset()})),this._subscriptions.add(this._getViewModel().pipe(X(e=>!e.displayedOptions.some(t=>!t.isSelected))).subscribe(e=>this.allItemsSelectedChange.emit(e)))}ngOnChanges(e){if(this.buildComponentCssClass(),e.dropdownValues||e.searchTerm||e.valueFn||e.displayFn){let t=(this.dropdownValues??[]).map(n=>this._getOptionItem(n));this.optionItems$.next(t),this._changeDetRef.markForCheck()}e.disabled&&(this.disabled?this._searchTermCtrl.disable():this._searchTermCtrl.enable())}ngAfterViewInit(){this.mobile&&this._setUpMobileMode(),this.tokenizer._showOverflowPopover=!1}ngOnDestroy(){this._subscriptions.unsubscribe()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,e?this.elementRef.nativeElement.style.pointerEvents="none":this.elementRef.nativeElement.style.pointerEvents="auto",this._changeDetRef.detectChanges()}writeValue(e){this.selected=e,this._changeDetRef.markForCheck()}handleListFocusEscape(e){e==="up"&&!this.mobile&&this.searchInputElement.nativeElement.focus()}openChangeHandle(e){this.disabled||(!e&&this.open&&!this.mobile&&this.searchInputElement.nativeElement.focus(),this.open!==e&&this.openChange.emit(e),this.open=e,this.mobile||this._popoverOpenHandle(e),this.open?(this.disableParentFocusTrap(),this.searchInputElement?.nativeElement.focus()):(this._resetSearchTerm(),this.enableParentFocusTrap(),this._onlySelected$.next(!1)),this.tokenizer.tokenizerInnerEl.nativeElement.scrollLeft=this.tokenizer.tokenizerInnerEl.nativeElement.scrollWidth,this._changeDetRef.detectChanges())}selectAllItems(e){e?this.selected=this._optionItems.map(t=>t.value):this.selected=[],this._propagateChange()}_onCheckboxKeyup(e,t,n,i=!1){I.isKeyCode(t,[32,13])&&this._onCheckboxClick(e,t,n,i)}_onCheckboxClick(e,t,n,i=!1){return q(this,null,function*(){let l=!this._selectionModel.isSelected(e.id);this._rangeSelector.onRangeElementToggled(n,t);let m=this._viewModel$.pipe(me()).subscribe(C=>{this._rangeSelector.applyValueToEachInRange(b=>this._handleSelect(l,C.displayedOptions[b],!1)),this._changeDetRef.detectChanges()});this._subscriptions.add(m),i?this.openChangeHandle(!1):t.stopPropagation()})}_onTokenClick(e,t,n){n?.preventDefault(),this._handleSelect(!1,e,t,!0)}_handleSelect(e,t,n=!0,i=!1){let l=this._selectionModel.selected.length;t=this._getOptionItem(t),e?this._selectionModel.select(t.id,t):this._selectionModel.deselect(t.id),this._shouldPopoverBeUpdated(l,this._selectionModel.selected.length)&&this.popoverRef.refreshPosition(),n&&(this._resetSearchTerm(),this.searchInputElement.nativeElement.focus()),this._selectionModel.selected.length===0&&(this.searchInputElement.nativeElement.focus(),this._changeDetRef.detectChanges()),this._propagateChange(i)}_handleInputKeydown(e){I.isKeyCode(e,40)&&!this.mobile?(e.altKey&&this.openChangeHandle(!0),this.listComponent&&(this.listComponent.setItemActive(0),e.preventDefault())):I.isKeyCode(e,[40,38,13])?this.openChangeHandle(!0):I.isKeyCode(e,27)?this.openChangeHandle(!1):I.isKeyCode(e,9)&&this.open?this._close():(I.isKeyType(e,"alphabetical")||I.isKeyType(e,"numeric"))&&(this.open||(this.openChangeHandle(!0),this.searchInputElement.nativeElement.focus()))}_showAllClicked(e){e.preventDefault(),e.stopPropagation(),this._searchTermCtrl.setValue(""),this.searchInputElement.nativeElement.focus()}_showAllKeyDown(e){I.isKeyCode(e,[32,13])&&this._showAllClicked(e)}_onSubmit(){let e=this.searchTerm;if(e==="")return;if(!this._selectFirstFiltered(e)&&this.allowNewTokens&&this.newTokenValidateFn(this._searchTermCtrl.value??"")){let n=this.newTokenParseFn(this._searchTermCtrl.value??"");this._addNewTokenToDropDownValues(n),this._handleSelect(!0,n),this._searchTermCtrl.setValue(""),this.open=!1}}_handleComplete({term:e}){this.searchTerm=e}dialogDismiss(e){this.openChangeHandle(!1),this._resetSearchTerm(),this.selected=e}dialogApprove(){this._propagateChange(!0),this.openChangeHandle(!1),this._resetSearchTerm()}_moreClicked(){this._onlySelected$.next(!0),this.openChangeHandle(!0)}_addOnButtonClicked(e){this.addOnButtonClicked.emit(e),this.openDropdownOnAddOnClicked?this.openChangeHandle(!this.open):this.open&&this.openChangeHandle(!1)}disableParentFocusTrap(){this._focusTrapService?.pauseCurrentFocusTrap()}enableParentFocusTrap(){this._focusTrapService?.unpauseCurrentFocusTrap()}_close(){this.searchInputElement.nativeElement.focus(),this.openChangeHandle(!1)}_addNewTokenToDropDownValues(e){this.dropdownValues.push(e);let t=this._getOptionItem(e);this.optionItems$.next([...this._optionItems,t])}_selectFirstFiltered(e){let t=this.filterFn(this.dropdownValues,e);if(Array.isArray(t)&&t.length>0&&this.autoComplete){let n=this._getOptionItem(t[0]);return this._handleSelect(!0,n),this._searchTermCtrl.setValue(""),this.open=!1,!0}return!1}_defaultFilter(e,t=""){let n=t.toLocaleLowerCase();return e.filter(i=>{if(i){let m=(Bt(i)?i.label:this.displayFn(i))?.toLocaleLowerCase()||"";return this.typeAheadMatcher(m,n)}})}_defaultValueFn(e){return e}_defaultDisplay(e){if(typeof e=="string")return e;if(re(e))return e.label}_defaultParse(e){return e}_defaultTokenValidate(e){return!!e}_popoverOpenHandle(e){this.open=e}_propagateChange(e){if(!this.mobile||e){let t=this._selectionModel.selected.map(n=>n.value);this.onChange(t),this.selectedChange.emit(t)}}_shouldPopoverBeUpdated(e,t){return!!this.popoverRef&&(e===0&&t===1||e===1&&t===0)}_setUpMobileMode(){return q(this,null,function*(){let e=A.create({providers:[{provide:Q,useValue:this}],parent:this._injector});this._dynamicComponentService.createDynamicComponent({listTemplate:this.listTemplate,controlTemplate:this.controlTemplate},le,{containerRef:this._viewContainerRef},{injector:e})})}_getItemIdentifier(e){if(!this.optionItemIdentifier){let t=this.valueFn(e);return typeof t!="string"&&typeof t!="number"&&typeof t!="symbol"&&Me()&&console.warn("optionItemIdentifier is not set and valueFn does not return a string, number or symbol",e),t}return typeof this.optionItemIdentifier=="function"?this.optionItemIdentifier(e):Ee(e,this.optionItemIdentifier)}_resetSearchTerm(){this._searchTermCtrl.setValue(""),this._changeDetRef.detectChanges()}_getOptionItem(e){if(Bt(e))return e;let{label:t,value:n}=this._getValueAndLabelOfItem(e);return{id:this._getItemIdentifier(e),item:e,label:t,value:n,isSelected:!1}}_getValueAndLabelOfItem(e){let t=typeof e=="object"&&e!==null?e[Object.keys(e)[0]]:e,n=this.valueFn(e)??t,i=this.displayFn(e)??t;return re(e)&&(this.valueFn===this._defaultValueFn&&(n=e.value),this.displayFn===this._defaultDisplay&&(i=e.label)),{label:i,value:n}}_getViewModel(){return ue([this._searchTermCtrl.valueChanges.pipe(J(this._searchTermCtrl.value)),this._selectionModel.selectionChanged.pipe(J(null)),this._onlySelected$,this.optionItems$]).pipe(X(()=>{let e=this._searchTermCtrl.value??"",t=this.filterFn(this.dropdownValues,e),n=this._onlySelected$.value,i=(Array.isArray(t)?t:[]).map(l=>this._getOptionItem(l));return i.forEach(l=>l.isSelected=this._selectionModel.isSelected(l.id)),n&&(i=i.filter(l=>l.isSelected)),{selectedOptions:this._selectionModel.selected,displayedOptions:i}}))}};k.\u0275fac=function(t){return new(t||k)(f(je),f(O),f(Oe),f(Pe),f(A),f(ke),f(Ae,8),f(Re,8))},k.\u0275cmp=R({type:k,selectors:[["fd-multi-input"]],viewQuery:function(t,n){if(t&1&&(T(oe,5),T(Xt,5,ne),T(Jt,5,ne),T($,5),T(Yt,5,O),T(K,5)),t&2){let i;x(i=v())&&(n.popoverRef=i.first),x(i=v())&&(n.controlTemplate=i.first),x(i=v())&&(n.listTemplate=i.first),x(i=v())&&(n.listComponent=i.first),x(i=v())&&(n.searchInputElement=i.first),x(i=v())&&(n.tokenizer=i.first)}},hostBindings:function(t,n){t&1&&h("focusout",function(l){return n._focusOut(l)})},inputs:{placeholder:"placeholder",disabled:"disabled",required:"required",compactCollapse:"compactCollapse",maxHeight:"maxHeight",glyph:"glyph",dropdownValues:"dropdownValues",openDropdownOnAddOnClicked:"openDropdownOnAddOnClicked",searchTerm:"searchTerm",inputId:"inputId",highlight:"highlight",selected:"selected",class:"class",filterFn:"filterFn",valueFn:"valueFn",displayFn:"displayFn",newTokenParseFn:"newTokenParseFn",optionItemIdentifier:"optionItemIdentifier",newTokenValidateFn:"newTokenValidateFn",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",fillControlMode:"fillControlMode",state:"state",buttonFocusable:"buttonFocusable",allowNewTokens:"allowNewTokens",mobile:"mobile",showAllButton:"showAllButton",bodyMaxWidth:"bodyMaxWidth",mobileConfig:"mobileConfig",includes:"includes",itemTemplate:"itemTemplate",title:"title",byline:"byline",autoComplete:"autoComplete",open:"open",displayAddonButton:"displayAddonButton",tokenHiddenId:"tokenHiddenId"},outputs:{searchTermChange:"searchTermChange",selectedChange:"selectedChange",openChange:"openChange",addOnButtonClicked:"addOnButtonClicked",allItemsSelectedChange:"allItemsSelectedChange"},standalone:!0,features:[ve([{provide:ot,useExisting:_e(()=>k),multi:!0},bt,yt(k),ze()]),he,L],ngContentSelectors:gi,decls:2,vars:3,consts:[[4,"ngIf"],[1,"fd-multi-input","fd-multi-input-custom"],[1,"fd-multi-input-field"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["additionalBodyClass","fd-popover-custom-list","class","fd-multi-input-popover-custom",3,"isOpen","triggers","maxWidth","disabled","fillControlMode","isOpenChange","input",4,"ngIf"],["control",""],["list",""],["itemSource",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["additionalBodyClass","fd-popover-custom-list",1,"fd-multi-input-popover-custom",3,"isOpen","triggers","maxWidth","disabled","fillControlMode","isOpenChange","input"],[3,"submit"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[1,"fd-multi-input-input-group-custom",3,"state","buttonFocusable","button","disabled","isExpanded","isControl","glyph","addonButtonAriaHidden","addOnButtonClicked"],["aria-hidden","true",1,"fd-multi-input__invisible-text"],["tabindex","-1","fdMultiAnnouncer","",1,"fd-multi-input-tokenizer-custom",3,"compactCollapse","open","tokenizerFocusable","multiAnnouncerOptions","moreClickedEvent"],["tokenizer",""],[3,"disabled","onCloseClick","onRemove",4,"ngFor","ngForOf","ngForTrackBy"],["type","text","autocomplete","off","fd-form-control","","fd-input-group-input","","fdkAutoComplete","",1,"fd-input","fd-tokenizer__input","fd-multi-input-tokenizer-input",3,"displayFn","matcher","inputText","options","enable","placeholder","formControl","ariaLabel","ariaLabelledBy","onComplete","keydown","focus","blur"],["searchInputElement",""],[3,"disabled","onCloseClick","onRemove"],[3,"innerHtml"],["fd-list","","class","fd-multi-input-menu-overflow","aria-multiselectable","true",3,"selection","mobileMode","max-height","byline","min-width","focusEscapeList","keydown.tab",4,"ngIf"],["fd-list","","aria-multiselectable","true",1,"fd-multi-input-menu-overflow",3,"selection","mobileMode","byline","focusEscapeList","keydown.tab"],["fd-list-item","",3,"selected","click","keyup",4,"ngFor","ngForOf","ngForTrackBy"],["fd-list-item","","class","fd-multi-input-show-all",3,"keyDown","click",4,"ngIf"],["fd-list-item","",3,"selected","click","keyup"],[3,"value","click"],["fd-list-item","",1,"fd-multi-input-show-all",3,"keyDown","click"],["fd-link","","role","button","tabindex","0"],["fd-list-title","",3,"innerHtml",4,"ngIf"],["fd-list-title","",3,"innerHtml"]],template:function(t,n){t&1&&(Ce(),d(0,fi,11,2,"ng-container",0),V(1,"async")),t&2&&s("ngIf",N(1,1,n._viewModel$))},dependencies:[j,z,oe,ht,dt,ct,lt,rt,st,at,_t,St,Ot,Mt,Ft,Vt,K,Se,xt,Fe,mt,ut,kt,$,wt,It,vt,Tt,Ve,Ne,nt,Et],styles:[`.fd-multi-input-tokenizer-custom{width:calc(100% - 2.25rem)}[class*=--compact] .fd-multi-input-tokenizer-custom:not([class*=--cozy]):not([class*=--condensed]),.is-compact .fd-multi-input-tokenizer-custom:not(.is-cozy):not(.is-condensed),.fd-multi-input-tokenizer-custom[class*=--compact],.fd-multi-input-tokenizer-custom.is-compact{width:calc(100% - 2rem)}.fd-multi-input__invisible-text{display:none!important}.fd-multi-input-input-group-custom{max-width:100%}.fd-multi-input-custom{display:block}.fd-multi-input-item{cursor:pointer;padding:0}.fd-multi-input-popover-size{overflow:auto;display:block}.fd-multi-input-popover-custom.fd-popover-custom{max-width:100%;display:block}.fd-multi-input-show-all{width:100%;display:flex;justify-content:flex-end;background-color:transparent}.fd-multi-input-show-all .fd-link:active{color:inherit}.fd-multi-input-checkbox{width:100%;cursor:pointer}.fd-multi-input-checkbox .fd-checkbox__label{color:inherit}.fd-multi-input-menu-overflow{max-width:37.5rem}.fd-input.fd-multi-input-tokenizer-input{min-width:4rem;margin-top:0;margin-bottom:0;padding-left:0;background-color:transparent}.fd-list--multi-input{max-width:100%}.fd-popover__body--hidden{display:none}
`],encapsulation:2,changeDetection:0});var W=k;ce([Le,B("design:type",Function),B("design:paramtypes",[]),B("design:returntype",Array)],W.prototype,"buildComponentCssClass",null);export{W as a};
