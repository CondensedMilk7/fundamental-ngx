import{$a as ot,$c as lt,Ca as rt,cb as it,fb as nt,lb as st,mb as at,pb as pt,qb as _t,rc as oe}from"./chunk-IACGEMKM.js";import{r as Je}from"./chunk-YS2CXKSC.js";import{K as tt,y as re}from"./chunk-6LKTS3XZ.js";import{$a as Ke,H as ze,Ka as Xe,L as je,O as Ne,Pa as Ye,Q as He,R as $e,Sa as Ze,ab as et,ma as Ge,na as Qe,oa as qe,qa as We,ta as Ue,z as Le}from"./chunk-HJFBXCT7.js";import{$a as A,Ab as g,Ae as Re,Bb as we,Bc as Fe,Cb as Be,Hc as Me,Jb as Te,K as fe,Kb as E,Ke as te,L as ue,Lb as N,Mb as Y,Me as k,Na as ye,Oc as Pe,P as ve,Pc as K,Qc as ee,Tb as Ee,Td as ke,Vc as Ie,Wb as L,Wd as Ve,Xa as j,Xd as Oe,Yb as y,a as ae,ab as D,ca as pe,da as he,eb as _,fb as h,fc as H,g as de,gc as Se,gf as Ae,h as me,ic as _e,ka as Ce,nb as p,nc as B,ob as u,oc as $,pb as a,pc as Z,pg as le,qa as R,qb as d,qc as T,qg as G,ra as xe,rb as m,rc as C,sa as be,sb as P,tb as X,tg as S,ub as J,ug as Q,vg as De,wb as I,wg as q,ya as x,yb as w,za as b}from"./chunk-52WO5KQ3.js";var ce={errors:{email:"platformMessagePopover.defaultErrors.email",max:"platformMessagePopover.defaultErrors.max",maxlength:"platformMessagePopover.defaultErrors.maxLength",min:"platformMessagePopover.defaultErrors.min",minlength:"platformMessagePopover.defaultErrors.minLength",pattern:"platformMessagePopover.defaultErrors.pattern",required:"platformMessagePopover.defaultErrors.required",requiredTrue:"platformMessagePopover.defaultErrors.requiredTrue"}},W=new ye("FdpMessagePopoverConfig");var ft=["listView"],ut=["detailsView"];function vt(r,i){}var V=function(r){return{$implicit:r}};function ht(r,i){if(r&1&&p(0,vt,0,0,"ng-template",14),r&2){let o=g().$implicit;a("ngTemplateOutlet",o.heading.message||o.description.message)("ngTemplateOutletContext",y(2,V,o.heading.error))}}function Ct(r,i){}function xt(r,i){if(r&1&&p(0,Ct,0,0,"ng-template",14),r&2){let o=g().$implicit;a("ngTemplateOutlet",o.heading.message)("ngTemplateOutletContext",y(2,V,o.errors))}}var ct=function(r){return{error:r}};function bt(r,i){if(r&1&&(E(0),H(1,"fdTranslate")),r&2){let o=g().$implicit;Y(" ",_e(1,1,o.heading.message,y(5,ct,o.heading.error),o.heading.message)," ")}}function yt(r,i){}function wt(r,i){if(r&1&&(p(0,ht,1,4,"ng-template",null,10,C),p(2,xt,1,4,"ng-template",null,11,C),p(4,bt,2,7,"ng-template",null,12,C),p(6,yt,0,0,"ng-template",13)),r&2){let o=i.$implicit,e=u(1),t=u(3),n=u(5);_(6),a("ngTemplateOutlet",o.heading.type==="directive"?e:o.heading.type==="string"?n:t)}}function Bt(r,i){}function Tt(r,i){if(r&1&&p(0,Bt,0,0,"ng-template",14),r&2){let o=g().$implicit;a("ngTemplateOutlet",o.description.message)("ngTemplateOutletContext",y(2,V,o.description.error))}}function Et(r,i){}function St(r,i){if(r&1&&p(0,Et,0,0,"ng-template",14),r&2){let o=g().$implicit;a("ngTemplateOutlet",o.description.message)("ngTemplateOutletContext",y(2,V,o.errors))}}function Ft(r,i){if(r&1&&(E(0),H(1,"fdTranslate")),r&2){let o=g().$implicit;Y(" ",_e(1,1,o.description.message,y(5,ct,o.description.error),o.description.message)," ")}}function Mt(r,i){}function Pt(r,i){if(r&1&&(p(0,Tt,1,4,"ng-template",null,15,C),p(2,St,1,4,"ng-template",null,16,C),p(4,Ft,2,7,"ng-template",null,17,C),p(6,Mt,0,0,"ng-template",13)),r&2){let o=i.$implicit,e=u(1),t=u(3),n=u(5);_(6),a("ngTemplateOutlet",o.heading.type==="directive"?e:o.heading.type==="string"?n:t)}}function It(r,i){if(r&1&&(d(0,"li",19)(1,"span",20),E(2),m()()),r&2){let o=g().$implicit;_(2),N(o.group)}}function kt(r,i){if(r&1&&P(0,"span",26),r&2){let o=g().$implicit;a("status",o.state)("glyph","message-"+o.type)}}function Vt(r,i){}function Ot(r,i){if(r&1&&(d(0,"span",27),p(1,Vt,0,0,"ng-template",14),m()),r&2){let o=g().$implicit;g(2);let e=u(1);_(1),a("ngTemplateOutlet",e)("ngTemplateOutletContext",y(2,V,o))}}function Rt(r,i){}function At(r,i){}function Dt(r,i){if(r&1){let o=I();d(0,"span",28),p(1,Rt,0,0,"ng-template",13),d(2,"span",29)(3,"span",20)(4,"a",30),w("click",function(t){x(o);let n=g().$implicit,s=g(2);return b(s._focusElement(t,n))}),E(5),m()(),p(6,At,0,0,"ng-template",13),m()()}if(r&2){let o=g().$implicit,e=u(3),t=u(5);a("navigationIndicator",!!o.description.message),_(1),a("ngTemplateOutlet",e),_(4),Y(" ",o.fieldName," "),_(1),a("ngTemplateOutlet",t)}}function Lt(r,i){}function zt(r,i){}function jt(r,i){if(r&1&&(d(0,"a",28),p(1,Lt,0,0,"ng-template",13),d(2,"span",29)(3,"span",20),E(4),m(),p(5,zt,0,0,"ng-template",13),m()()),r&2){let o=g().$implicit,e=u(3),t=u(5);a("navigationIndicator",!!o.description.message),_(1),a("ngTemplateOutlet",e),_(3),N(o.fieldName),_(1),a("ngTemplateOutlet",t)}}function Nt(r,i){if(r&1){let o=I();X(0),d(1,"li",21),w("click",function(){let n=x(o).$implicit,s=g(2);return b(s._showDetails(n))}),p(2,kt,1,2,"ng-template",null,22,C),p(4,Ot,2,4,"ng-template",null,23,C),p(6,Dt,7,4,"span",24),p(7,jt,6,4,"ng-template",null,25,C),m(),J()}if(r&2){let o=i.$implicit,e=i.index,t=u(8);_(1),a("tabindex",e===0?0:-1)("byline",!0),_(5),a("ngIf",o.element&&!!o.description.message)("ngIfElse",t)}}function Ht(r,i){if(r&1&&(X(0),p(1,It,3,1,"li",18),p(2,Nt,9,4,"ng-container",6),J()),r&2){let o=i.$implicit;_(1),a("ngIf",o.group),_(1),a("ngForOf",o.errors)}}function $t(r,i){}function Gt(r,i){}function Qt(r,i){if(r&1&&(d(0,"span",34),p(1,Gt,0,0,"ng-template",14),m()),r&2){let o=g(2),e=u(3);_(1),a("ngTemplateOutlet",e)("ngTemplateOutletContext",y(2,V,o.currentEntry))}}function qt(r,i){if(r&1&&(X(0),d(1,"span",31),P(2,"span",32),p(3,$t,0,0,"ng-template",14),m(),p(4,Qt,2,4,"span",33),J()),r&2){let o=g(),e=u(1);_(2),a("status",o.currentEntry.state)("glyph","message-"+o.currentEntry.type),_(1),a("ngTemplateOutlet",e)("ngTemplateOutletContext",y(5,V,o.currentEntry)),_(1),a("ngIf",o.currentEntry.description.message)}}var ne=(()=>{let i=class i{constructor(e,t,n){this._destroyRef=e,this._tabbableService=t,this._document=n,this.openDetails=new D,this.focusItem=new D,this.closePopover=new D,this._initialClass="fd-message-popover__view-container",this._activeListElement=null}ngAfterViewInit(){Re(this._detailsView.nativeElement).pipe(ve(20),k(this._destroyRef)).subscribe(()=>{let{height:e}=this._detailsView.nativeElement.getBoundingClientRect();this._listView.nativeElement.style.minHeight=`${e}px`})}_showDetails(e){if(this._activeListElement=this._document.activeElement,!e.description.message){this._focusElement(void 0,e);return}this.currentScreen="details",this.openDetails.emit(e)}_focusElement(e,t){t?.element?.nativeElement&&(e?.stopImmediatePropagation(),this.closePopover.emit(!1),this.focusItem.emit(t),setTimeout(()=>{this._tabbableService.getTabbableElement(t.element?.nativeElement)?.focus()}))}_onListAnimationComplete(e){e.toState==="open"&&this._activeListElement&&(this._activeListElement.focus(),this._activeListElement=null)}};i.\u0275fac=function(t){return new(t||i)(h(A),h(te),h(Me))},i.\u0275cmp=R({type:i,selectors:[["fdp-message-view"]],viewQuery:function(t,n){if(t&1&&($(ft,5,j),$(ut,5,j)),t&2){let s;B(s=T())&&(n._listView=s.first),B(s=T())&&(n._detailsView=s.first)}},hostVars:2,hostBindings:function(t,n){t&2&&Te(n._initialClass)},inputs:{currentScreen:"currentScreen",filteredErrors:"filteredErrors",currentEntry:"currentEntry"},outputs:{openDetails:"openDetails",focusItem:"focusItem",closePopover:"closePopover"},standalone:!0,features:[Ee([te]),L],decls:13,vars:5,consts:[["headingTemplate",""],["descriptionTemplate",""],[1,"fd-message-view"],["tabindex","-1","fd-scrollbar","",1,"fd-message-view__list"],["fd-list","",1,"message-popover__list","fd-list--message-view",3,"navigationIndicator"],["listView",""],[4,"ngFor","ngForOf"],[1,"fd-message-view__details"],["detailsView",""],[4,"ngIf"],["directiveHeading",""],["i18nHeading",""],["stringHeading",""],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["directiveDescription",""],["i18nDescription",""],["stringDescription",""],["fd-list-group-header","",4,"ngIf"],["fd-list-group-header",""],["fd-list-title",""],["fd-list-item","",3,"tabindex","byline","click"],["itemIcon",""],["listSubtitle",""],["fd-list-link","",3,"navigationIndicator",4,"ngIf","ngIfElse"],["anchorListLink",""],["fd-object-status","",1,"fd-list__icon",3,"status","glyph"],[1,"fd-list__subtitle"],["fd-list-link","",3,"navigationIndicator"],["fd-list-content",""],["tabindex","0","fd-link","",3,"click"],[1,"fd-message-view__details-title"],["fd-object-status","",1,"fd-message-view__icon",3,"status","glyph"],["class","fd-message-view__details-description",4,"ngIf"],[1,"fd-message-view__details-description"]],template:function(t,n){t&1&&(p(0,wt,7,1,"ng-template",null,0,C),p(2,Pt,7,1,"ng-template",null,1,C),d(4,"div",2)(5,"section",3),w("@openCloseList.done",function(c){return n._onListAnimationComplete(c)}),d(6,"ul",4,5),p(8,Ht,3,2,"ng-container",6),m()(),d(9,"section",7)(10,"div",null,8),p(12,qt,5,7,"ng-container",9),m()()()),t&2&&(_(5),a("@openCloseList",n.currentScreen==="list"?"open":"closed"),_(1),a("navigationIndicator",!0),_(2),a("ngForOf",n.filteredErrors),_(1),a("@openCloseDetails",n.currentScreen==="details"?"open":"closed"),_(3),a("ngIf",n.currentEntry))},dependencies:[Ie,Le,_t,pt,at,st,it,nt,ot,K,ee,oe,tt,re],encapsulation:2,data:{animation:[le("openCloseList",[Q("open",S({transform:"translateX(0)",opacity:1})),Q("closed",S({transform:"translateX(-50px)",opacity:0})),q("open => closed",[G(".1s cubic-bezier(0, 0, 0.2, 1)")]),q("closed => open",[G("0.1s .1s cubic-bezier(0, 0, 0.2, 1)")])]),le("openCloseDetails",[Q("open",S({transform:"translateX(0)",opacity:1,display:"block"})),Q("closed",S({transform:"translateX(50px)",opacity:0})),q("open => closed",[G(".1s cubic-bezier(0, 0, 0.2, 1)",De([S({transform:"translateX(0)",opacity:1,display:"block"}),S({transform:"translateX(50px)",opacity:0,display:"none"})]))]),q("closed => open",[S({display:"block"}),G("0.1s .1s cubic-bezier(0, 0, 0.2, 1)")])])]},changeDetection:0});let r=i;return r})();function gt(r){switch(r){case"error":return"negative";case"warning":return"critical";case"default":return"neutral";default:return r}}function U(r){switch(r){case"success":return"positive";case"error":return"negative";case"warning":return"critical";case"information":return"informative";default:return"neutral"}}var Ut=["popover"];function Xt(r,i){if(r&1&&(d(0,"button",15),P(1,"span",16),d(2,"span",17),E(3),m()()),r&2){let o=i.$implicit;a("value",o.group),_(1),a("status",o.state)("glyph","message-"+o.group),_(2),N(o.count)}}function Jt(r,i){if(r&1){let o=I();d(0,"fd-segmented-button",12),w("ngModelChange",function(t){x(o);let n=g(2);return b(n._currentErrorType=t)})("ngModelChange",function(){x(o);let t=g(2);return b(t._filterErrors())}),P(1,"button",13),H(2,"fdTranslate"),p(3,Xt,4,4,"button",14),m()}if(r&2){let o=g(2);a("ngModel",o._currentErrorType),_(1),a("label",Se(2,3,"platformMessagePopover.allErrors")),_(2),a("ngForOf",o._errorTypes)}}function Yt(r,i){if(r&1){let o=I();d(0,"button",18),w("click",function(){x(o);let t=g(2);return b(t._showList())}),m()}}function Zt(r,i){if(r&1){let o=I();d(0,"fd-popover",1,2)(2,"fd-popover-control"),P(3,"button",3),m(),d(4,"div")(5,"div",4)(6,"div",5)(7,"div",6),p(8,Jt,4,5,"fd-segmented-button",7),p(9,Yt,1,0,"button",8),m(),d(10,"div",9)(11,"button",10),w("click",function(){x(o);let t=u(1);return b(t.close())}),m()()()(),d(12,"fdp-message-view",11),w("openDetails",function(t){x(o);let n=g();return b(n._showDetails(t))})("closePopover",function(t){x(o);let n=g();return b(n._closePopover(t))})("focusItem",function(t){x(o);let n=g();return b(n.focusItem.emit(t))}),m()()()}if(r&2){let o=g();a("focusTrapped",!0)("focusAutoCapture",!0)("disableScrollbar",!0),_(3),a("ngClass","fd-message-popover__trigger--"+o._priorityState)("glyph","message-"+o._priorityFormState)("label",o._priorityStateItemsCount.toString()),_(5),a("ngIf",o.currentScreen==="list"),_(1),a("ngIf",o.currentScreen==="details"),_(3),a("currentScreen",o.currentScreen)("filteredErrors",o._filteredErrors)("currentEntry",o.currentEntry)}}var dt=(()=>{let i=class i{constructor(e,t){this._cdr=e,this._destroyRef=t,this.focusItem=new D,this.currentScreen="list",this._currentErrorType="all",this._errorTypes=[],this._priorityStateItemsCount=0,this._filteredErrors=[],this._groupedErrors=[]}ngOnInit(){this.wrapper?.setMessagePopover(this),this.wrapper?.errors.pipe(k(this._destroyRef)).subscribe(e=>{this._groupedErrors=e,this._errorTypes=[];let t=Ve(ke(Object.values(this._groupedErrors.map(s=>s.errors))),"type"),n=Object.keys(t);n.forEach(s=>{this._errorTypes.push({group:s,count:t[s],state:U(s)})}),this._priorityFormState=rt(n),this._priorityState=gt(this._priorityFormState),this._priorityStateItemsCount=t[this._priorityFormState],this._filterErrors(),this._cdr.detectChanges()})}_showList(){this.currentScreen="list",this.currentEntry=null}_showDetails(e){this.currentScreen="details",this.currentEntry=e}_closePopover(e=!0){this._popover.close(e)}_filterErrors(){if(this._currentErrorType==="all"){this._filteredErrors=this._groupedErrors;return}this._filteredErrors=[],this._groupedErrors.forEach(e=>{let t=e.errors.filter(n=>n.type===this._currentErrorType);t.length!==0&&this._filteredErrors.push({group:e.group,errors:t})})}};i.\u0275fac=function(t){return new(t||i)(h(Fe),h(A))},i.\u0275cmp=R({type:i,selectors:[["fdp-message-popover"]],viewQuery:function(t,n){if(t&1&&$(Ut,5),t&2){let s;B(s=T())&&(n._popover=s.first)}},inputs:{wrapper:"wrapper"},outputs:{focusItem:"focusItem"},standalone:!0,features:[L],decls:1,vars:1,consts:[["placement","top-start",3,"focusTrapped","focusAutoCapture","disableScrollbar",4,"ngIf"],["placement","top-start",3,"focusTrapped","focusAutoCapture","disableScrollbar"],["popover",""],["fd-button","","type","button",1,"fd-message-popover__trigger","fd-message-popover__trigger",3,"ngClass","glyph","label"],["fd-popover-body-header",""],["fd-bar","","barDesign","header",1,"fd-bar--growing"],["fd-bar-left",""],[3,"ngModel","ngModelChange",4,"ngIf"],["fd-button","","fdkInitialFocus","","fdType","transparent","glyph","navigation-left-arrow","title","Go back",3,"click",4,"ngIf"],["fd-bar-right",""],["fd-button","","fdType","transparent","glyph","decline",3,"click"],[3,"currentScreen","filteredErrors","currentEntry","openDetails","closePopover","focusItem"],[3,"ngModel","ngModelChange"],["fd-button","","value","all",3,"label"],["fd-button","",3,"value",4,"ngFor","ngForOf"],["fd-button","",3,"value"],["fd-object-status","",3,"status","glyph"],[1,"fd-button__text"],["fd-button","","fdkInitialFocus","","fdType","transparent","glyph","navigation-left-arrow","title","Go back",3,"click"]],template:function(t,n){t&1&&p(0,Zt,13,11,"fd-popover",0),t&2&&a("ngIf",n._errorTypes.length>0)},dependencies:[ee,et,Ze,Ye,Ke,je,Pe,$e,ze,Ne,He,lt,Xe,qe,Ue,K,oe,Ae,ne,re],styles:[`.fd-message-view{-webkit-box-sizing:border-box;border:0;box-sizing:border-box;color:var(--sapTextColor);font-family:var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400;forced-color-adjust:none;line-height:var(--sapContent_LineHeight);margin:0;overflow:hidden;padding:0;position:relative}.fd-message-view:after,.fd-message-view:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-message-view__list{-webkit-box-sizing:border-box;border:0;box-sizing:border-box;color:var(--sapTextColor);font-family:var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400;forced-color-adjust:none;line-height:var(--sapContent_LineHeight);margin:0;max-height:50vh;max-width:26rem;padding:0}.fd-message-view__list:after,.fd-message-view__list:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-message-view__list--hidden{opacity:0}.fd-message-view__details{-webkit-box-sizing:border-box;border:0;box-sizing:border-box;color:var(--sapTextColor);display:none;font-family:var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400;forced-color-adjust:none;inset:0;line-height:var(--sapContent_LineHeight);margin:0;padding:1rem 1rem 1rem 3.5rem;position:absolute}.fd-message-view__details:after,.fd-message-view__details:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-message-view__details[dir=rtl],[dir=rtl] .fd-message-view__details{padding:1rem 3.5rem 1rem 1rem}.fd-message-view__details-title{-webkit-box-sizing:border-box;border:0;box-sizing:border-box;color:var(--sapTextColor);color:var(--sapGroup_TitleTextColor);display:block;font-family:var(--sapFontFamily);font-family:var(--sapFontHeaderFamily);font-size:var(--sapFontSize);font-size:var(--sapFontHeader5Size);font-weight:400;font-weight:var(--sapFontHeaderWeight);forced-color-adjust:none;line-height:var(--sapContent_LineHeight);margin:0 0 1rem;padding:0;white-space:normal}.fd-message-view__details-title:after,.fd-message-view__details-title:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-message-view__details-title .fd-message-view__icon{font-size:1rem;margin:0 .5rem 0 -2rem}.fd-message-view__details-title .fd-message-view__icon[dir=rtl],[dir=rtl] .fd-message-view__details-title .fd-message-view__icon{margin:0 -2rem 0 .5rem}.fd-message-view__details-description{-webkit-box-sizing:border-box;border:0;box-sizing:border-box;color:var(--sapTextColor);display:block;font-family:var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400;forced-color-adjust:none;line-height:var(--sapContent_LineHeight);line-height:1.4;margin:0 0 1rem;padding:0;white-space:normal}.fd-message-view__details-description:after,.fd-message-view__details-description:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-message-view__details--visible{display:block}.fd-message-popover__trigger{--fdButtonFocusColor:var(--sapContent_ContrastFocusColor);border-width:var(--fdMessagePopover_Trigger_Border_Width);text-shadow:var(--fdButtonTextShadow)}.fd-message-popover__trigger.fd-message-popover__trigger--critical{--fdButtonColor:var(--sapButton_Critical_TextColor);--fdButtonBackgroundColor:var(--sapButton_Critical_Background);--fdButtonBorderColor:var(--sapButton_Critical_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Critical_Regular_Text_Shadow)}.fd-message-popover__trigger.fd-message-popover__trigger--critical.is-focus,.fd-message-popover__trigger.fd-message-popover__trigger--critical:focus{z-index:5}.fd-message-popover__trigger.fd-message-popover__trigger--critical.is-focus:after,.fd-message-popover__trigger.fd-message-popover__trigger--critical:focus:after{border-color:var(--fdButtonFocusColor)}.fd-message-popover__trigger.fd-message-popover__trigger--critical.is-hover,.fd-message-popover__trigger.fd-message-popover__trigger--critical:hover{--fdButtonColor:var(--sapButton_Critical_Hover_TextColor);--fdButtonBackgroundColor:var(--sapButton_Critical_Hover_Background);--fdButtonBorderColor:var(--sapButton_Critical_Hover_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Critical_Hover_Text_Shadow)}.fd-message-popover__trigger.fd-message-popover__trigger--critical.is-active,.fd-message-popover__trigger.fd-message-popover__trigger--critical:active{--fdButtonColor:var(--sapButton_Critical_Active_TextColor);--fdButtonBackgroundColor:var(--sapButton_Critical_Active_Background);--fdButtonBorderColor:var(--sapButton_Critical_Active_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Critical_Active_Text_Shadow);--fdButtonFocusColor:var(--fdMessagePopover_Active_Focus_Outline_Color)}.fd-message-popover__trigger.fd-message-popover__trigger--critical.is-disabled,.fd-message-popover__trigger.fd-message-popover__trigger--critical:disabled,.fd-message-popover__trigger.fd-message-popover__trigger--critical[aria-disabled=true]{--fdButtonColor:var(--sapButton_Critical_TextColor);--fdButtonBackgroundColor:var(--sapButton_Critical_Background);--fdButtonBorderColor:var(--sapButton_Critical_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Critical_Regular_Text_Shadow);opacity:var(--sapContent_DisabledOpacity);pointer-events:none}.fd-message-popover__trigger.fd-message-popover__trigger--negative{--fdButtonColor:var(--sapButton_Negative_TextColor);--fdButtonBackgroundColor:var(--sapButton_Negative_Background);--fdButtonBorderColor:var(--sapButton_Negative_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Negative_Regular_Text_Shadow)}.fd-message-popover__trigger.fd-message-popover__trigger--negative.is-focus,.fd-message-popover__trigger.fd-message-popover__trigger--negative:focus{z-index:5}.fd-message-popover__trigger.fd-message-popover__trigger--negative.is-focus:after,.fd-message-popover__trigger.fd-message-popover__trigger--negative:focus:after{border-color:var(--fdButtonFocusColor)}.fd-message-popover__trigger.fd-message-popover__trigger--negative.is-hover,.fd-message-popover__trigger.fd-message-popover__trigger--negative:hover{--fdButtonColor:var(--sapButton_Negative_Hover_TextColor);--fdButtonBackgroundColor:var(--sapButton_Negative_Hover_Background);--fdButtonBorderColor:var(--sapButton_Negative_Hover_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Negative_Hover_Text_Shadow)}.fd-message-popover__trigger.fd-message-popover__trigger--negative.is-active,.fd-message-popover__trigger.fd-message-popover__trigger--negative:active{--fdButtonColor:var(--sapButton_Negative_Active_TextColor);--fdButtonBackgroundColor:var(--sapButton_Negative_Active_Background);--fdButtonBorderColor:var(--sapButton_Negative_Active_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Negative_Active_Text_Shadow);--fdButtonFocusColor:var(--fdMessagePopover_Active_Focus_Outline_Color)}.fd-message-popover__trigger.fd-message-popover__trigger--negative.is-disabled,.fd-message-popover__trigger.fd-message-popover__trigger--negative:disabled,.fd-message-popover__trigger.fd-message-popover__trigger--negative[aria-disabled=true]{--fdButtonColor:var(--sapButton_Negative_TextColor);--fdButtonBackgroundColor:var(--sapButton_Negative_Background);--fdButtonBorderColor:var(--sapButton_Negative_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Negative_Regular_Text_Shadow);opacity:var(--sapContent_DisabledOpacity);pointer-events:none}.fd-message-popover__trigger.fd-message-popover__trigger--success{--fdButtonColor:var(--sapButton_Success_TextColor);--fdButtonBackgroundColor:var(--sapButton_Success_Background);--fdButtonBorderColor:var(--sapButton_Success_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Success_Regular_Text_Shadow)}.fd-message-popover__trigger.fd-message-popover__trigger--success.is-focus,.fd-message-popover__trigger.fd-message-popover__trigger--success:focus{z-index:5}.fd-message-popover__trigger.fd-message-popover__trigger--success.is-focus:after,.fd-message-popover__trigger.fd-message-popover__trigger--success:focus:after{border-color:var(--fdButtonFocusColor)}.fd-message-popover__trigger.fd-message-popover__trigger--success.is-hover,.fd-message-popover__trigger.fd-message-popover__trigger--success:hover{--fdButtonColor:var(--sapButton_Success_Hover_TextColor);--fdButtonBackgroundColor:var(--sapButton_Success_Hover_Background);--fdButtonBorderColor:var(--sapButton_Success_Hover_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Success_Hover_Text_Shadow)}.fd-message-popover__trigger.fd-message-popover__trigger--success.is-active,.fd-message-popover__trigger.fd-message-popover__trigger--success:active{--fdButtonColor:var(--sapButton_Success_Active_TextColor);--fdButtonBackgroundColor:var(--sapButton_Success_Active_Background);--fdButtonBorderColor:var(--sapButton_Success_Active_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Success_Active_Text_Shadow);--fdButtonFocusColor:var(--fdMessagePopover_Active_Focus_Outline_Color)}.fd-message-popover__trigger.fd-message-popover__trigger--success.is-disabled,.fd-message-popover__trigger.fd-message-popover__trigger--success:disabled,.fd-message-popover__trigger.fd-message-popover__trigger--success[aria-disabled=true]{--fdButtonColor:var(--sapButton_Success_TextColor);--fdButtonBackgroundColor:var(--sapButton_Success_Background);--fdButtonBorderColor:var(--sapButton_Success_BorderColor);--fdButtonTextShadow:var(--fdMessagePopover_Success_Regular_Text_Shadow);opacity:var(--sapContent_DisabledOpacity);pointer-events:none}.fd-message-popover__trigger.fd-message-popover__trigger--information{--fdButtonColor:var(--fdMessagePopover_Information_Regular_Color);--fdButtonBackgroundColor:var(--fdMessagePopover_Information_Regular_Background_Color);--fdButtonBorderColor:var(--fdMessagePopover_Information_Regular_Border_Color);--fdButtonTextShadow:var(--fdMessagePopover_Information_Regular_Text_Shadow);--fdButtonFocusColor:var(--fdMessagePopover_Information_Focus_Outline_Color)}.fd-message-popover__trigger.fd-message-popover__trigger--information.is-focus,.fd-message-popover__trigger.fd-message-popover__trigger--information:focus{z-index:5}.fd-message-popover__trigger.fd-message-popover__trigger--information.is-focus:after,.fd-message-popover__trigger.fd-message-popover__trigger--information:focus:after{border-color:var(--fdButtonFocusColor)}.fd-message-popover__trigger.fd-message-popover__trigger--information.is-hover,.fd-message-popover__trigger.fd-message-popover__trigger--information:hover{--fdButtonColor:var(--fdMessagePopover_Information_Hover_Color);--fdButtonBackgroundColor:var(--fdMessagePopover_Information_Hover_Background_Color);--fdButtonBorderColor:var(--fdMessagePopover_Information_Hover_Border_Color);--fdButtonTextShadow:var(--fdMessagePopover_Information_Hover_Text_Shadow)}.fd-message-popover__trigger.fd-message-popover__trigger--information.is-active,.fd-message-popover__trigger.fd-message-popover__trigger--information:active{--fdButtonColor:var(--fdMessagePopover_Information_Active_Color);--fdButtonBackgroundColor:var(--fdMessagePopover_Information_Active_Background_Color);--fdButtonBorderColor:var(--fdMessagePopover_Information_Active_Border_Color);--fdButtonTextShadow:var(--fdMessagePopover_Information_Active_Text_Shadow);--fdButtonFocusColor:var(--fdMessagePopover_Active_Focus_Outline_Color)}.fd-message-popover__trigger.fd-message-popover__trigger--information.is-disabled,.fd-message-popover__trigger.fd-message-popover__trigger--information:disabled,.fd-message-popover__trigger.fd-message-popover__trigger--information[aria-disabled=true]{--fdButtonColor:var(--fdMessagePopover_Information_Regular_Color);--fdButtonBackgroundColor:var(--fdMessagePopover_Information_Regular_Background_Color);--fdButtonBorderColor:var(--fdMessagePopover_Information_Regular_Border_Color);--fdButtonTextShadow:var(--fdMessagePopover_Information_Regular_Text_Shadow);opacity:var(--sapContent_DisabledOpacity);pointer-events:none}.fd-message-popover__view-container{border-bottom-left-radius:var(--fdPopover_Border_Radius);border-bottom-right-radius:var(--fdPopover_Border_Radius);overflow:hidden;display:block;max-height:40vh}.fd-message-popover__view-container .fd-message-view .fd-list__item:first-child{border-top-left-radius:0;border-top-right-radius:0}.fd-message-popover__view-container .fd-message-view .fd-list__item:first-child:before{border-top-left-radius:0;border-top-right-radius:0}.fd-message-popover__view-container .fd-message-view .fd-list__item:last-child{border-bottom-left-radius:0;border-bottom-right-radius:0}.fd-message-popover__view-container .fd-message-view .fd-list__item:last-child:before{border-bottom-left-radius:0;border-bottom-right-radius:0}.fd-message-view__list{min-width:20rem;min-height:10rem;max-height:40vh}.fd-message-view__list .fd-link{font-size:inherit}.fd-message-view__list .fd-list__link:active,.fd-message-view__list .fd-list__link.is-active{--sapLinkColor: var(--sapList_Active_TextColor);--sapLink_Active_Color: var(--sapList_Active_TextColor)}
/*!
 * Fundamental Library Styles v0.32.0
 * Copyright (c) 2023 SAP SE or an SAP affiliate company.
 * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/main/LICENSE)
 */
`],encapsulation:2,changeDetection:0});let r=i;return r})();var mt=(()=>{let i=class i{constructor(e,t){this.elementRef=e,this.control=t}};i.\u0275fac=function(t){return new(t||i)(h(j),h(Qe,8))},i.\u0275dir=be({type:i,selectors:[["","fdpMessagePopoverFormItem",""]],inputs:{label:["fdpMessagePopoverFormItem","label"],errorTypes:"errorTypes"},standalone:!0});let r=i;return r})();var Kt=["*"],vo=(()=>{let i=class i{set forms(e){e&&(Array.isArray(e)||(e=[e]),this._ngForms=e,this._startListeningForErrors())}set formFields(e){this._formFields=e,this._listenToFormFieldErrors(e)}get formFields(){return this._formFields}constructor(e,t){this._destroyRef=e,this._config=t,this.messagePopover$=new de,this._errors$=new me([]),this.errors=this._errors$.asObservable(),this._formFields=[],this._ngForms=[],this._formItemErrorsSubscription=new ae,this._formSubmitted=!1}ngAfterViewInit(){this._ngForms.length>0||this._projectedForm?.changes.pipe(pe(null),k(this._destroyRef)).subscribe(()=>{this._ngForms=this._projectedForm.toArray(),this._startListeningForErrors()})}setMessagePopover(e){this.messagePopover$.next(e)}addForms(e){let t=Array.isArray(e)?e:[e];this._ngForms.push(...t),this._startListeningForErrors()}addFormFields(e){this._formFields.push(...e),this._listenToFormFieldErrors(this._formFields)}ngOnDestroy(){this._formItemErrorsSubscription.unsubscribe()}_startListeningForErrors(){if(!this._ngForms)return;this._formErrorsSubscription?.unsubscribe(),this._errors$.next([]);let e=this._ngForms.map(t=>t.ngSubmit.pipe(he(()=>t.statusChanges.pipe(pe(t.status),fe(n=>n.toLowerCase()!=="pending")))));this._formErrorsSubscription=ue(...e).pipe(k(this._destroyRef)).subscribe(()=>{this._formSubmitted=!0;let t=this._directiveItems.length>0?this._collectPlainFormData():this._collectAdvancedFormData();this._errors$.next(t)}),this._listenToFormFieldErrors(this._projectedFormFieldControls.toArray()),this._projectedFormFieldControls?.changes.subscribe(()=>{this._listenToFormFieldErrors(this._projectedFormFieldControls.toArray())})}_listenToFormFieldErrors(e){this._formItemErrorsSubscription.unsubscribe(),this._formItemErrorsSubscription=new ae,e?.forEach(t=>{this._formItemErrorsSubscription.add(t.formField?.errorsChange$.subscribe(()=>{if(!this._formSubmitted)return;let n=this._directiveItems.length>0?this._collectPlainFormData():this._collectAdvancedFormData();this._errors$.next(n)}))})}_collectPlainFormData(){let e=[{errors:[]}],t=this._directiveItems.toArray();return this._ngForms.forEach(n=>{Object.keys(n.form.controls).forEach(s=>{let c=n.form.get(s),l=t.find(f=>f.control?.name===s);if(!c?.errors||!l)return;let v=Object.keys(this._config.errors);Object.keys(c.errors).filter(f=>v.includes(f)).forEach(f=>{let F=c.errors[f],M=this._getConfigErrorModel(f,l.errorTypes),O=l?.errorTypes?l?.errorTypes[f]:null,z=O&&this._isAdvancedError(O)&&O.type?O.type:"error",ge={name:s,type:M.type,state:U(z),fieldName:l?.label??"",element:l?.elementRef,heading:{type:"string",error:F,message:M.heading},description:{type:"string",error:F,message:M.description},errors:c.errors};e[0].errors.push(ge)})})}),e}_collectAdvancedFormData(){let e=[],t=this.formFields.length>0?this.formFields:this._projectedFormFieldControls.toArray(),n=s=>Array.isArray(s)?(s.forEach(c=>{e=n(c)}),e):(Object.keys(s.controls).forEach(c=>{let l=s.get(c),v=t.find(f=>f.id===c);l instanceof We&&(e=n(l)),!(!l?.errors||!v)&&Object.keys(l.errors).forEach(f=>{let F=v.formField?.groupedErrors.find(se=>se.directive.error===f),M=this._getGroupName(v?.formField),O=this._getErrorModel(c,M,l,v,f,F,l.errors[f]),z=e.findIndex(se=>se.group===M);z===-1&&(z=e.push({group:M,errors:[]})-1),e[z].errors.push(O)})}),e);return n(this._ngForms.map(s=>s.form))}_getErrorModel(e,t,n,s,c,l,v){let f="error",F=this._config.errors[c];return l?.directive.type?f=l.directive.type:this._isAdvancedError(F)&&(f=F.type),{name:e,type:f,state:U(f),group:t,fieldName:s?.formField?.label??"",heading:this._getErrorText(s,l,"heading",c,v),description:this._getErrorText(s,l,"description",c,v),errors:n.errors,formField:s,element:s?.elementRef}}_getErrorText(e,t,n="heading",s,c){let l={error:t?.error,type:t?.directive?"directive":e?.formField?.i18Strings?"templateRef":"string"};if(l.type==="string"){let v=this._getConfigErrorModel(s);return l.error=c,l.message=v[n],l}return t?.directive?(l.message=n==="heading"?t.directive._headingTemplateRef??t.directive._descriptionTemplateRef:t.directive._descriptionTemplateRef,l):(l.message=e?.formField?.i18Strings??null,l)}_getGroupName(e){let t=[];return e?.formGroupContainer?.mainTitle&&t.push(e.formGroupContainer.mainTitle),e?.formFieldGroup?.label&&t.push(e.formFieldGroup.label),t.join(", ")}_getConfigErrorModel(e,t){let n=t&&t[e]?t[e]:this._config.errors[e],s=!this._isAdvancedError(n),c=s?"error":n.type,l=s?n:n.heading,v=s?void 0:n.description;return{type:c,heading:l,description:v}}_isAdvancedError(e){return!!e&&typeof e!="string"}};i.\u0275fac=function(t){return new(t||i)(h(A),h(W))},i.\u0275cmp=R({type:i,selectors:[["fdp-message-popover-form-wrapper"]],contentQueries:function(t,n,s){if(t&1&&(Z(s,Ge,5),Z(s,Je,5),Z(s,mt,5)),t&2){let c;B(c=T())&&(n._projectedForm=c),B(c=T())&&(n._projectedFormFieldControls=c),B(c=T())&&(n._directiveItems=c)}},inputs:{forms:"forms",formFields:"formFields"},exportAs:["messagePopoverWrapper"],standalone:!0,features:[L],ngContentSelectors:Kt,decls:1,vars:0,template:function(t,n){t&1&&(we(),Be(0))},encapsulation:2,changeDetection:0});let r=i;return r})();var So=(()=>{let i=class i{static withConfig(e){let t=Oe(ce,e,(n,s)=>typeof n=="object"&&!Array.isArray(n)?Object.assign(n,s):Array.isArray(n)?n.concat(s):s);return{ngModule:i,providers:[{provide:W,useValue:t}]}}};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=xe({type:i}),i.\u0275inj=Ce({providers:[{provide:W,useValue:ce}],imports:[dt,ne]});let r=i;return r})();export{W as a,dt as b,mt as c,vo as d,So as e};
