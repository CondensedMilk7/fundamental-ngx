import{A as H,E as G,I as K,L as U,O as $,P as j,h as P,i as A,m as C,o as O,p as z,q,r as B,v as R,y as W}from"./chunk-J7TECB2S.js";import"./chunk-HV2K4HPV.js";import"./chunk-YUWFXCZZ.js";import"./chunk-KF3Z6B7X.js";import"./chunk-H6MK7ND6.js";import{$a as F,Be as N,eb as b,ga as x,he as M,ie as L,ke as V,ma as k}from"./chunk-FJ5JZ7I6.js";import"./chunk-YEIFUFIJ.js";import"./chunk-Y3TICJHY.js";import{Ib as E,Ja as u,Jb as m,Nc as I,O as y,Sb as v,ab as d,ea as S,ka as T,nb as c,ob as s,pb as h,w as g}from"./chunk-N5LKK67M.js";var J=(()=>{let e=class e{constructor(){this.filterTypeEnum=P,this.dataTypeEnum=A,this.source=new q(new w),this.childSource=new B(new D)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=T({type:e,selectors:[["fdp-doc-advanced-scrolling-example"]],standalone:!0,features:[v],decls:8,vars:21,consts:[["table",""],["selectionMode","multiple","relationKey","children","emptyTableMessage","No data found","bodyHeight","300px","hasChildrenKey","hasChildren",3,"dataSource","childDataSource","isTreeTable","virtualScroll","pageScrolling","pageSize","renderAhead","pageScrollingThreshold","expandOnInit"],["title","Order Line Items",3,"hideItemCount","hideSearchInput"],["name","name","key","name","label","Name","align","start",3,"sortable","filterable","dataType"],["name","description","key","description","label","Description"],["name","price","key","price.value","label","Price","align","end",3,"sortable","filterable","dataType"],["name","status","key","status","label","Status","align","center",3,"sortable","filterable","dataType"],[3,"table"]],template:function(a,t){if(a&1&&(c(0,"fdp-table",1,0),h(2,"fdp-table-toolbar",2)(3,"fdp-column",3)(4,"fdp-column",4)(5,"fdp-column",5)(6,"fdp-column",6),s(),h(7,"fdp-table-p13-dialog",7)),a&2){let o=E(1);d("dataSource",t.source)("childDataSource",t.childSource)("isTreeTable",!0)("virtualScroll",!0)("pageScrolling",!0)("pageSize",50)("renderAhead",50)("pageScrollingThreshold",80)("expandOnInit",!0),u(2),d("hideItemCount",!1)("hideSearchInput",!0),u(),d("sortable",!0)("filterable",!0)("dataType",t.dataTypeEnum.STRING),u(2),d("sortable",!0)("filterable",!0)("dataType",t.dataTypeEnum.NUMBER),u(),d("sortable",!0)("filterable",!0)("dataType",t.dataTypeEnum.STRING),u(),d("table",o)}},dependencies:[j,$,G,U,K,W,R,H,b],encapsulation:2,changeDetection:0});let n=e;return n})(),D=class extends z{constructor(){super(...arguments),this.items=new Map,this.totalItems=200,this.startIndex=0,this.allItemsMap=new Map}rowChildrenCount(e){return g(this.totalItems)}fetch(e,r){let i=new Map;return r?.forEach(a=>{let t=this.allItemsMap.get(a),o=e?.page.currentPage;if(t||(t=Q(this.totalItems,a.level+1),this.allItemsMap.set(a,t)),e?.searchInput&&(t=this.search(t,e)),e?.sortBy&&(t=this.sort(t,e)),e?.filterBy&&(t=this.filter(t,e)),o&&e?.page){let p=(o-1)*e.page.pageSize;t=t.slice(p,p+e.page.pageSize)}i.set(a,t)}),g(i).pipe(y(1e3))}filter(e,{filterBy:r}){return r.filter(({field:i})=>!!i).forEach(i=>{e=e.filter(a=>{switch(i.field){case"name":case"description":case"status":case"statusColor":return Y(a,i);case"price.value":return Z(a,i);default:return!1}})}),e}search(e,{searchInput:r,columnKeys:i}){let a=r?.text||"",t=i;return a.trim()===""||t.length===0?e:e.filter(o=>t.map(l=>f(l,o)).filter(l=>!!l).map(l=>l.toString()).some(l=>l.toLocaleLowerCase().includes(a.toLocaleLowerCase())))}sort(e,{sortBy:r}){return r=r.filter(({field:i})=>!!i),r.length===0?e:e.sort((i,a)=>r.map(({field:t,direction:o})=>{let p=o===C.ASC?1:-1;return X(i,a,t)*p}).find((t,o,p)=>t!==0||o===p.length-1)??0)}},w=class extends O{constructor(e=0){super(),this.level=e,this.items=[],this.totalItems=5e3,this.startIndex=0}fetch(e){if(this.allItems=this.allItems||Q(this.totalItems,this.level),this.items=[...this.allItems],e?.searchInput&&(this.items=this.search(this.items,e)),e?.sortBy&&(this.items=this.sort(e)),e?.filterBy&&(this.items=this.filter(this.items,e)),e?.page?.currentPage){let r=(e.page.currentPage-1)*e.page.pageSize;this.items=this.items.slice(r,r+e.page.pageSize)}return g(this.items).pipe(y(1e3))}filter(e,{filterBy:r}){return r.filter(({field:i})=>!!i).forEach(i=>{e=e.filter(a=>{switch(i.field){case"name":case"description":case"status":case"statusColor":return Y(a,i);case"price.value":return Z(a,i);default:return!1}})}),e}search(e,{searchInput:r,columnKeys:i}){let a=r?.text||"",t=i;return a.trim()===""||t.length===0?e:e.filter(o=>t.map(l=>f(l,o)).filter(l=>!!l).map(l=>l.toString()).some(l=>l.toLocaleLowerCase().includes(a.toLocaleLowerCase())))}sort({sortBy:e}){let r=this.items.slice();return e=e.filter(({field:i})=>!!i),e.length===0?r:r.sort((i,a)=>e.map(({field:t,direction:o})=>{let p=o===C.ASC?1:-1;return X(i,a,t)*p}).find((t,o,p)=>t!==0||o===p.length-1)??0)}};function Q(n=5e3,e=0,r=0){return new Array(n).fill(null).map(()=>({name:`Laptops ${r++} (Level ${e+1})`,description:"pede malesuada",price:{value:489.01,currency:"EUR"},status:"Out of stock",statusColor:"negative",date:new F(2020,2,5),verified:!0,hasChildren:e<2}))}var X=(n,e,r)=>(r&&(n=f(r,n),e=f(r,e)),n>e?1:n===e?0:-1);function f(n,e){return n.split(".").reduce((r,i)=>r?r[i]:null,e)}var Y=(n,e)=>{let r=e.value&&e.value.toLocaleLowerCase(),i=e.value2&&e.value2.toLocaleLowerCase()||"",a=f(e.field,n).toLocaleLowerCase(),t=!1;switch(e.strategy){case"equalTo":t=a===r;break;case"greaterThan":t=a>r;break;case"greaterThanOrEqualTo":t=a>=r;break;case"lessThan":t=a<r;break;case"lessThanOrEqualTo":t=a<=r;break;case"between":t=a>=r&&a<=i;break;case"beginsWith":t=a.startsWith(r);break;case"endsWith":t=a.endsWith(r);break;case"contains":default:t=a.includes(r)}return e.exclude?!t:t},Z=(n,e)=>{let r=Number.parseFloat(e.value),i=Number.parseFloat(e.value2)||0,a=Number.parseFloat(f(e.field,n)),t=!1;switch(e.strategy){case"greaterThan":t=a>r;break;case"greaterThanOrEqualTo":t=a>=r;break;case"lessThan":t=a<r;break;case"lessThanOrEqualTo":t=a<=r;break;case"between":t=a>=r&&a<=i;break;case"equalTo":default:t=a===r}return e.exclude?!t:t};var ee="advanced-scrolling/advanced-scrolling-example.component.html",te="advanced-scrolling/advanced-scrolling-example.component.ts",ke=(()=>{let e=class e{constructor(){this.childService=S(N),this.route=S(I),this.pageScrollingTableFiles=[{language:"html",code:x(ee),fileName:"advanced-scrolling-example",name:"advanced-scrolling-example.component.html"},{language:"typescript",code:x(te),fileName:"advanced-scrolling-example",component:"AdvancedScrollingExampleComponent",name:"advanced-scrolling-example.component.ts"}],this.childService.setLink(this.route.snapshot.routeConfig?.path)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=T({type:e,selectors:[["fdp-doc-advanced-examples-docs"]],standalone:!0,features:[v],decls:28,vars:1,consts:[["id","page-scrolling","componentName","table"],[3,"exampleFiles"]],template:function(a,t){a&1&&(c(0,"fd-docs-section-title",0),m(1,"Handling large amount of data"),s(),c(2,"description")(3,"p"),m(4,"One of the scenarios of using Platform Table component, is to render the large amount of items."),s(),c(5,"p"),m(6,"Storing this amount directly in memory may lead to a browser performance issues."),s(),c(7,"p"),m(8," In order to keep the performance on a normal level, Platform Table component supports lazy loading of the items on scroll, and reusing rendered row components for row items. "),s(),c(9,"p"),m(10,"Additionally, Platform Table component supports lazy loading for a child row items."),s(),c(11,"p"),m(12," For this, developers need to pass Data source class that retrieves row's children into "),c(13,"code"),m(14,"[childDataSource]"),s(),m(15," input property. "),s(),c(16,"p")(17,"strong"),m(18,"IMPORTANT:"),s(),m(19," due to complexity of the children lazy loading logic, [childDataSource] can only accept classes derived from "),c(20,"code"),m(21,"TableChildrenDataProvider"),s(),m(22,". "),s(),c(23,"p"),m(24,"This example shows combination of virtual scroll and lazy loading for item on each level."),s()(),c(25,"component-example"),h(26,"fdp-doc-advanced-scrolling-example"),s(),h(27,"code-example",1)),a&2&&(u(27),d("exampleFiles",t.pageScrollingTableFiles))},dependencies:[V,L,M,J,k,b],encapsulation:2,changeDetection:0});let n=e;return n})();export{ke as AdvancedExamplesDocsComponent};
